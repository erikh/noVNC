'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _logging=require('./util/logging.js');var Log=_interopRequireWildcard(_logging);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}exports.default={/* Convert data (an array of integers) to a Base64 string. */toBase64Table:'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='.split(''),base64Pad:'=',encode:function encode(data){'use strict';var result='';var toBase64Table=this.toBase64Table;var length=data.length;var lengthpad=length%3;// Convert every three bytes to 4 ascii characters.
for(var i=0;i<length-2;i+=3){result+=toBase64Table[data[i]>>2];result+=toBase64Table[((data[i]&3)<<4)+(data[i+1]>>4)];result+=toBase64Table[((data[i+1]&15)<<2)+(data[i+2]>>6)];result+=toBase64Table[data[i+2]&63]}// Convert the remaining 1 or 2 bytes, pad out to 4 characters.
var j=0;if(lengthpad===2){j=length-lengthpad;result+=toBase64Table[data[j]>>2];result+=toBase64Table[((data[j]&3)<<4)+(data[j+1]>>4)];result+=toBase64Table[(data[j+1]&15)<<2];result+=toBase64Table[64]}else if(lengthpad===1){j=length-lengthpad;result+=toBase64Table[data[j]>>2];result+=toBase64Table[(data[j]&3)<<4];result+=toBase64Table[64];result+=toBase64Table[64]}return result},/* Convert Base64 data to a string */toBinaryTable:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],decode:function decode(data,offset){'use strict';offset=typeof offset!=='undefined'?offset:0;var toBinaryTable=this.toBinaryTable;var base64Pad=this.base64Pad;var result,result_length;var leftbits=0;// number of bits decoded, but yet to be appended
var leftdata=0;// bits decoded, but yet to be appended
var data_length=data.indexOf('=')-offset;if(data_length<0){data_length=data.length-offset}/* Every four characters is 3 resulting numbers */result_length=(data_length>>2)*3+Math.floor(data_length%4/1.5);result=new Array(result_length);// Convert one by one.
for(var idx=0,i=offset;i<data.length;i++){var c=toBinaryTable[data.charCodeAt(i)&127];var padding=data.charAt(i)===base64Pad;// Skip illegal characters and whitespace
if(c===-1){Log.Error('Illegal character code '+data.charCodeAt(i)+' at position '+i);continue}// Collect data into leftdata, update bitcount
leftdata=leftdata<<6|c;leftbits+=6;// If we have 8 or more bits, append 8 bits to the result
if(leftbits>=8){leftbits-=8;// Append if not padding.
if(!padding){result[idx++]=leftdata>>leftbits&255}leftdata&=(1<<leftbits)-1}}// If there are any bits left, the base64 string was corrupted
if(leftbits){err=new Error('Corrupted base64 string');err.name='Base64-Error';throw err}return result}};/* End of Base64 namespace *//* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */// From: http://hg.mozilla.org/mozilla-central/raw-file/ec10630b1a54/js/src/devtools/jint/sunspider/string-base64.js
'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _keysym=require('./keysym.js');var _keysym2=_interopRequireDefault(_keysym);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}/*
 * Mapping between HTML key values and VNC/X11 keysyms for "special"
 * keys that cannot be handled via their Unicode codepoint.
 *
 * See https://www.w3.org/TR/uievents-key/ for possible values.
 */var DOMKeyTable={};/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2017 Pierre Ossman for Cendio AB
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 */function addStandard(key,standard){if(standard===undefined)throw'Undefined keysym for key "'+key+'"';if(key in DOMKeyTable)throw'Duplicate entry for key "'+key+'"';DOMKeyTable[key]=[standard,standard,standard,standard]}function addLeftRight(key,left,right){if(left===undefined)throw'Undefined keysym for key "'+key+'"';if(right===undefined)throw'Undefined keysym for key "'+key+'"';if(key in DOMKeyTable)throw'Duplicate entry for key "'+key+'"';DOMKeyTable[key]=[left,left,right,left]}function addNumpad(key,standard,numpad){if(standard===undefined)throw'Undefined keysym for key "'+key+'"';if(numpad===undefined)throw'Undefined keysym for key "'+key+'"';if(key in DOMKeyTable)throw'Duplicate entry for key "'+key+'"';DOMKeyTable[key]=[standard,standard,standard,numpad]}// 2.2. Modifier Keys
addLeftRight('Alt',_keysym2.default.XK_Alt_L,_keysym2.default.XK_Alt_R);addStandard('AltGraph',_keysym2.default.XK_ISO_Level3_Shift);addStandard('CapsLock',_keysym2.default.XK_Caps_Lock);addLeftRight('Control',_keysym2.default.XK_Control_L,_keysym2.default.XK_Control_R);// - Fn
// - FnLock
addLeftRight('Hyper',_keysym2.default.XK_Super_L,_keysym2.default.XK_Super_R);addLeftRight('Meta',_keysym2.default.XK_Super_L,_keysym2.default.XK_Super_R);addStandard('NumLock',_keysym2.default.XK_Num_Lock);addStandard('ScrollLock',_keysym2.default.XK_Scroll_Lock);addLeftRight('Shift',_keysym2.default.XK_Shift_L,_keysym2.default.XK_Shift_R);addLeftRight('Super',_keysym2.default.XK_Super_L,_keysym2.default.XK_Super_R);// - Symbol
// - SymbolLock
// 2.3. Whitespace Keys
addNumpad('Enter',_keysym2.default.XK_Return,_keysym2.default.XK_KP_Enter);addStandard('Tab',_keysym2.default.XK_Tab);addNumpad(' ',_keysym2.default.XK_space,_keysym2.default.XK_KP_Space);// 2.4. Navigation Keys
addNumpad('ArrowDown',_keysym2.default.XK_Down,_keysym2.default.XK_KP_Down);addNumpad('ArrowUp',_keysym2.default.XK_Up,_keysym2.default.XK_KP_Up);addNumpad('ArrowLeft',_keysym2.default.XK_Left,_keysym2.default.XK_KP_Left);addNumpad('ArrowRight',_keysym2.default.XK_Right,_keysym2.default.XK_KP_Right);addNumpad('End',_keysym2.default.XK_End,_keysym2.default.XK_KP_End);addNumpad('Home',_keysym2.default.XK_Home,_keysym2.default.XK_KP_Home);addNumpad('PageDown',_keysym2.default.XK_Next,_keysym2.default.XK_KP_Next);addNumpad('PageUp',_keysym2.default.XK_Prior,_keysym2.default.XK_KP_Prior);// 2.5. Editing Keys
addStandard('Backspace',_keysym2.default.XK_BackSpace);addStandard('Clear',_keysym2.default.XK_Clear);addStandard('Copy',_keysym2.default.XF86XK_Copy);// - CrSel
addStandard('Cut',_keysym2.default.XF86XK_Cut);addNumpad('Delete',_keysym2.default.XK_Delete,_keysym2.default.XK_KP_Delete);// - EraseEof
// - ExSel
addNumpad('Insert',_keysym2.default.XK_Insert,_keysym2.default.XK_KP_Insert);addStandard('Paste',_keysym2.default.XF86XK_Paste);addStandard('Redo',_keysym2.default.XK_Redo);addStandard('Undo',_keysym2.default.XK_Undo);// 2.6. UI Keys
// - Accept
// - Again (could just be XK_Redo)
// - Attn
addStandard('Cancel',_keysym2.default.XK_Cancel);addStandard('ContextMenu',_keysym2.default.XK_Menu);addStandard('Escape',_keysym2.default.XK_Escape);addStandard('Execute',_keysym2.default.XK_Execute);addStandard('Find',_keysym2.default.XK_Find);addStandard('Help',_keysym2.default.XK_Help);addStandard('Pause',_keysym2.default.XK_Pause);// - Play
// - Props
addStandard('Select',_keysym2.default.XK_Select);addStandard('ZoomIn',_keysym2.default.XF86XK_ZoomIn);addStandard('ZoomOut',_keysym2.default.XF86XK_ZoomOut);// 2.7. Device Keys
addStandard('BrightnessDown',_keysym2.default.XF86XK_MonBrightnessDown);addStandard('BrightnessUp',_keysym2.default.XF86XK_MonBrightnessUp);addStandard('Eject',_keysym2.default.XF86XK_Eject);addStandard('LogOff',_keysym2.default.XF86XK_LogOff);addStandard('Power',_keysym2.default.XF86XK_PowerOff);addStandard('PowerOff',_keysym2.default.XF86XK_PowerDown);addStandard('PrintScreen',_keysym2.default.XK_Print);addStandard('Hibernate',_keysym2.default.XF86XK_Hibernate);addStandard('Standby',_keysym2.default.XF86XK_Standby);addStandard('WakeUp',_keysym2.default.XF86XK_WakeUp);// 2.8. IME and Composition Keys
addStandard('AllCandidates',_keysym2.default.XK_MultipleCandidate);addStandard('Alphanumeric',_keysym2.default.XK_Eisu_Shift);// could also be _Eisu_Toggle
addStandard('CodeInput',_keysym2.default.XK_Codeinput);addStandard('Compose',_keysym2.default.XK_Multi_key);addStandard('Convert',_keysym2.default.XK_Henkan);// - Dead
// - FinalMode
addStandard('GroupFirst',_keysym2.default.XK_ISO_First_Group);addStandard('GroupLast',_keysym2.default.XK_ISO_Last_Group);addStandard('GroupNext',_keysym2.default.XK_ISO_Next_Group);addStandard('GroupPrevious',_keysym2.default.XK_ISO_Prev_Group);// - ModeChange (XK_Mode_switch is often used for AltGr)
// - NextCandidate
addStandard('NonConvert',_keysym2.default.XK_Muhenkan);addStandard('PreviousCandidate',_keysym2.default.XK_PreviousCandidate);// - Process
addStandard('SingleCandidate',_keysym2.default.XK_SingleCandidate);addStandard('HangulMode',_keysym2.default.XK_Hangul);addStandard('HanjaMode',_keysym2.default.XK_Hangul_Hanja);addStandard('JunjuaMode',_keysym2.default.XK_Hangul_Jeonja);addStandard('Eisu',_keysym2.default.XK_Eisu_toggle);addStandard('Hankaku',_keysym2.default.XK_Hankaku);addStandard('Hiragana',_keysym2.default.XK_Hiragana);addStandard('HiraganaKatakana',_keysym2.default.XK_Hiragana_Katakana);addStandard('KanaMode',_keysym2.default.XK_Kana_Shift);// could also be _Kana_Lock
addStandard('KanjiMode',_keysym2.default.XK_Kanji);addStandard('Katakana',_keysym2.default.XK_Katakana);addStandard('Romaji',_keysym2.default.XK_Romaji);addStandard('Zenkaku',_keysym2.default.XK_Zenkaku);addStandard('ZenkakuHanaku',_keysym2.default.XK_Zenkaku_Hankaku);// 2.9. General-Purpose Function Keys
addStandard('F1',_keysym2.default.XK_F1);addStandard('F2',_keysym2.default.XK_F2);addStandard('F3',_keysym2.default.XK_F3);addStandard('F4',_keysym2.default.XK_F4);addStandard('F5',_keysym2.default.XK_F5);addStandard('F6',_keysym2.default.XK_F6);addStandard('F7',_keysym2.default.XK_F7);addStandard('F8',_keysym2.default.XK_F8);addStandard('F9',_keysym2.default.XK_F9);addStandard('F10',_keysym2.default.XK_F10);addStandard('F11',_keysym2.default.XK_F11);addStandard('F12',_keysym2.default.XK_F12);addStandard('F13',_keysym2.default.XK_F13);addStandard('F14',_keysym2.default.XK_F14);addStandard('F15',_keysym2.default.XK_F15);addStandard('F16',_keysym2.default.XK_F16);addStandard('F17',_keysym2.default.XK_F17);addStandard('F18',_keysym2.default.XK_F18);addStandard('F19',_keysym2.default.XK_F19);addStandard('F20',_keysym2.default.XK_F20);addStandard('F21',_keysym2.default.XK_F21);addStandard('F22',_keysym2.default.XK_F22);addStandard('F23',_keysym2.default.XK_F23);addStandard('F24',_keysym2.default.XK_F24);addStandard('F25',_keysym2.default.XK_F25);addStandard('F26',_keysym2.default.XK_F26);addStandard('F27',_keysym2.default.XK_F27);addStandard('F28',_keysym2.default.XK_F28);addStandard('F29',_keysym2.default.XK_F29);addStandard('F30',_keysym2.default.XK_F30);addStandard('F31',_keysym2.default.XK_F31);addStandard('F32',_keysym2.default.XK_F32);addStandard('F33',_keysym2.default.XK_F33);addStandard('F34',_keysym2.default.XK_F34);addStandard('F35',_keysym2.default.XK_F35);// - Soft1...
// 2.10. Multimedia Keys
// - ChannelDown
// - ChannelUp
addStandard('Close',_keysym2.default.XF86XK_Close);addStandard('MailForward',_keysym2.default.XF86XK_MailForward);addStandard('MailReply',_keysym2.default.XF86XK_Reply);addStandard('MainSend',_keysym2.default.XF86XK_Send);addStandard('MediaFastForward',_keysym2.default.XF86XK_AudioForward);addStandard('MediaPause',_keysym2.default.XF86XK_AudioPause);addStandard('MediaPlay',_keysym2.default.XF86XK_AudioPlay);addStandard('MediaRecord',_keysym2.default.XF86XK_AudioRecord);addStandard('MediaRewind',_keysym2.default.XF86XK_AudioRewind);addStandard('MediaStop',_keysym2.default.XF86XK_AudioStop);addStandard('MediaTrackNext',_keysym2.default.XF86XK_AudioNext);addStandard('MediaTrackPrevious',_keysym2.default.XF86XK_AudioPrev);addStandard('New',_keysym2.default.XF86XK_New);addStandard('Open',_keysym2.default.XF86XK_Open);addStandard('Print',_keysym2.default.XK_Print);addStandard('Save',_keysym2.default.XF86XK_Save);addStandard('SpellCheck',_keysym2.default.XF86XK_Spell);// 2.11. Multimedia Numpad Keys
// - Key11
// - Key12
// 2.12. Audio Keys
// - AudioBalanceLeft
// - AudioBalanceRight
// - AudioBassDown
// - AudioBassBoostDown
// - AudioBassBoostToggle
// - AudioBassBoostUp
// - AudioBassUp
// - AudioFaderFront
// - AudioFaderRear
// - AudioSurroundModeNext
// - AudioTrebleDown
// - AudioTrebleUp
addStandard('AudioVolumeDown',_keysym2.default.XF86XK_AudioLowerVolume);addStandard('AudioVolumeUp',_keysym2.default.XF86XK_AudioRaiseVolume);addStandard('AudioVolumeMute',_keysym2.default.XF86XK_AudioMute);// - MicrophoneToggle
// - MicrophoneVolumeDown
// - MicrophoneVolumeUp
addStandard('MicrophoneVolumeMute',_keysym2.default.XF86XK_AudioMicMute);// 2.13. Speech Keys
// - SpeechCorrectionList
// - SpeechInputToggle
// 2.14. Application Keys
addStandard('LaunchCalculator',_keysym2.default.XF86XK_Calculator);addStandard('LaunchCalendar',_keysym2.default.XF86XK_Calendar);addStandard('LaunchMail',_keysym2.default.XF86XK_Mail);addStandard('LaunchMediaPlayer',_keysym2.default.XF86XK_AudioMedia);addStandard('LaunchMusicPlayer',_keysym2.default.XF86XK_Music);addStandard('LaunchMyComputer',_keysym2.default.XF86XK_MyComputer);addStandard('LaunchPhone',_keysym2.default.XF86XK_Phone);addStandard('LaunchScreenSaver',_keysym2.default.XF86XK_ScreenSaver);addStandard('LaunchSpreadsheet',_keysym2.default.XF86XK_Excel);addStandard('LaunchWebBrowser',_keysym2.default.XF86XK_WWW);addStandard('LaunchWebCam',_keysym2.default.XF86XK_WebCam);addStandard('LaunchWordProcessor',_keysym2.default.XF86XK_Word);// 2.15. Browser Keys
addStandard('BrowserBack',_keysym2.default.XF86XK_Back);addStandard('BrowserFavorites',_keysym2.default.XF86XK_Favorites);addStandard('BrowserForward',_keysym2.default.XF86XK_Forward);addStandard('BrowserHome',_keysym2.default.XF86XK_HomePage);addStandard('BrowserRefresh',_keysym2.default.XF86XK_Refresh);addStandard('BrowserSearch',_keysym2.default.XF86XK_Search);addStandard('BrowserStop',_keysym2.default.XF86XK_Stop);// 2.16. Mobile Phone Keys
// - A whole bunch...
// 2.17. TV Keys
// - A whole bunch...
// 2.18. Media Controller Keys
// - A whole bunch...
addStandard('Dimmer',_keysym2.default.XF86XK_BrightnessAdjust);addStandard('MediaAudioTrack',_keysym2.default.XF86XK_AudioCycleTrack);addStandard('RandomToggle',_keysym2.default.XF86XK_AudioRandomPlay);addStandard('SplitScreenToggle',_keysym2.default.XF86XK_SplitScreen);addStandard('Subtitle',_keysym2.default.XF86XK_Subtitle);addStandard('VideoModeNext',_keysym2.default.XF86XK_Next_VMode);// Extra: Numpad
addNumpad('=',_keysym2.default.XK_equal,_keysym2.default.XK_KP_Equal);addNumpad('+',_keysym2.default.XK_plus,_keysym2.default.XK_KP_Add);addNumpad('-',_keysym2.default.XK_minus,_keysym2.default.XK_KP_Subtract);addNumpad('*',_keysym2.default.XK_asterisk,_keysym2.default.XK_KP_Multiply);addNumpad('/',_keysym2.default.XK_slash,_keysym2.default.XK_KP_Divide);addNumpad('.',_keysym2.default.XK_period,_keysym2.default.XK_KP_Decimal);addNumpad(',',_keysym2.default.XK_comma,_keysym2.default.XK_KP_Separator);addNumpad('0',_keysym2.default.XK_0,_keysym2.default.XK_KP_0);addNumpad('1',_keysym2.default.XK_1,_keysym2.default.XK_KP_1);addNumpad('2',_keysym2.default.XK_2,_keysym2.default.XK_KP_2);addNumpad('3',_keysym2.default.XK_3,_keysym2.default.XK_KP_3);addNumpad('4',_keysym2.default.XK_4,_keysym2.default.XK_KP_4);addNumpad('5',_keysym2.default.XK_5,_keysym2.default.XK_KP_5);addNumpad('6',_keysym2.default.XK_6,_keysym2.default.XK_KP_6);addNumpad('7',_keysym2.default.XK_7,_keysym2.default.XK_KP_7);addNumpad('8',_keysym2.default.XK_8,_keysym2.default.XK_KP_8);addNumpad('9',_keysym2.default.XK_9,_keysym2.default.XK_KP_9);exports.default=DOMKeyTable;'use strict';Object.defineProperty(exports,'__esModule',{value:true});/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2017 Pierre Ossman for Cendio AB
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 *//*
 * Fallback mapping between HTML key codes (physical keys) and
 * HTML key values. This only works for keys that don't vary
 * between layouts. We also omit those who manage fine by mapping the
 * Unicode representation.
 *
 * See https://www.w3.org/TR/uievents-code/ for possible codes.
 * See https://www.w3.org/TR/uievents-key/ for possible values.
 */exports.default={// 3.1.1.1. Writing System Keys
'Backspace':'Backspace',// 3.1.1.2. Functional Keys
'AltLeft':'Alt','AltRight':'Alt',// This could also be 'AltGraph'
'CapsLock':'CapsLock','ContextMenu':'ContextMenu','ControlLeft':'Control','ControlRight':'Control','Enter':'Enter','MetaLeft':'Meta','MetaRight':'Meta','ShiftLeft':'Shift','ShiftRight':'Shift','Tab':'Tab',// FIXME: Japanese/Korean keys
// 3.1.2. Control Pad Section
'Delete':'Delete','End':'End','Help':'Help','Home':'Home','Insert':'Insert','PageDown':'PageDown','PageUp':'PageUp',// 3.1.3. Arrow Pad Section
'ArrowDown':'ArrowDown','ArrowLeft':'ArrowLeft','ArrowRight':'ArrowRight','ArrowUp':'ArrowUp',// 3.1.4. Numpad Section
'NumLock':'NumLock','NumpadBackspace':'Backspace','NumpadClear':'Clear',// 3.1.5. Function Section
'Escape':'Escape','F1':'F1','F2':'F2','F3':'F3','F4':'F4','F5':'F5','F6':'F6','F7':'F7','F8':'F8','F9':'F9','F10':'F10','F11':'F11','F12':'F12','F13':'F13','F14':'F14','F15':'F15','F16':'F16','F17':'F17','F18':'F18','F19':'F19','F20':'F20','F21':'F21','F22':'F22','F23':'F23','F24':'F24','F25':'F25','F26':'F26','F27':'F27','F28':'F28','F29':'F29','F30':'F30','F31':'F31','F32':'F32','F33':'F33','F34':'F34','F35':'F35','PrintScreen':'PrintScreen','ScrollLock':'ScrollLock','Pause':'Pause',// 3.1.6. Media Keys
'BrowserBack':'BrowserBack','BrowserFavorites':'BrowserFavorites','BrowserForward':'BrowserForward','BrowserHome':'BrowserHome','BrowserRefresh':'BrowserRefresh','BrowserSearch':'BrowserSearch','BrowserStop':'BrowserStop','Eject':'Eject','LaunchApp1':'LaunchMyComputer','LaunchApp2':'LaunchCalendar','LaunchMail':'LaunchMail','MediaPlayPause':'MediaPlay','MediaStop':'MediaStop','MediaTrackNext':'MediaTrackNext','MediaTrackPrevious':'MediaTrackPrevious','Power':'Power','Sleep':'Sleep','AudioVolumeDown':'AudioVolumeDown','AudioVolumeMute':'AudioVolumeMute','AudioVolumeUp':'AudioVolumeUp','WakeUp':'WakeUp'};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=Keyboard;var _logging=require('../util/logging.js');var Log=_interopRequireWildcard(_logging);var _events=require('../util/events.js');var _util=require('./util.js');var KeyboardUtil=_interopRequireWildcard(_util);var _keysym=require('./keysym.js');var _keysym2=_interopRequireDefault(_keysym);var _browser=require('../util/browser.js');var browser=_interopRequireWildcard(_browser);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}//
// Keyboard event handler
//
function Keyboard(target){this._target=target||null;this._keyDownList={};// List of depressed keys
// (even if they are happy)
this._pendingKey=null;// Key waiting for keypress
// keep these here so we can refer to them later
this._eventHandlers={'keyup':this._handleKeyUp.bind(this),'keydown':this._handleKeyDown.bind(this),'keypress':this._handleKeyPress.bind(this),'blur':this._allKeysUp.bind(this)}}/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Copyright (C) 2013 Samuel Mannehed for Cendio AB
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 */;Keyboard.prototype={// ===== EVENT HANDLERS =====
onkeyevent:function onkeyevent(){},// Handler for key press/release
// ===== PRIVATE METHODS =====
_sendKeyEvent:function _sendKeyEvent(keysym,code,down){Log.Debug('onkeyevent '+(down?'down':'up')+', keysym: '+keysym,', code: '+code);// Windows sends CtrlLeft+AltRight when you press
// AltGraph, which tends to confuse the hell out of
// remote systems. Fake a release of these keys until
// there is a way to detect AltGraph properly.
var fakeAltGraph=false;if(down&&browser.isWindows()){if(code!=='ControlLeft'&&code!=='AltRight'&&'ControlLeft'in this._keyDownList&&'AltRight'in this._keyDownList){fakeAltGraph=true;this.onkeyevent(this._keyDownList['AltRight'],'AltRight',false);this.onkeyevent(this._keyDownList['ControlLeft'],'ControlLeft',false)}}this.onkeyevent(keysym,code,down);if(fakeAltGraph){this.onkeyevent(this._keyDownList['ControlLeft'],'ControlLeft',true);this.onkeyevent(this._keyDownList['AltRight'],'AltRight',true)}},_getKeyCode:function _getKeyCode(e){var code=KeyboardUtil.getKeycode(e);if(code!=='Unidentified'){return code}// Unstable, but we don't have anything else to go on
// (don't use it for 'keypress' events thought since
// WebKit sets it to the same as charCode)
if(e.keyCode&&e.type!=='keypress'){// 229 is used for composition events
if(e.keyCode!==229){return'Platform'+e.keyCode}}// A precursor to the final DOM3 standard. Unfortunately it
// is not layout independent, so it is as bad as using keyCode
if(e.keyIdentifier){// Non-character key?
if(e.keyIdentifier.substr(0,2)!=='U+'){return e.keyIdentifier}var codepoint=parseInt(e.keyIdentifier.substr(2),16);var char=String.fromCharCode(codepoint);// Some implementations fail to uppercase the symbols
char=char.toUpperCase();return'Platform'+char.charCodeAt()}return'Unidentified'},_handleKeyDown:function _handleKeyDown(e){var code=this._getKeyCode(e);var keysym=KeyboardUtil.getKeysym(e);// We cannot handle keys we cannot track, but we also need
// to deal with virtual keyboards which omit key info
// (iOS omits tracking info on keyup events, which forces us to
// special treat that platform here)
if(code==='Unidentified'||browser.isIOS()){if(keysym){// If it's a virtual keyboard then it should be
// sufficient to just send press and release right
// after each other
this._sendKeyEvent(keysym,code,true);this._sendKeyEvent(keysym,code,false)}(0,_events.stopEvent)(e);return}// Alt behaves more like AltGraph on macOS, so shuffle the
// keys around a bit to make things more sane for the remote
// server. This method is used by RealVNC and TigerVNC (and
// possibly others).
if(browser.isMac()){switch(keysym){case _keysym2.default.XK_Super_L:keysym=_keysym2.default.XK_Alt_L;break;case _keysym2.default.XK_Super_R:keysym=_keysym2.default.XK_Super_L;break;case _keysym2.default.XK_Alt_L:keysym=_keysym2.default.XK_Mode_switch;break;case _keysym2.default.XK_Alt_R:keysym=_keysym2.default.XK_ISO_Level3_Shift;break;}}// Is this key already pressed? If so, then we must use the
// same keysym or we'll confuse the server
if(code in this._keyDownList){keysym=this._keyDownList[code]}// macOS doesn't send proper key events for modifiers, only
// state change events. That gets extra confusing for CapsLock
// which toggles on each press, but not on release. So pretend
// it was a quick press and release of the button.
if(browser.isMac()&&code==='CapsLock'){this._sendKeyEvent(_keysym2.default.XK_Caps_Lock,'CapsLock',true);this._sendKeyEvent(_keysym2.default.XK_Caps_Lock,'CapsLock',false);(0,_events.stopEvent)(e);return}// If this is a legacy browser then we'll need to wait for
// a keypress event as well
// (IE and Edge has a broken KeyboardEvent.key, so we can't
// just check for the presence of that field)
if(!keysym&&(!e.key||browser.isIE()||browser.isEdge())){this._pendingKey=code;// However we might not get a keypress event if the key
// is non-printable, which needs some special fallback
// handling
setTimeout(this._handleKeyPressTimeout.bind(this),10,e);return}this._pendingKey=null;(0,_events.stopEvent)(e);this._keyDownList[code]=keysym;this._sendKeyEvent(keysym,code,true)},// Legacy event for browsers without code/key
_handleKeyPress:function _handleKeyPress(e){(0,_events.stopEvent)(e);// Are we expecting a keypress?
if(this._pendingKey===null){return}var code=this._getKeyCode(e);var keysym=KeyboardUtil.getKeysym(e);// The key we were waiting for?
if(code!=='Unidentified'&&code!=this._pendingKey){return}code=this._pendingKey;this._pendingKey=null;if(!keysym){Log.Info('keypress with no keysym:',e);return}this._keyDownList[code]=keysym;this._sendKeyEvent(keysym,code,true)},_handleKeyPressTimeout:function _handleKeyPressTimeout(e){// Did someone manage to sort out the key already?
if(this._pendingKey===null){return}var code,keysym;code=this._pendingKey;this._pendingKey=null;// We have no way of knowing the proper keysym with the
// information given, but the following are true for most
// layouts
if(e.keyCode>=48&&e.keyCode<=57){// Digit
keysym=e.keyCode}else if(e.keyCode>=65&&e.keyCode<=90){// Character (A-Z)
var char=String.fromCharCode(e.keyCode);// A feeble attempt at the correct case
if(e.shiftKey)char=char.toUpperCase();else char=char.toLowerCase();keysym=char.charCodeAt()}else{// Unknown, give up
keysym=0}this._keyDownList[code]=keysym;this._sendKeyEvent(keysym,code,true)},_handleKeyUp:function _handleKeyUp(e){(0,_events.stopEvent)(e);var code=this._getKeyCode(e);// See comment in _handleKeyDown()
if(browser.isMac()&&code==='CapsLock'){this._sendKeyEvent(_keysym2.default.XK_Caps_Lock,'CapsLock',true);this._sendKeyEvent(_keysym2.default.XK_Caps_Lock,'CapsLock',false);return}// Do we really think this key is down?
if(!(code in this._keyDownList)){return}this._sendKeyEvent(this._keyDownList[code],code,false);delete this._keyDownList[code]},_allKeysUp:function _allKeysUp(){Log.Debug('>> Keyboard.allKeysUp');for(var code in this._keyDownList){this._sendKeyEvent(this._keyDownList[code],code,false)};this._keyDownList={};Log.Debug('<< Keyboard.allKeysUp')},// ===== PUBLIC METHODS =====
grab:function grab(){//Log.Debug(">> Keyboard.grab");
var c=this._target;c.addEventListener('keydown',this._eventHandlers.keydown);c.addEventListener('keyup',this._eventHandlers.keyup);c.addEventListener('keypress',this._eventHandlers.keypress);// Release (key up) if window loses focus
window.addEventListener('blur',this._eventHandlers.blur);//Log.Debug("<< Keyboard.grab");
},ungrab:function ungrab(){//Log.Debug(">> Keyboard.ungrab");
var c=this._target;c.removeEventListener('keydown',this._eventHandlers.keydown);c.removeEventListener('keyup',this._eventHandlers.keyup);c.removeEventListener('keypress',this._eventHandlers.keypress);window.removeEventListener('blur',this._eventHandlers.blur);// Release (key up) all keys that are in a down state
this._allKeysUp();//Log.Debug(">> Keyboard.ungrab");
}};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default={XK_VoidSymbol:16777215,/* Void symbol */XK_BackSpace:65288,/* Back space, back char */XK_Tab:65289,XK_Linefeed:65290,/* Linefeed, LF */XK_Clear:65291,XK_Return:65293,/* Return, enter */XK_Pause:65299,/* Pause, hold */XK_Scroll_Lock:65300,XK_Sys_Req:65301,XK_Escape:65307,XK_Delete:65535,/* Delete, rubout *//* International & multi-key character composition */XK_Multi_key:65312,/* Multi-key character compose */XK_Codeinput:65335,XK_SingleCandidate:65340,XK_MultipleCandidate:65341,XK_PreviousCandidate:65342,/* Japanese keyboard support */XK_Kanji:65313,/* Kanji, Kanji convert */XK_Muhenkan:65314,/* Cancel Conversion */XK_Henkan_Mode:65315,/* Start/Stop Conversion */XK_Henkan:65315,/* Alias for Henkan_Mode */XK_Romaji:65316,/* to Romaji */XK_Hiragana:65317,/* to Hiragana */XK_Katakana:65318,/* to Katakana */XK_Hiragana_Katakana:65319,/* Hiragana/Katakana toggle */XK_Zenkaku:65320,/* to Zenkaku */XK_Hankaku:65321,/* to Hankaku */XK_Zenkaku_Hankaku:65322,/* Zenkaku/Hankaku toggle */XK_Touroku:65323,/* Add to Dictionary */XK_Massyo:65324,/* Delete from Dictionary */XK_Kana_Lock:65325,/* Kana Lock */XK_Kana_Shift:65326,/* Kana Shift */XK_Eisu_Shift:65327,/* Alphanumeric Shift */XK_Eisu_toggle:65328,/* Alphanumeric toggle */XK_Kanji_Bangou:65335,/* Codeinput */XK_Zen_Koho:65341,/* Multiple/All Candidate(s) */XK_Mae_Koho:65342,/* Previous Candidate *//* Cursor control & motion */XK_Home:65360,XK_Left:65361,/* Move left, left arrow */XK_Up:65362,/* Move up, up arrow */XK_Right:65363,/* Move right, right arrow */XK_Down:65364,/* Move down, down arrow */XK_Prior:65365,/* Prior, previous */XK_Page_Up:65365,XK_Next:65366,/* Next */XK_Page_Down:65366,XK_End:65367,/* EOL */XK_Begin:65368,/* BOL *//* Misc functions */XK_Select:65376,/* Select, mark */XK_Print:65377,XK_Execute:65378,/* Execute, run, do */XK_Insert:65379,/* Insert, insert here */XK_Undo:65381,XK_Redo:65382,/* Redo, again */XK_Menu:65383,XK_Find:65384,/* Find, search */XK_Cancel:65385,/* Cancel, stop, abort, exit */XK_Help:65386,/* Help */XK_Break:65387,XK_Mode_switch:65406,/* Character set switch */XK_script_switch:65406,/* Alias for mode_switch */XK_Num_Lock:65407,/* Keypad functions, keypad numbers cleverly chosen to map to ASCII */XK_KP_Space:65408,/* Space */XK_KP_Tab:65417,XK_KP_Enter:65421,/* Enter */XK_KP_F1:65425,/* PF1, KP_A, ... */XK_KP_F2:65426,XK_KP_F3:65427,XK_KP_F4:65428,XK_KP_Home:65429,XK_KP_Left:65430,XK_KP_Up:65431,XK_KP_Right:65432,XK_KP_Down:65433,XK_KP_Prior:65434,XK_KP_Page_Up:65434,XK_KP_Next:65435,XK_KP_Page_Down:65435,XK_KP_End:65436,XK_KP_Begin:65437,XK_KP_Insert:65438,XK_KP_Delete:65439,XK_KP_Equal:65469,/* Equals */XK_KP_Multiply:65450,XK_KP_Add:65451,XK_KP_Separator:65452,/* Separator, often comma */XK_KP_Subtract:65453,XK_KP_Decimal:65454,XK_KP_Divide:65455,XK_KP_0:65456,XK_KP_1:65457,XK_KP_2:65458,XK_KP_3:65459,XK_KP_4:65460,XK_KP_5:65461,XK_KP_6:65462,XK_KP_7:65463,XK_KP_8:65464,XK_KP_9:65465,/*
     * Auxiliary functions; note the duplicate definitions for left and right
     * function keys;  Sun keyboards and a few other manufacturers have such
     * function key groups on the left and/or right sides of the keyboard.
     * We've not found a keyboard with more than 35 function keys total.
     */XK_F1:65470,XK_F2:65471,XK_F3:65472,XK_F4:65473,XK_F5:65474,XK_F6:65475,XK_F7:65476,XK_F8:65477,XK_F9:65478,XK_F10:65479,XK_F11:65480,XK_L1:65480,XK_F12:65481,XK_L2:65481,XK_F13:65482,XK_L3:65482,XK_F14:65483,XK_L4:65483,XK_F15:65484,XK_L5:65484,XK_F16:65485,XK_L6:65485,XK_F17:65486,XK_L7:65486,XK_F18:65487,XK_L8:65487,XK_F19:65488,XK_L9:65488,XK_F20:65489,XK_L10:65489,XK_F21:65490,XK_R1:65490,XK_F22:65491,XK_R2:65491,XK_F23:65492,XK_R3:65492,XK_F24:65493,XK_R4:65493,XK_F25:65494,XK_R5:65494,XK_F26:65495,XK_R6:65495,XK_F27:65496,XK_R7:65496,XK_F28:65497,XK_R8:65497,XK_F29:65498,XK_R9:65498,XK_F30:65499,XK_R10:65499,XK_F31:65500,XK_R11:65500,XK_F32:65501,XK_R12:65501,XK_F33:65502,XK_R13:65502,XK_F34:65503,XK_R14:65503,XK_F35:65504,XK_R15:65504,/* Modifiers */XK_Shift_L:65505,/* Left shift */XK_Shift_R:65506,/* Right shift */XK_Control_L:65507,/* Left control */XK_Control_R:65508,/* Right control */XK_Caps_Lock:65509,/* Caps lock */XK_Shift_Lock:65510,/* Shift lock */XK_Meta_L:65511,/* Left meta */XK_Meta_R:65512,/* Right meta */XK_Alt_L:65513,/* Left alt */XK_Alt_R:65514,/* Right alt */XK_Super_L:65515,/* Left super */XK_Super_R:65516,/* Right super */XK_Hyper_L:65517,/* Left hyper */XK_Hyper_R:65518,/* Right hyper *//*
     * Keyboard (XKB) Extension function and modifier keys
     * (from Appendix C of "The X Keyboard Extension: Protocol Specification")
     * Byte 3 = 0xfe
     */XK_ISO_Level3_Shift:65027,/* AltGr */XK_ISO_Next_Group:65032,XK_ISO_Prev_Group:65034,XK_ISO_First_Group:65036,XK_ISO_Last_Group:65038,/*
     * Latin 1
     * (ISO/IEC 8859-1: Unicode U+0020..U+00FF)
     * Byte 3: 0
     */XK_space:32,/* U+0020 SPACE */XK_exclam:33,/* U+0021 EXCLAMATION MARK */XK_quotedbl:34,/* U+0022 QUOTATION MARK */XK_numbersign:35,/* U+0023 NUMBER SIGN */XK_dollar:36,/* U+0024 DOLLAR SIGN */XK_percent:37,/* U+0025 PERCENT SIGN */XK_ampersand:38,/* U+0026 AMPERSAND */XK_apostrophe:39,/* U+0027 APOSTROPHE */XK_quoteright:39,/* deprecated */XK_parenleft:40,/* U+0028 LEFT PARENTHESIS */XK_parenright:41,/* U+0029 RIGHT PARENTHESIS */XK_asterisk:42,/* U+002A ASTERISK */XK_plus:43,/* U+002B PLUS SIGN */XK_comma:44,/* U+002C COMMA */XK_minus:45,/* U+002D HYPHEN-MINUS */XK_period:46,/* U+002E FULL STOP */XK_slash:47,/* U+002F SOLIDUS */XK_0:48,/* U+0030 DIGIT ZERO */XK_1:49,/* U+0031 DIGIT ONE */XK_2:50,/* U+0032 DIGIT TWO */XK_3:51,/* U+0033 DIGIT THREE */XK_4:52,/* U+0034 DIGIT FOUR */XK_5:53,/* U+0035 DIGIT FIVE */XK_6:54,/* U+0036 DIGIT SIX */XK_7:55,/* U+0037 DIGIT SEVEN */XK_8:56,/* U+0038 DIGIT EIGHT */XK_9:57,/* U+0039 DIGIT NINE */XK_colon:58,/* U+003A COLON */XK_semicolon:59,/* U+003B SEMICOLON */XK_less:60,/* U+003C LESS-THAN SIGN */XK_equal:61,/* U+003D EQUALS SIGN */XK_greater:62,/* U+003E GREATER-THAN SIGN */XK_question:63,/* U+003F QUESTION MARK */XK_at:64,/* U+0040 COMMERCIAL AT */XK_A:65,/* U+0041 LATIN CAPITAL LETTER A */XK_B:66,/* U+0042 LATIN CAPITAL LETTER B */XK_C:67,/* U+0043 LATIN CAPITAL LETTER C */XK_D:68,/* U+0044 LATIN CAPITAL LETTER D */XK_E:69,/* U+0045 LATIN CAPITAL LETTER E */XK_F:70,/* U+0046 LATIN CAPITAL LETTER F */XK_G:71,/* U+0047 LATIN CAPITAL LETTER G */XK_H:72,/* U+0048 LATIN CAPITAL LETTER H */XK_I:73,/* U+0049 LATIN CAPITAL LETTER I */XK_J:74,/* U+004A LATIN CAPITAL LETTER J */XK_K:75,/* U+004B LATIN CAPITAL LETTER K */XK_L:76,/* U+004C LATIN CAPITAL LETTER L */XK_M:77,/* U+004D LATIN CAPITAL LETTER M */XK_N:78,/* U+004E LATIN CAPITAL LETTER N */XK_O:79,/* U+004F LATIN CAPITAL LETTER O */XK_P:80,/* U+0050 LATIN CAPITAL LETTER P */XK_Q:81,/* U+0051 LATIN CAPITAL LETTER Q */XK_R:82,/* U+0052 LATIN CAPITAL LETTER R */XK_S:83,/* U+0053 LATIN CAPITAL LETTER S */XK_T:84,/* U+0054 LATIN CAPITAL LETTER T */XK_U:85,/* U+0055 LATIN CAPITAL LETTER U */XK_V:86,/* U+0056 LATIN CAPITAL LETTER V */XK_W:87,/* U+0057 LATIN CAPITAL LETTER W */XK_X:88,/* U+0058 LATIN CAPITAL LETTER X */XK_Y:89,/* U+0059 LATIN CAPITAL LETTER Y */XK_Z:90,/* U+005A LATIN CAPITAL LETTER Z */XK_bracketleft:91,/* U+005B LEFT SQUARE BRACKET */XK_backslash:92,/* U+005C REVERSE SOLIDUS */XK_bracketright:93,/* U+005D RIGHT SQUARE BRACKET */XK_asciicircum:94,/* U+005E CIRCUMFLEX ACCENT */XK_underscore:95,/* U+005F LOW LINE */XK_grave:96,/* U+0060 GRAVE ACCENT */XK_quoteleft:96,/* deprecated */XK_a:97,/* U+0061 LATIN SMALL LETTER A */XK_b:98,/* U+0062 LATIN SMALL LETTER B */XK_c:99,/* U+0063 LATIN SMALL LETTER C */XK_d:100,/* U+0064 LATIN SMALL LETTER D */XK_e:101,/* U+0065 LATIN SMALL LETTER E */XK_f:102,/* U+0066 LATIN SMALL LETTER F */XK_g:103,/* U+0067 LATIN SMALL LETTER G */XK_h:104,/* U+0068 LATIN SMALL LETTER H */XK_i:105,/* U+0069 LATIN SMALL LETTER I */XK_j:106,/* U+006A LATIN SMALL LETTER J */XK_k:107,/* U+006B LATIN SMALL LETTER K */XK_l:108,/* U+006C LATIN SMALL LETTER L */XK_m:109,/* U+006D LATIN SMALL LETTER M */XK_n:110,/* U+006E LATIN SMALL LETTER N */XK_o:111,/* U+006F LATIN SMALL LETTER O */XK_p:112,/* U+0070 LATIN SMALL LETTER P */XK_q:113,/* U+0071 LATIN SMALL LETTER Q */XK_r:114,/* U+0072 LATIN SMALL LETTER R */XK_s:115,/* U+0073 LATIN SMALL LETTER S */XK_t:116,/* U+0074 LATIN SMALL LETTER T */XK_u:117,/* U+0075 LATIN SMALL LETTER U */XK_v:118,/* U+0076 LATIN SMALL LETTER V */XK_w:119,/* U+0077 LATIN SMALL LETTER W */XK_x:120,/* U+0078 LATIN SMALL LETTER X */XK_y:121,/* U+0079 LATIN SMALL LETTER Y */XK_z:122,/* U+007A LATIN SMALL LETTER Z */XK_braceleft:123,/* U+007B LEFT CURLY BRACKET */XK_bar:124,/* U+007C VERTICAL LINE */XK_braceright:125,/* U+007D RIGHT CURLY BRACKET */XK_asciitilde:126,/* U+007E TILDE */XK_nobreakspace:160,/* U+00A0 NO-BREAK SPACE */XK_exclamdown:161,/* U+00A1 INVERTED EXCLAMATION MARK */XK_cent:162,/* U+00A2 CENT SIGN */XK_sterling:163,/* U+00A3 POUND SIGN */XK_currency:164,/* U+00A4 CURRENCY SIGN */XK_yen:165,/* U+00A5 YEN SIGN */XK_brokenbar:166,/* U+00A6 BROKEN BAR */XK_section:167,/* U+00A7 SECTION SIGN */XK_diaeresis:168,/* U+00A8 DIAERESIS */XK_copyright:169,/* U+00A9 COPYRIGHT SIGN */XK_ordfeminine:170,/* U+00AA FEMININE ORDINAL INDICATOR */XK_guillemotleft:171,/* U+00AB LEFT-POINTING DOUBLE ANGLE QUOTATION MARK */XK_notsign:172,/* U+00AC NOT SIGN */XK_hyphen:173,/* U+00AD SOFT HYPHEN */XK_registered:174,/* U+00AE REGISTERED SIGN */XK_macron:175,/* U+00AF MACRON */XK_degree:176,/* U+00B0 DEGREE SIGN */XK_plusminus:177,/* U+00B1 PLUS-MINUS SIGN */XK_twosuperior:178,/* U+00B2 SUPERSCRIPT TWO */XK_threesuperior:179,/* U+00B3 SUPERSCRIPT THREE */XK_acute:180,/* U+00B4 ACUTE ACCENT */XK_mu:181,/* U+00B5 MICRO SIGN */XK_paragraph:182,/* U+00B6 PILCROW SIGN */XK_periodcentered:183,/* U+00B7 MIDDLE DOT */XK_cedilla:184,/* U+00B8 CEDILLA */XK_onesuperior:185,/* U+00B9 SUPERSCRIPT ONE */XK_masculine:186,/* U+00BA MASCULINE ORDINAL INDICATOR */XK_guillemotright:187,/* U+00BB RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK */XK_onequarter:188,/* U+00BC VULGAR FRACTION ONE QUARTER */XK_onehalf:189,/* U+00BD VULGAR FRACTION ONE HALF */XK_threequarters:190,/* U+00BE VULGAR FRACTION THREE QUARTERS */XK_questiondown:191,/* U+00BF INVERTED QUESTION MARK */XK_Agrave:192,/* U+00C0 LATIN CAPITAL LETTER A WITH GRAVE */XK_Aacute:193,/* U+00C1 LATIN CAPITAL LETTER A WITH ACUTE */XK_Acircumflex:194,/* U+00C2 LATIN CAPITAL LETTER A WITH CIRCUMFLEX */XK_Atilde:195,/* U+00C3 LATIN CAPITAL LETTER A WITH TILDE */XK_Adiaeresis:196,/* U+00C4 LATIN CAPITAL LETTER A WITH DIAERESIS */XK_Aring:197,/* U+00C5 LATIN CAPITAL LETTER A WITH RING ABOVE */XK_AE:198,/* U+00C6 LATIN CAPITAL LETTER AE */XK_Ccedilla:199,/* U+00C7 LATIN CAPITAL LETTER C WITH CEDILLA */XK_Egrave:200,/* U+00C8 LATIN CAPITAL LETTER E WITH GRAVE */XK_Eacute:201,/* U+00C9 LATIN CAPITAL LETTER E WITH ACUTE */XK_Ecircumflex:202,/* U+00CA LATIN CAPITAL LETTER E WITH CIRCUMFLEX */XK_Ediaeresis:203,/* U+00CB LATIN CAPITAL LETTER E WITH DIAERESIS */XK_Igrave:204,/* U+00CC LATIN CAPITAL LETTER I WITH GRAVE */XK_Iacute:205,/* U+00CD LATIN CAPITAL LETTER I WITH ACUTE */XK_Icircumflex:206,/* U+00CE LATIN CAPITAL LETTER I WITH CIRCUMFLEX */XK_Idiaeresis:207,/* U+00CF LATIN CAPITAL LETTER I WITH DIAERESIS */XK_ETH:208,/* U+00D0 LATIN CAPITAL LETTER ETH */XK_Eth:208,/* deprecated */XK_Ntilde:209,/* U+00D1 LATIN CAPITAL LETTER N WITH TILDE */XK_Ograve:210,/* U+00D2 LATIN CAPITAL LETTER O WITH GRAVE */XK_Oacute:211,/* U+00D3 LATIN CAPITAL LETTER O WITH ACUTE */XK_Ocircumflex:212,/* U+00D4 LATIN CAPITAL LETTER O WITH CIRCUMFLEX */XK_Otilde:213,/* U+00D5 LATIN CAPITAL LETTER O WITH TILDE */XK_Odiaeresis:214,/* U+00D6 LATIN CAPITAL LETTER O WITH DIAERESIS */XK_multiply:215,/* U+00D7 MULTIPLICATION SIGN */XK_Oslash:216,/* U+00D8 LATIN CAPITAL LETTER O WITH STROKE */XK_Ooblique:216,/* U+00D8 LATIN CAPITAL LETTER O WITH STROKE */XK_Ugrave:217,/* U+00D9 LATIN CAPITAL LETTER U WITH GRAVE */XK_Uacute:218,/* U+00DA LATIN CAPITAL LETTER U WITH ACUTE */XK_Ucircumflex:219,/* U+00DB LATIN CAPITAL LETTER U WITH CIRCUMFLEX */XK_Udiaeresis:220,/* U+00DC LATIN CAPITAL LETTER U WITH DIAERESIS */XK_Yacute:221,/* U+00DD LATIN CAPITAL LETTER Y WITH ACUTE */XK_THORN:222,/* U+00DE LATIN CAPITAL LETTER THORN */XK_Thorn:222,/* deprecated */XK_ssharp:223,/* U+00DF LATIN SMALL LETTER SHARP S */XK_agrave:224,/* U+00E0 LATIN SMALL LETTER A WITH GRAVE */XK_aacute:225,/* U+00E1 LATIN SMALL LETTER A WITH ACUTE */XK_acircumflex:226,/* U+00E2 LATIN SMALL LETTER A WITH CIRCUMFLEX */XK_atilde:227,/* U+00E3 LATIN SMALL LETTER A WITH TILDE */XK_adiaeresis:228,/* U+00E4 LATIN SMALL LETTER A WITH DIAERESIS */XK_aring:229,/* U+00E5 LATIN SMALL LETTER A WITH RING ABOVE */XK_ae:230,/* U+00E6 LATIN SMALL LETTER AE */XK_ccedilla:231,/* U+00E7 LATIN SMALL LETTER C WITH CEDILLA */XK_egrave:232,/* U+00E8 LATIN SMALL LETTER E WITH GRAVE */XK_eacute:233,/* U+00E9 LATIN SMALL LETTER E WITH ACUTE */XK_ecircumflex:234,/* U+00EA LATIN SMALL LETTER E WITH CIRCUMFLEX */XK_ediaeresis:235,/* U+00EB LATIN SMALL LETTER E WITH DIAERESIS */XK_igrave:236,/* U+00EC LATIN SMALL LETTER I WITH GRAVE */XK_iacute:237,/* U+00ED LATIN SMALL LETTER I WITH ACUTE */XK_icircumflex:238,/* U+00EE LATIN SMALL LETTER I WITH CIRCUMFLEX */XK_idiaeresis:239,/* U+00EF LATIN SMALL LETTER I WITH DIAERESIS */XK_eth:240,/* U+00F0 LATIN SMALL LETTER ETH */XK_ntilde:241,/* U+00F1 LATIN SMALL LETTER N WITH TILDE */XK_ograve:242,/* U+00F2 LATIN SMALL LETTER O WITH GRAVE */XK_oacute:243,/* U+00F3 LATIN SMALL LETTER O WITH ACUTE */XK_ocircumflex:244,/* U+00F4 LATIN SMALL LETTER O WITH CIRCUMFLEX */XK_otilde:245,/* U+00F5 LATIN SMALL LETTER O WITH TILDE */XK_odiaeresis:246,/* U+00F6 LATIN SMALL LETTER O WITH DIAERESIS */XK_division:247,/* U+00F7 DIVISION SIGN */XK_oslash:248,/* U+00F8 LATIN SMALL LETTER O WITH STROKE */XK_ooblique:248,/* U+00F8 LATIN SMALL LETTER O WITH STROKE */XK_ugrave:249,/* U+00F9 LATIN SMALL LETTER U WITH GRAVE */XK_uacute:250,/* U+00FA LATIN SMALL LETTER U WITH ACUTE */XK_ucircumflex:251,/* U+00FB LATIN SMALL LETTER U WITH CIRCUMFLEX */XK_udiaeresis:252,/* U+00FC LATIN SMALL LETTER U WITH DIAERESIS */XK_yacute:253,/* U+00FD LATIN SMALL LETTER Y WITH ACUTE */XK_thorn:254,/* U+00FE LATIN SMALL LETTER THORN */XK_ydiaeresis:255,/* U+00FF LATIN SMALL LETTER Y WITH DIAERESIS *//*
     * Korean
     * Byte 3 = 0x0e
     */XK_Hangul:65329,/* Hangul start/stop(toggle) */XK_Hangul_Hanja:65332,/* Start Hangul->Hanja Conversion */XK_Hangul_Jeonja:65336,/* Jeonja mode *//*
     * XFree86 vendor specific keysyms.
     *
     * The XFree86 keysym range is 0x10080001 - 0x1008FFFF.
     */XF86XK_ModeLock:269025025,XF86XK_MonBrightnessUp:269025026,XF86XK_MonBrightnessDown:269025027,XF86XK_KbdLightOnOff:269025028,XF86XK_KbdBrightnessUp:269025029,XF86XK_KbdBrightnessDown:269025030,XF86XK_Standby:269025040,XF86XK_AudioLowerVolume:269025041,XF86XK_AudioMute:269025042,XF86XK_AudioRaiseVolume:269025043,XF86XK_AudioPlay:269025044,XF86XK_AudioStop:269025045,XF86XK_AudioPrev:269025046,XF86XK_AudioNext:269025047,XF86XK_HomePage:269025048,XF86XK_Mail:269025049,XF86XK_Start:269025050,XF86XK_Search:269025051,XF86XK_AudioRecord:269025052,XF86XK_Calculator:269025053,XF86XK_Memo:269025054,XF86XK_ToDoList:269025055,XF86XK_Calendar:269025056,XF86XK_PowerDown:269025057,XF86XK_ContrastAdjust:269025058,XF86XK_RockerUp:269025059,XF86XK_RockerDown:269025060,XF86XK_RockerEnter:269025061,XF86XK_Back:269025062,XF86XK_Forward:269025063,XF86XK_Stop:269025064,XF86XK_Refresh:269025065,XF86XK_PowerOff:269025066,XF86XK_WakeUp:269025067,XF86XK_Eject:269025068,XF86XK_ScreenSaver:269025069,XF86XK_WWW:269025070,XF86XK_Sleep:269025071,XF86XK_Favorites:269025072,XF86XK_AudioPause:269025073,XF86XK_AudioMedia:269025074,XF86XK_MyComputer:269025075,XF86XK_VendorHome:269025076,XF86XK_LightBulb:269025077,XF86XK_Shop:269025078,XF86XK_History:269025079,XF86XK_OpenURL:269025080,XF86XK_AddFavorite:269025081,XF86XK_HotLinks:269025082,XF86XK_BrightnessAdjust:269025083,XF86XK_Finance:269025084,XF86XK_Community:269025085,XF86XK_AudioRewind:269025086,XF86XK_BackForward:269025087,XF86XK_Launch0:269025088,XF86XK_Launch1:269025089,XF86XK_Launch2:269025090,XF86XK_Launch3:269025091,XF86XK_Launch4:269025092,XF86XK_Launch5:269025093,XF86XK_Launch6:269025094,XF86XK_Launch7:269025095,XF86XK_Launch8:269025096,XF86XK_Launch9:269025097,XF86XK_LaunchA:269025098,XF86XK_LaunchB:269025099,XF86XK_LaunchC:269025100,XF86XK_LaunchD:269025101,XF86XK_LaunchE:269025102,XF86XK_LaunchF:269025103,XF86XK_ApplicationLeft:269025104,XF86XK_ApplicationRight:269025105,XF86XK_Book:269025106,XF86XK_CD:269025107,XF86XK_Calculater:269025108,XF86XK_Clear:269025109,XF86XK_Close:269025110,XF86XK_Copy:269025111,XF86XK_Cut:269025112,XF86XK_Display:269025113,XF86XK_DOS:269025114,XF86XK_Documents:269025115,XF86XK_Excel:269025116,XF86XK_Explorer:269025117,XF86XK_Game:269025118,XF86XK_Go:269025119,XF86XK_iTouch:269025120,XF86XK_LogOff:269025121,XF86XK_Market:269025122,XF86XK_Meeting:269025123,XF86XK_MenuKB:269025125,XF86XK_MenuPB:269025126,XF86XK_MySites:269025127,XF86XK_New:269025128,XF86XK_News:269025129,XF86XK_OfficeHome:269025130,XF86XK_Open:269025131,XF86XK_Option:269025132,XF86XK_Paste:269025133,XF86XK_Phone:269025134,XF86XK_Q:269025136,XF86XK_Reply:269025138,XF86XK_Reload:269025139,XF86XK_RotateWindows:269025140,XF86XK_RotationPB:269025141,XF86XK_RotationKB:269025142,XF86XK_Save:269025143,XF86XK_ScrollUp:269025144,XF86XK_ScrollDown:269025145,XF86XK_ScrollClick:269025146,XF86XK_Send:269025147,XF86XK_Spell:269025148,XF86XK_SplitScreen:269025149,XF86XK_Support:269025150,XF86XK_TaskPane:269025151,XF86XK_Terminal:269025152,XF86XK_Tools:269025153,XF86XK_Travel:269025154,XF86XK_UserPB:269025156,XF86XK_User1KB:269025157,XF86XK_User2KB:269025158,XF86XK_Video:269025159,XF86XK_WheelButton:269025160,XF86XK_Word:269025161,XF86XK_Xfer:269025162,XF86XK_ZoomIn:269025163,XF86XK_ZoomOut:269025164,XF86XK_Away:269025165,XF86XK_Messenger:269025166,XF86XK_WebCam:269025167,XF86XK_MailForward:269025168,XF86XK_Pictures:269025169,XF86XK_Music:269025170,XF86XK_Battery:269025171,XF86XK_Bluetooth:269025172,XF86XK_WLAN:269025173,XF86XK_UWB:269025174,XF86XK_AudioForward:269025175,XF86XK_AudioRepeat:269025176,XF86XK_AudioRandomPlay:269025177,XF86XK_Subtitle:269025178,XF86XK_AudioCycleTrack:269025179,XF86XK_CycleAngle:269025180,XF86XK_FrameBack:269025181,XF86XK_FrameForward:269025182,XF86XK_Time:269025183,XF86XK_Select:269025184,XF86XK_View:269025185,XF86XK_TopMenu:269025186,XF86XK_Red:269025187,XF86XK_Green:269025188,XF86XK_Yellow:269025189,XF86XK_Blue:269025190,XF86XK_Suspend:269025191,XF86XK_Hibernate:269025192,XF86XK_TouchpadToggle:269025193,XF86XK_TouchpadOn:269025200,XF86XK_TouchpadOff:269025201,XF86XK_AudioMicMute:269025202,XF86XK_Switch_VT_1:269024769,XF86XK_Switch_VT_2:269024770,XF86XK_Switch_VT_3:269024771,XF86XK_Switch_VT_4:269024772,XF86XK_Switch_VT_5:269024773,XF86XK_Switch_VT_6:269024774,XF86XK_Switch_VT_7:269024775,XF86XK_Switch_VT_8:269024776,XF86XK_Switch_VT_9:269024777,XF86XK_Switch_VT_10:269024778,XF86XK_Switch_VT_11:269024779,XF86XK_Switch_VT_12:269024780,XF86XK_Ungrab:269024800,XF86XK_ClearGrab:269024801,XF86XK_Next_VMode:269024802,XF86XK_Prev_VMode:269024803,XF86XK_LogWindowTree:269024804,XF86XK_LogGrabInfo:269024805};'use strict';Object.defineProperty(exports,'__esModule',{value:true});/*
 * Mapping from Unicode codepoints to X11/RFB keysyms
 *
 * This file was automatically generated from keysymdef.h
 * DO NOT EDIT!
 *//* Functions at the bottom */var codepoints={256:960,// XK_Amacron
257:992,// XK_amacron
258:451,// XK_Abreve
259:483,// XK_abreve
260:417,// XK_Aogonek
261:433,// XK_aogonek
262:454,// XK_Cacute
263:486,// XK_cacute
264:710,// XK_Ccircumflex
265:742,// XK_ccircumflex
266:709,// XK_Cabovedot
267:741,// XK_cabovedot
268:456,// XK_Ccaron
269:488,// XK_ccaron
270:463,// XK_Dcaron
271:495,// XK_dcaron
272:464,// XK_Dstroke
273:496,// XK_dstroke
274:938,// XK_Emacron
275:954,// XK_emacron
278:972,// XK_Eabovedot
279:1004,// XK_eabovedot
280:458,// XK_Eogonek
281:490,// XK_eogonek
282:460,// XK_Ecaron
283:492,// XK_ecaron
284:728,// XK_Gcircumflex
285:760,// XK_gcircumflex
286:683,// XK_Gbreve
287:699,// XK_gbreve
288:725,// XK_Gabovedot
289:757,// XK_gabovedot
290:939,// XK_Gcedilla
291:955,// XK_gcedilla
292:678,// XK_Hcircumflex
293:694,// XK_hcircumflex
294:673,// XK_Hstroke
295:689,// XK_hstroke
296:933,// XK_Itilde
297:949,// XK_itilde
298:975,// XK_Imacron
299:1007,// XK_imacron
302:967,// XK_Iogonek
303:999,// XK_iogonek
304:681,// XK_Iabovedot
305:697,// XK_idotless
308:684,// XK_Jcircumflex
309:700,// XK_jcircumflex
310:979,// XK_Kcedilla
311:1011,// XK_kcedilla
312:930,// XK_kra
313:453,// XK_Lacute
314:485,// XK_lacute
315:934,// XK_Lcedilla
316:950,// XK_lcedilla
317:421,// XK_Lcaron
318:437,// XK_lcaron
321:419,// XK_Lstroke
322:435,// XK_lstroke
323:465,// XK_Nacute
324:497,// XK_nacute
325:977,// XK_Ncedilla
326:1009,// XK_ncedilla
327:466,// XK_Ncaron
328:498,// XK_ncaron
330:957,// XK_ENG
331:959,// XK_eng
332:978,// XK_Omacron
333:1010,// XK_omacron
336:469,// XK_Odoubleacute
337:501,// XK_odoubleacute
338:5052,// XK_OE
339:5053,// XK_oe
340:448,// XK_Racute
341:480,// XK_racute
342:931,// XK_Rcedilla
343:947,// XK_rcedilla
344:472,// XK_Rcaron
345:504,// XK_rcaron
346:422,// XK_Sacute
347:438,// XK_sacute
348:734,// XK_Scircumflex
349:766,// XK_scircumflex
350:426,// XK_Scedilla
351:442,// XK_scedilla
352:425,// XK_Scaron
353:441,// XK_scaron
354:478,// XK_Tcedilla
355:510,// XK_tcedilla
356:427,// XK_Tcaron
357:443,// XK_tcaron
358:940,// XK_Tslash
359:956,// XK_tslash
360:989,// XK_Utilde
361:1021,// XK_utilde
362:990,// XK_Umacron
363:1022,// XK_umacron
364:733,// XK_Ubreve
365:765,// XK_ubreve
366:473,// XK_Uring
367:505,// XK_uring
368:475,// XK_Udoubleacute
369:507,// XK_udoubleacute
370:985,// XK_Uogonek
371:1017,// XK_uogonek
376:5054,// XK_Ydiaeresis
377:428,// XK_Zacute
378:444,// XK_zacute
379:431,// XK_Zabovedot
380:447,// XK_zabovedot
381:430,// XK_Zcaron
382:446,// XK_zcaron
402:2294,// XK_function
466:16777681,// XK_Ocaron
711:439,// XK_caron
728:418,// XK_breve
729:511,// XK_abovedot
731:434,// XK_ogonek
733:445,// XK_doubleacute
901:1966,// XK_Greek_accentdieresis
902:1953,// XK_Greek_ALPHAaccent
904:1954,// XK_Greek_EPSILONaccent
905:1955,// XK_Greek_ETAaccent
906:1956,// XK_Greek_IOTAaccent
908:1959,// XK_Greek_OMICRONaccent
910:1960,// XK_Greek_UPSILONaccent
911:1963,// XK_Greek_OMEGAaccent
912:1974,// XK_Greek_iotaaccentdieresis
913:1985,// XK_Greek_ALPHA
914:1986,// XK_Greek_BETA
915:1987,// XK_Greek_GAMMA
916:1988,// XK_Greek_DELTA
917:1989,// XK_Greek_EPSILON
918:1990,// XK_Greek_ZETA
919:1991,// XK_Greek_ETA
920:1992,// XK_Greek_THETA
921:1993,// XK_Greek_IOTA
922:1994,// XK_Greek_KAPPA
923:1995,// XK_Greek_LAMDA
924:1996,// XK_Greek_MU
925:1997,// XK_Greek_NU
926:1998,// XK_Greek_XI
927:1999,// XK_Greek_OMICRON
928:2000,// XK_Greek_PI
929:2001,// XK_Greek_RHO
931:2002,// XK_Greek_SIGMA
932:2004,// XK_Greek_TAU
933:2005,// XK_Greek_UPSILON
934:2006,// XK_Greek_PHI
935:2007,// XK_Greek_CHI
936:2008,// XK_Greek_PSI
937:2009,// XK_Greek_OMEGA
938:1957,// XK_Greek_IOTAdieresis
939:1961,// XK_Greek_UPSILONdieresis
940:1969,// XK_Greek_alphaaccent
941:1970,// XK_Greek_epsilonaccent
942:1971,// XK_Greek_etaaccent
943:1972,// XK_Greek_iotaaccent
944:1978,// XK_Greek_upsilonaccentdieresis
945:2017,// XK_Greek_alpha
946:2018,// XK_Greek_beta
947:2019,// XK_Greek_gamma
948:2020,// XK_Greek_delta
949:2021,// XK_Greek_epsilon
950:2022,// XK_Greek_zeta
951:2023,// XK_Greek_eta
952:2024,// XK_Greek_theta
953:2025,// XK_Greek_iota
954:2026,// XK_Greek_kappa
955:2027,// XK_Greek_lamda
956:2028,// XK_Greek_mu
957:2029,// XK_Greek_nu
958:2030,// XK_Greek_xi
959:2031,// XK_Greek_omicron
960:2032,// XK_Greek_pi
961:2033,// XK_Greek_rho
962:2035,// XK_Greek_finalsmallsigma
963:2034,// XK_Greek_sigma
964:2036,// XK_Greek_tau
965:2037,// XK_Greek_upsilon
966:2038,// XK_Greek_phi
967:2039,// XK_Greek_chi
968:2040,// XK_Greek_psi
969:2041,// XK_Greek_omega
970:1973,// XK_Greek_iotadieresis
971:1977,// XK_Greek_upsilondieresis
972:1975,// XK_Greek_omicronaccent
973:1976,// XK_Greek_upsilonaccent
974:1979,// XK_Greek_omegaaccent
1025:1715,// XK_Cyrillic_IO
1026:1713,// XK_Serbian_DJE
1027:1714,// XK_Macedonia_GJE
1028:1716,// XK_Ukrainian_IE
1029:1717,// XK_Macedonia_DSE
1030:1718,// XK_Ukrainian_I
1031:1719,// XK_Ukrainian_YI
1032:1720,// XK_Cyrillic_JE
1033:1721,// XK_Cyrillic_LJE
1034:1722,// XK_Cyrillic_NJE
1035:1723,// XK_Serbian_TSHE
1036:1724,// XK_Macedonia_KJE
1038:1726,// XK_Byelorussian_SHORTU
1039:1727,// XK_Cyrillic_DZHE
1040:1761,// XK_Cyrillic_A
1041:1762,// XK_Cyrillic_BE
1042:1783,// XK_Cyrillic_VE
1043:1767,// XK_Cyrillic_GHE
1044:1764,// XK_Cyrillic_DE
1045:1765,// XK_Cyrillic_IE
1046:1782,// XK_Cyrillic_ZHE
1047:1786,// XK_Cyrillic_ZE
1048:1769,// XK_Cyrillic_I
1049:1770,// XK_Cyrillic_SHORTI
1050:1771,// XK_Cyrillic_KA
1051:1772,// XK_Cyrillic_EL
1052:1773,// XK_Cyrillic_EM
1053:1774,// XK_Cyrillic_EN
1054:1775,// XK_Cyrillic_O
1055:1776,// XK_Cyrillic_PE
1056:1778,// XK_Cyrillic_ER
1057:1779,// XK_Cyrillic_ES
1058:1780,// XK_Cyrillic_TE
1059:1781,// XK_Cyrillic_U
1060:1766,// XK_Cyrillic_EF
1061:1768,// XK_Cyrillic_HA
1062:1763,// XK_Cyrillic_TSE
1063:1790,// XK_Cyrillic_CHE
1064:1787,// XK_Cyrillic_SHA
1065:1789,// XK_Cyrillic_SHCHA
1066:1791,// XK_Cyrillic_HARDSIGN
1067:1785,// XK_Cyrillic_YERU
1068:1784,// XK_Cyrillic_SOFTSIGN
1069:1788,// XK_Cyrillic_E
1070:1760,// XK_Cyrillic_YU
1071:1777,// XK_Cyrillic_YA
1072:1729,// XK_Cyrillic_a
1073:1730,// XK_Cyrillic_be
1074:1751,// XK_Cyrillic_ve
1075:1735,// XK_Cyrillic_ghe
1076:1732,// XK_Cyrillic_de
1077:1733,// XK_Cyrillic_ie
1078:1750,// XK_Cyrillic_zhe
1079:1754,// XK_Cyrillic_ze
1080:1737,// XK_Cyrillic_i
1081:1738,// XK_Cyrillic_shorti
1082:1739,// XK_Cyrillic_ka
1083:1740,// XK_Cyrillic_el
1084:1741,// XK_Cyrillic_em
1085:1742,// XK_Cyrillic_en
1086:1743,// XK_Cyrillic_o
1087:1744,// XK_Cyrillic_pe
1088:1746,// XK_Cyrillic_er
1089:1747,// XK_Cyrillic_es
1090:1748,// XK_Cyrillic_te
1091:1749,// XK_Cyrillic_u
1092:1734,// XK_Cyrillic_ef
1093:1736,// XK_Cyrillic_ha
1094:1731,// XK_Cyrillic_tse
1095:1758,// XK_Cyrillic_che
1096:1755,// XK_Cyrillic_sha
1097:1757,// XK_Cyrillic_shcha
1098:1759,// XK_Cyrillic_hardsign
1099:1753,// XK_Cyrillic_yeru
1100:1752,// XK_Cyrillic_softsign
1101:1756,// XK_Cyrillic_e
1102:1728,// XK_Cyrillic_yu
1103:1745,// XK_Cyrillic_ya
1105:1699,// XK_Cyrillic_io
1106:1697,// XK_Serbian_dje
1107:1698,// XK_Macedonia_gje
1108:1700,// XK_Ukrainian_ie
1109:1701,// XK_Macedonia_dse
1110:1702,// XK_Ukrainian_i
1111:1703,// XK_Ukrainian_yi
1112:1704,// XK_Cyrillic_je
1113:1705,// XK_Cyrillic_lje
1114:1706,// XK_Cyrillic_nje
1115:1707,// XK_Serbian_tshe
1116:1708,// XK_Macedonia_kje
1118:1710,// XK_Byelorussian_shortu
1119:1711,// XK_Cyrillic_dzhe
1168:1725,// XK_Ukrainian_GHE_WITH_UPTURN
1169:1709,// XK_Ukrainian_ghe_with_upturn
1488:3296,// XK_hebrew_aleph
1489:3297,// XK_hebrew_bet
1490:3298,// XK_hebrew_gimel
1491:3299,// XK_hebrew_dalet
1492:3300,// XK_hebrew_he
1493:3301,// XK_hebrew_waw
1494:3302,// XK_hebrew_zain
1495:3303,// XK_hebrew_chet
1496:3304,// XK_hebrew_tet
1497:3305,// XK_hebrew_yod
1498:3306,// XK_hebrew_finalkaph
1499:3307,// XK_hebrew_kaph
1500:3308,// XK_hebrew_lamed
1501:3309,// XK_hebrew_finalmem
1502:3310,// XK_hebrew_mem
1503:3311,// XK_hebrew_finalnun
1504:3312,// XK_hebrew_nun
1505:3313,// XK_hebrew_samech
1506:3314,// XK_hebrew_ayin
1507:3315,// XK_hebrew_finalpe
1508:3316,// XK_hebrew_pe
1509:3317,// XK_hebrew_finalzade
1510:3318,// XK_hebrew_zade
1511:3319,// XK_hebrew_qoph
1512:3320,// XK_hebrew_resh
1513:3321,// XK_hebrew_shin
1514:3322,// XK_hebrew_taw
1548:1452,// XK_Arabic_comma
1563:1467,// XK_Arabic_semicolon
1567:1471,// XK_Arabic_question_mark
1569:1473,// XK_Arabic_hamza
1570:1474,// XK_Arabic_maddaonalef
1571:1475,// XK_Arabic_hamzaonalef
1572:1476,// XK_Arabic_hamzaonwaw
1573:1477,// XK_Arabic_hamzaunderalef
1574:1478,// XK_Arabic_hamzaonyeh
1575:1479,// XK_Arabic_alef
1576:1480,// XK_Arabic_beh
1577:1481,// XK_Arabic_tehmarbuta
1578:1482,// XK_Arabic_teh
1579:1483,// XK_Arabic_theh
1580:1484,// XK_Arabic_jeem
1581:1485,// XK_Arabic_hah
1582:1486,// XK_Arabic_khah
1583:1487,// XK_Arabic_dal
1584:1488,// XK_Arabic_thal
1585:1489,// XK_Arabic_ra
1586:1490,// XK_Arabic_zain
1587:1491,// XK_Arabic_seen
1588:1492,// XK_Arabic_sheen
1589:1493,// XK_Arabic_sad
1590:1494,// XK_Arabic_dad
1591:1495,// XK_Arabic_tah
1592:1496,// XK_Arabic_zah
1593:1497,// XK_Arabic_ain
1594:1498,// XK_Arabic_ghain
1600:1504,// XK_Arabic_tatweel
1601:1505,// XK_Arabic_feh
1602:1506,// XK_Arabic_qaf
1603:1507,// XK_Arabic_kaf
1604:1508,// XK_Arabic_lam
1605:1509,// XK_Arabic_meem
1606:1510,// XK_Arabic_noon
1607:1511,// XK_Arabic_ha
1608:1512,// XK_Arabic_waw
1609:1513,// XK_Arabic_alefmaksura
1610:1514,// XK_Arabic_yeh
1611:1515,// XK_Arabic_fathatan
1612:1516,// XK_Arabic_dammatan
1613:1517,// XK_Arabic_kasratan
1614:1518,// XK_Arabic_fatha
1615:1519,// XK_Arabic_damma
1616:1520,// XK_Arabic_kasra
1617:1521,// XK_Arabic_shadda
1618:1522,// XK_Arabic_sukun
3585:3489,// XK_Thai_kokai
3586:3490,// XK_Thai_khokhai
3587:3491,// XK_Thai_khokhuat
3588:3492,// XK_Thai_khokhwai
3589:3493,// XK_Thai_khokhon
3590:3494,// XK_Thai_khorakhang
3591:3495,// XK_Thai_ngongu
3592:3496,// XK_Thai_chochan
3593:3497,// XK_Thai_choching
3594:3498,// XK_Thai_chochang
3595:3499,// XK_Thai_soso
3596:3500,// XK_Thai_chochoe
3597:3501,// XK_Thai_yoying
3598:3502,// XK_Thai_dochada
3599:3503,// XK_Thai_topatak
3600:3504,// XK_Thai_thothan
3601:3505,// XK_Thai_thonangmontho
3602:3506,// XK_Thai_thophuthao
3603:3507,// XK_Thai_nonen
3604:3508,// XK_Thai_dodek
3605:3509,// XK_Thai_totao
3606:3510,// XK_Thai_thothung
3607:3511,// XK_Thai_thothahan
3608:3512,// XK_Thai_thothong
3609:3513,// XK_Thai_nonu
3610:3514,// XK_Thai_bobaimai
3611:3515,// XK_Thai_popla
3612:3516,// XK_Thai_phophung
3613:3517,// XK_Thai_fofa
3614:3518,// XK_Thai_phophan
3615:3519,// XK_Thai_fofan
3616:3520,// XK_Thai_phosamphao
3617:3521,// XK_Thai_moma
3618:3522,// XK_Thai_yoyak
3619:3523,// XK_Thai_rorua
3620:3524,// XK_Thai_ru
3621:3525,// XK_Thai_loling
3622:3526,// XK_Thai_lu
3623:3527,// XK_Thai_wowaen
3624:3528,// XK_Thai_sosala
3625:3529,// XK_Thai_sorusi
3626:3530,// XK_Thai_sosua
3627:3531,// XK_Thai_hohip
3628:3532,// XK_Thai_lochula
3629:3533,// XK_Thai_oang
3630:3534,// XK_Thai_honokhuk
3631:3535,// XK_Thai_paiyannoi
3632:3536,// XK_Thai_saraa
3633:3537,// XK_Thai_maihanakat
3634:3538,// XK_Thai_saraaa
3635:3539,// XK_Thai_saraam
3636:3540,// XK_Thai_sarai
3637:3541,// XK_Thai_saraii
3638:3542,// XK_Thai_saraue
3639:3543,// XK_Thai_sarauee
3640:3544,// XK_Thai_sarau
3641:3545,// XK_Thai_sarauu
3642:3546,// XK_Thai_phinthu
3647:3551,// XK_Thai_baht
3648:3552,// XK_Thai_sarae
3649:3553,// XK_Thai_saraae
3650:3554,// XK_Thai_sarao
3651:3555,// XK_Thai_saraaimaimuan
3652:3556,// XK_Thai_saraaimaimalai
3653:3557,// XK_Thai_lakkhangyao
3654:3558,// XK_Thai_maiyamok
3655:3559,// XK_Thai_maitaikhu
3656:3560,// XK_Thai_maiek
3657:3561,// XK_Thai_maitho
3658:3562,// XK_Thai_maitri
3659:3563,// XK_Thai_maichattawa
3660:3564,// XK_Thai_thanthakhat
3661:3565,// XK_Thai_nikhahit
3664:3568,// XK_Thai_leksun
3665:3569,// XK_Thai_leknung
3666:3570,// XK_Thai_leksong
3667:3571,// XK_Thai_leksam
3668:3572,// XK_Thai_leksi
3669:3573,// XK_Thai_lekha
3670:3574,// XK_Thai_lekhok
3671:3575,// XK_Thai_lekchet
3672:3576,// XK_Thai_lekpaet
3673:3577,// XK_Thai_lekkao
8194:2722,// XK_enspace
8195:2721,// XK_emspace
8196:2723,// XK_em3space
8197:2724,// XK_em4space
8199:2725,// XK_digitspace
8200:2726,// XK_punctspace
8201:2727,// XK_thinspace
8202:2728,// XK_hairspace
8210:2747,// XK_figdash
8211:2730,// XK_endash
8212:2729,// XK_emdash
8213:1967,// XK_Greek_horizbar
8215:3295,// XK_hebrew_doublelowline
8216:2768,// XK_leftsinglequotemark
8217:2769,// XK_rightsinglequotemark
8218:2813,// XK_singlelowquotemark
8220:2770,// XK_leftdoublequotemark
8221:2771,// XK_rightdoublequotemark
8222:2814,// XK_doublelowquotemark
8224:2801,// XK_dagger
8225:2802,// XK_doubledagger
8226:2790,// XK_enfilledcircbullet
8229:2735,// XK_doubbaselinedot
8230:2734,// XK_ellipsis
8240:2773,// XK_permille
8242:2774,// XK_minutes
8243:2775,// XK_seconds
8248:2812,// XK_caret
8254:1150,// XK_overline
8361:3839,// XK_Korean_Won
8364:8364,// XK_EuroSign
8453:2744,// XK_careof
8470:1712,// XK_numerosign
8471:2811,// XK_phonographcopyright
8478:2772,// XK_prescription
8482:2761,// XK_trademark
8531:2736,// XK_onethird
8532:2737,// XK_twothirds
8533:2738,// XK_onefifth
8534:2739,// XK_twofifths
8535:2740,// XK_threefifths
8536:2741,// XK_fourfifths
8537:2742,// XK_onesixth
8538:2743,// XK_fivesixths
8539:2755,// XK_oneeighth
8540:2756,// XK_threeeighths
8541:2757,// XK_fiveeighths
8542:2758,// XK_seveneighths
8592:2299,// XK_leftarrow
8593:2300,// XK_uparrow
8594:2301,// XK_rightarrow
8595:2302,// XK_downarrow
8658:2254,// XK_implies
8660:2253,// XK_ifonlyif
8706:2287,// XK_partialderivative
8711:2245,// XK_nabla
8728:3018,// XK_jot
8730:2262,// XK_radical
8733:2241,// XK_variation
8734:2242,// XK_infinity
8743:2270,// XK_logicaland
8744:2271,// XK_logicalor
8745:2268,// XK_intersection
8746:2269,// XK_union
8747:2239,// XK_integral
8756:2240,// XK_therefore
8764:2248,// XK_approximate
8771:2249,// XK_similarequal
8773:16785992,// XK_approxeq
8800:2237,// XK_notequal
8801:2255,// XK_identical
8804:2236,// XK_lessthanequal
8805:2238,// XK_greaterthanequal
8834:2266,// XK_includedin
8835:2267,// XK_includes
8866:3068,// XK_righttack
8867:3036,// XK_lefttack
8868:3010,// XK_downtack
8869:3022,// XK_uptack
8968:3027,// XK_upstile
8970:3012,// XK_downstile
8981:2810,// XK_telephonerecorder
8992:2212,// XK_topintegral
8993:2213,// XK_botintegral
9109:3020,// XK_quad
9115:2219,// XK_topleftparens
9117:2220,// XK_botleftparens
9118:2221,// XK_toprightparens
9120:2222,// XK_botrightparens
9121:2215,// XK_topleftsqbracket
9123:2216,// XK_botleftsqbracket
9124:2217,// XK_toprightsqbracket
9126:2218,// XK_botrightsqbracket
9128:2223,// XK_leftmiddlecurlybrace
9132:2224,// XK_rightmiddlecurlybrace
9143:2209,// XK_leftradical
9146:2543,// XK_horizlinescan1
9147:2544,// XK_horizlinescan3
9148:2546,// XK_horizlinescan7
9149:2547,// XK_horizlinescan9
9225:2530,// XK_ht
9226:2533,// XK_lf
9227:2537,// XK_vt
9228:2531,// XK_ff
9229:2532,// XK_cr
9251:2732,// XK_signifblank
9252:2536,// XK_nl
9472:2211,// XK_horizconnector
9474:2214,// XK_vertconnector
9484:2210,// XK_topleftradical
9488:2539,// XK_uprightcorner
9492:2541,// XK_lowleftcorner
9496:2538,// XK_lowrightcorner
9500:2548,// XK_leftt
9508:2549,// XK_rightt
9516:2551,// XK_topt
9524:2550,// XK_bott
9532:2542,// XK_crossinglines
9618:2529,// XK_checkerboard
9642:2791,// XK_enfilledsqbullet
9643:2785,// XK_enopensquarebullet
9644:2779,// XK_filledrectbullet
9645:2786,// XK_openrectbullet
9646:2783,// XK_emfilledrect
9647:2767,// XK_emopenrectangle
9650:2792,// XK_filledtribulletup
9651:2787,// XK_opentribulletup
9654:2781,// XK_filledrighttribullet
9655:2765,// XK_rightopentriangle
9660:2793,// XK_filledtribulletdown
9661:2788,// XK_opentribulletdown
9664:2780,// XK_filledlefttribullet
9665:2764,// XK_leftopentriangle
9670:2528,// XK_soliddiamond
9675:2766,// XK_emopencircle
9679:2782,// XK_emfilledcircle
9702:2784,// XK_enopencircbullet
9734:2789,// XK_openstar
9742:2809,// XK_telephone
9747:2762,// XK_signaturemark
9756:2794,// XK_leftpointer
9758:2795,// XK_rightpointer
9792:2808,// XK_femalesymbol
9794:2807,// XK_malesymbol
9827:2796,// XK_club
9829:2798,// XK_heart
9830:2797,// XK_diamond
9837:2806,// XK_musicalflat
9839:2805,// XK_musicalsharp
10003:2803,// XK_checkmark
10007:2804,// XK_ballotcross
10013:2777,// XK_latincross
10016:2800,// XK_maltesecross
10216:2748,// XK_leftanglebracket
10217:2750,// XK_rightanglebracket
12289:1188,// XK_kana_comma
12290:1185,// XK_kana_fullstop
12300:1186,// XK_kana_openingbracket
12301:1187,// XK_kana_closingbracket
12443:1246,// XK_voicedsound
12444:1247,// XK_semivoicedsound
12449:1191,// XK_kana_a
12450:1201,// XK_kana_A
12451:1192,// XK_kana_i
12452:1202,// XK_kana_I
12453:1193,// XK_kana_u
12454:1203,// XK_kana_U
12455:1194,// XK_kana_e
12456:1204,// XK_kana_E
12457:1195,// XK_kana_o
12458:1205,// XK_kana_O
12459:1206,// XK_kana_KA
12461:1207,// XK_kana_KI
12463:1208,// XK_kana_KU
12465:1209,// XK_kana_KE
12467:1210,// XK_kana_KO
12469:1211,// XK_kana_SA
12471:1212,// XK_kana_SHI
12473:1213,// XK_kana_SU
12475:1214,// XK_kana_SE
12477:1215,// XK_kana_SO
12479:1216,// XK_kana_TA
12481:1217,// XK_kana_CHI
12483:1199,// XK_kana_tsu
12484:1218,// XK_kana_TSU
12486:1219,// XK_kana_TE
12488:1220,// XK_kana_TO
12490:1221,// XK_kana_NA
12491:1222,// XK_kana_NI
12492:1223,// XK_kana_NU
12493:1224,// XK_kana_NE
12494:1225,// XK_kana_NO
12495:1226,// XK_kana_HA
12498:1227,// XK_kana_HI
12501:1228,// XK_kana_FU
12504:1229,// XK_kana_HE
12507:1230,// XK_kana_HO
12510:1231,// XK_kana_MA
12511:1232,// XK_kana_MI
12512:1233,// XK_kana_MU
12513:1234,// XK_kana_ME
12514:1235,// XK_kana_MO
12515:1196,// XK_kana_ya
12516:1236,// XK_kana_YA
12517:1197,// XK_kana_yu
12518:1237,// XK_kana_YU
12519:1198,// XK_kana_yo
12520:1238,// XK_kana_YO
12521:1239,// XK_kana_RA
12522:1240,// XK_kana_RI
12523:1241,// XK_kana_RU
12524:1242,// XK_kana_RE
12525:1243,// XK_kana_RO
12527:1244,// XK_kana_WA
12530:1190,// XK_kana_WO
12531:1245,// XK_kana_N
12539:1189,// XK_kana_conjunctive
12540:1200// XK_prolongedsound
};exports.default={lookup:function lookup(u){// Latin-1 is one-to-one mapping
if(u>=32&&u<=255){return u}// Lookup table (fairly random)
var keysym=codepoints[u];if(keysym!==undefined){return keysym}// General mapping as final fallback
return 16777216|u}};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=Mouse;var _logging=require('../util/logging.js');var Log=_interopRequireWildcard(_logging);var _browser=require('../util/browser.js');var _events=require('../util/events.js');function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var WHEEL_STEP=10;// Delta threshold for a mouse wheel step
/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Copyright (C) 2013 Samuel Mannehed for Cendio AB
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 */var WHEEL_STEP_TIMEOUT=50;// ms
var WHEEL_LINE_HEIGHT=19;function Mouse(target){this._target=target||document;this._doubleClickTimer=null;this._lastTouchPos=null;this._pos=null;this._wheelStepXTimer=null;this._wheelStepYTimer=null;this._accumulatedWheelDeltaX=0;this._accumulatedWheelDeltaY=0;this._eventHandlers={'mousedown':this._handleMouseDown.bind(this),'mouseup':this._handleMouseUp.bind(this),'mousemove':this._handleMouseMove.bind(this),'mousewheel':this._handleMouseWheel.bind(this),'mousedisable':this._handleMouseDisable.bind(this)}};Mouse.prototype={// ===== PROPERTIES =====
touchButton:1,// Button mask (1, 2, 4) for touch devices (0 means ignore clicks)
// ===== EVENT HANDLERS =====
onmousebutton:function onmousebutton(){},// Handler for mouse button click/release
onmousemove:function onmousemove(){},// Handler for mouse movement
// ===== PRIVATE METHODS =====
_resetDoubleClickTimer:function _resetDoubleClickTimer(){this._doubleClickTimer=null},_handleMouseButton:function _handleMouseButton(e,down){this._updateMousePosition(e);var pos=this._pos;var bmask;if(e.touches||e.changedTouches){// Touch device
// When two touches occur within 500 ms of each other and are
// close enough together a double click is triggered.
if(down==1){if(this._doubleClickTimer===null){this._lastTouchPos=pos}else{clearTimeout(this._doubleClickTimer);// When the distance between the two touches is small enough
// force the position of the latter touch to the position of
// the first.
var xs=this._lastTouchPos.x-pos.x;var ys=this._lastTouchPos.y-pos.y;var d=Math.sqrt(xs*xs+ys*ys);// The goal is to trigger on a certain physical width, the
// devicePixelRatio brings us a bit closer but is not optimal.
var threshold=20*(window.devicePixelRatio||1);if(d<threshold){pos=this._lastTouchPos}}this._doubleClickTimer=setTimeout(this._resetDoubleClickTimer.bind(this),500)}bmask=this.touchButton;// If bmask is set
}else if(e.which){/* everything except IE */bmask=1<<e.button}else{/* IE including 9 */bmask=(e.button&1)+// Left
(e.button&2)*2+// Right
(e.button&4)/2;// Middle
}Log.Debug('onmousebutton '+(down?'down':'up')+', x: '+pos.x+', y: '+pos.y+', bmask: '+bmask);this.onmousebutton(pos.x,pos.y,down,bmask);(0,_events.stopEvent)(e)},_handleMouseDown:function _handleMouseDown(e){// Touch events have implicit capture
if(e.type==='mousedown'){(0,_events.setCapture)(this._target)}this._handleMouseButton(e,1)},_handleMouseUp:function _handleMouseUp(e){this._handleMouseButton(e,0)},// Mouse wheel events are sent in steps over VNC. This means that the VNC
// protocol can't handle a wheel event with specific distance or speed.
// Therefor, if we get a lot of small mouse wheel events we combine them.
_generateWheelStepX:function _generateWheelStepX(){if(this._accumulatedWheelDeltaX<0){this.onmousebutton(this._pos.x,this._pos.y,1,1<<5);this.onmousebutton(this._pos.x,this._pos.y,0,1<<5)}else if(this._accumulatedWheelDeltaX>0){this.onmousebutton(this._pos.x,this._pos.y,1,1<<6);this.onmousebutton(this._pos.x,this._pos.y,0,1<<6)}this._accumulatedWheelDeltaX=0},_generateWheelStepY:function _generateWheelStepY(){if(this._accumulatedWheelDeltaY<0){this.onmousebutton(this._pos.x,this._pos.y,1,1<<3);this.onmousebutton(this._pos.x,this._pos.y,0,1<<3)}else if(this._accumulatedWheelDeltaY>0){this.onmousebutton(this._pos.x,this._pos.y,1,1<<4);this.onmousebutton(this._pos.x,this._pos.y,0,1<<4)}this._accumulatedWheelDeltaY=0},_resetWheelStepTimers:function _resetWheelStepTimers(){window.clearTimeout(this._wheelStepXTimer);window.clearTimeout(this._wheelStepYTimer);this._wheelStepXTimer=null;this._wheelStepYTimer=null},_handleMouseWheel:function _handleMouseWheel(e){this._resetWheelStepTimers();this._updateMousePosition(e);var dX=e.deltaX;var dY=e.deltaY;// Pixel units unless it's non-zero.
// Note that if deltamode is line or page won't matter since we aren't
// sending the mouse wheel delta to the server anyway.
// The difference between pixel and line can be important however since
// we have a threshold that can be smaller than the line height.
if(e.deltaMode!==0){dX*=WHEEL_LINE_HEIGHT;dY*=WHEEL_LINE_HEIGHT}this._accumulatedWheelDeltaX+=dX;this._accumulatedWheelDeltaY+=dY;// Generate a mouse wheel step event when the accumulated delta
// for one of the axes is large enough.
// Small delta events that do not pass the threshold get sent
// after a timeout.
if(Math.abs(this._accumulatedWheelDeltaX)>WHEEL_STEP){this._generateWheelStepX()}else{this._wheelStepXTimer=window.setTimeout(this._generateWheelStepX.bind(this),WHEEL_STEP_TIMEOUT)}if(Math.abs(this._accumulatedWheelDeltaY)>WHEEL_STEP){this._generateWheelStepY()}else{this._wheelStepYTimer=window.setTimeout(this._generateWheelStepY.bind(this),WHEEL_STEP_TIMEOUT)}(0,_events.stopEvent)(e)},_handleMouseMove:function _handleMouseMove(e){this._updateMousePosition(e);this.onmousemove(this._pos.x,this._pos.y);(0,_events.stopEvent)(e)},_handleMouseDisable:function _handleMouseDisable(e){/*
         * Stop propagation if inside canvas area
         * Note: This is only needed for the 'click' event as it fails
         *       to fire properly for the target element so we have
         *       to listen on the document element instead.
         */if(e.target==this._target){(0,_events.stopEvent)(e)}},// Update coordinates relative to target
_updateMousePosition:function _updateMousePosition(e){e=(0,_events.getPointerEvent)(e);var bounds=this._target.getBoundingClientRect();var x,y;// Clip to target bounds
if(e.clientX<bounds.left){x=0}else if(e.clientX>=bounds.right){x=bounds.width-1}else{x=e.clientX-bounds.left}if(e.clientY<bounds.top){y=0}else if(e.clientY>=bounds.bottom){y=bounds.height-1}else{y=e.clientY-bounds.top}this._pos={x:x,y:y}},// ===== PUBLIC METHODS =====
grab:function grab(){var c=this._target;if(_browser.isTouchDevice){c.addEventListener('touchstart',this._eventHandlers.mousedown);c.addEventListener('touchend',this._eventHandlers.mouseup);c.addEventListener('touchmove',this._eventHandlers.mousemove)}c.addEventListener('mousedown',this._eventHandlers.mousedown);c.addEventListener('mouseup',this._eventHandlers.mouseup);c.addEventListener('mousemove',this._eventHandlers.mousemove);c.addEventListener('wheel',this._eventHandlers.mousewheel);/* Prevent middle-click pasting (see above for why we bind to document) */document.addEventListener('click',this._eventHandlers.mousedisable);/* preventDefault() on mousedown doesn't stop this event for some
           reason so we have to explicitly block it */c.addEventListener('contextmenu',this._eventHandlers.mousedisable)},ungrab:function ungrab(){var c=this._target;this._resetWheelStepTimers();if(_browser.isTouchDevice){c.removeEventListener('touchstart',this._eventHandlers.mousedown);c.removeEventListener('touchend',this._eventHandlers.mouseup);c.removeEventListener('touchmove',this._eventHandlers.mousemove)}c.removeEventListener('mousedown',this._eventHandlers.mousedown);c.removeEventListener('mouseup',this._eventHandlers.mouseup);c.removeEventListener('mousemove',this._eventHandlers.mousemove);c.removeEventListener('wheel',this._eventHandlers.mousewheel);document.removeEventListener('click',this._eventHandlers.mousedisable);c.removeEventListener('contextmenu',this._eventHandlers.mousedisable)}};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.getKeycode=getKeycode;exports.getKey=getKey;exports.getKeysym=getKeysym;var _keysym=require('./keysym.js');var _keysym2=_interopRequireDefault(_keysym);var _keysymdef=require('./keysymdef.js');var _keysymdef2=_interopRequireDefault(_keysymdef);var _vkeys=require('./vkeys.js');var _vkeys2=_interopRequireDefault(_vkeys);var _fixedkeys=require('./fixedkeys.js');var _fixedkeys2=_interopRequireDefault(_fixedkeys);var _domkeytable=require('./domkeytable.js');var _domkeytable2=_interopRequireDefault(_domkeytable);var _browser=require('../util/browser.js');var browser=_interopRequireWildcard(_browser);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}// Get 'KeyboardEvent.code', handling legacy browsers
function getKeycode(evt){// Are we getting proper key identifiers?
// (unfortunately Firefox and Chrome are crappy here and gives
// us an empty string on some platforms, rather than leaving it
// undefined)
if(evt.code){// Mozilla isn't fully in sync with the spec yet
switch(evt.code){case'OSLeft':return'MetaLeft';case'OSRight':return'MetaRight';}return evt.code}// The de-facto standard is to use Windows Virtual-Key codes
// in the 'keyCode' field for non-printable characters. However
// Webkit sets it to the same as charCode in 'keypress' events.
if(evt.type!=='keypress'&&evt.keyCode in _vkeys2.default){var code=_vkeys2.default[evt.keyCode];// macOS has messed up this code for some reason
if(browser.isMac()&&code==='ContextMenu'){code='MetaRight'}// The keyCode doesn't distinguish between left and right
// for the standard modifiers
if(evt.location===2){switch(code){case'ShiftLeft':return'ShiftRight';case'ControlLeft':return'ControlRight';case'AltLeft':return'AltRight';}}// Nor a bunch of the numpad keys
if(evt.location===3){switch(code){case'Delete':return'NumpadDecimal';case'Insert':return'Numpad0';case'End':return'Numpad1';case'ArrowDown':return'Numpad2';case'PageDown':return'Numpad3';case'ArrowLeft':return'Numpad4';case'ArrowRight':return'Numpad6';case'Home':return'Numpad7';case'ArrowUp':return'Numpad8';case'PageUp':return'Numpad9';case'Enter':return'NumpadEnter';}}return code}return'Unidentified'}// Get 'KeyboardEvent.key', handling legacy browsers
function getKey(evt){// Are we getting a proper key value?
if(evt.key!==undefined){// IE and Edge use some ancient version of the spec
// https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8860571/
switch(evt.key){case'Spacebar':return' ';case'Esc':return'Escape';case'Scroll':return'ScrollLock';case'Win':return'Meta';case'Apps':return'ContextMenu';case'Up':return'ArrowUp';case'Left':return'ArrowLeft';case'Right':return'ArrowRight';case'Down':return'ArrowDown';case'Del':return'Delete';case'Divide':return'/';case'Multiply':return'*';case'Subtract':return'-';case'Add':return'+';case'Decimal':return evt.char;}// Mozilla isn't fully in sync with the spec yet
switch(evt.key){case'OS':return'Meta';}// iOS leaks some OS names
switch(evt.key){case'UIKeyInputUpArrow':return'ArrowUp';case'UIKeyInputDownArrow':return'ArrowDown';case'UIKeyInputLeftArrow':return'ArrowLeft';case'UIKeyInputRightArrow':return'ArrowRight';case'UIKeyInputEscape':return'Escape';}// IE and Edge have broken handling of AltGraph so we cannot
// trust them for printable characters
if(evt.key.length!==1||!browser.isIE()&&!browser.isEdge()){return evt.key}}// Try to deduce it based on the physical key
var code=getKeycode(evt);if(code in _fixedkeys2.default){return _fixedkeys2.default[code]}// If that failed, then see if we have a printable character
if(evt.charCode){return String.fromCharCode(evt.charCode)}// At this point we have nothing left to go on
return'Unidentified'}// Get the most reliable keysym value we can get from a key event
function getKeysym(evt){var key=getKey(evt);if(key==='Unidentified'){return null}// First look up special keys
if(key in _domkeytable2.default){var location=evt.location;// Safari screws up location for the right cmd key
if(key==='Meta'&&location===0){location=2}if(location===undefined||location>3){location=0}return _domkeytable2.default[key][location]}// Now we need to look at the Unicode symbol instead
var codepoint;// Special key? (FIXME: Should have been caught earlier)
if(key.length!==1){return null}codepoint=key.charCodeAt();if(codepoint){return _keysymdef2.default.lookup(codepoint)}return null}'use strict';Object.defineProperty(exports,'__esModule',{value:true});/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2017 Pierre Ossman for Cendio AB
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 *//*
 * Mapping between Microsoft® Windows® Virtual-Key codes and
 * HTML key codes.
 */exports.default={8:'Backspace',9:'Tab',10:'NumpadClear',13:'Enter',16:'ShiftLeft',17:'ControlLeft',18:'AltLeft',19:'Pause',20:'CapsLock',21:'Lang1',25:'Lang2',27:'Escape',28:'Convert',29:'NonConvert',32:'Space',33:'PageUp',34:'PageDown',35:'End',36:'Home',37:'ArrowLeft',38:'ArrowUp',39:'ArrowRight',40:'ArrowDown',41:'Select',44:'PrintScreen',45:'Insert',46:'Delete',47:'Help',48:'Digit0',49:'Digit1',50:'Digit2',51:'Digit3',52:'Digit4',53:'Digit5',54:'Digit6',55:'Digit7',56:'Digit8',57:'Digit9',91:'MetaLeft',92:'MetaRight',93:'ContextMenu',95:'Sleep',96:'Numpad0',97:'Numpad1',98:'Numpad2',99:'Numpad3',100:'Numpad4',101:'Numpad5',102:'Numpad6',103:'Numpad7',104:'Numpad8',105:'Numpad9',106:'NumpadMultiply',107:'NumpadAdd',108:'NumpadDecimal',109:'NumpadSubtract',110:'NumpadDecimal',// Duplicate, because buggy on Windows
111:'NumpadDivide',112:'F1',113:'F2',114:'F3',115:'F4',116:'F5',117:'F6',118:'F7',119:'F8',120:'F9',121:'F10',122:'F11',123:'F12',124:'F13',125:'F14',126:'F15',127:'F16',128:'F17',129:'F18',130:'F19',131:'F20',132:'F21',133:'F22',134:'F23',135:'F24',144:'NumLock',145:'ScrollLock',166:'BrowserBack',167:'BrowserForward',168:'BrowserRefresh',169:'BrowserStop',170:'BrowserSearch',171:'BrowserFavorites',172:'BrowserHome',173:'AudioVolumeMute',174:'AudioVolumeDown',175:'AudioVolumeUp',176:'MediaTrackNext',177:'MediaTrackPrevious',178:'MediaStop',179:'MediaPlayPause',180:'LaunchMail',181:'MediaSelect',182:'LaunchApp1',183:'LaunchApp2',225:'AltRight'// Only when it is AltGraph
};'use strict';Object.defineProperty(exports,'__esModule',{value:true});/*
 * This file is auto-generated from keymaps.csv on 2017-05-31 16:20
 * Database checksum sha256(92fd165507f2a3b8c5b3fa56e425d45788dbcb98cf067a307527d91ce22cab94)
 * To re-generate, run:
 *   keymap-gen --lang=js code-map keymaps.csv html atset1
*/exports.default={'Again':57349,/* html:Again (Again) -> linux:129 (KEY_AGAIN) -> atset1:57349 */'AltLeft':56,/* html:AltLeft (AltLeft) -> linux:56 (KEY_LEFTALT) -> atset1:56 */'AltRight':57400,/* html:AltRight (AltRight) -> linux:100 (KEY_RIGHTALT) -> atset1:57400 */'ArrowDown':57424,/* html:ArrowDown (ArrowDown) -> linux:108 (KEY_DOWN) -> atset1:57424 */'ArrowLeft':57419,/* html:ArrowLeft (ArrowLeft) -> linux:105 (KEY_LEFT) -> atset1:57419 */'ArrowRight':57421,/* html:ArrowRight (ArrowRight) -> linux:106 (KEY_RIGHT) -> atset1:57421 */'ArrowUp':57416,/* html:ArrowUp (ArrowUp) -> linux:103 (KEY_UP) -> atset1:57416 */'AudioVolumeDown':57390,/* html:AudioVolumeDown (AudioVolumeDown) -> linux:114 (KEY_VOLUMEDOWN) -> atset1:57390 */'AudioVolumeMute':57376,/* html:AudioVolumeMute (AudioVolumeMute) -> linux:113 (KEY_MUTE) -> atset1:57376 */'AudioVolumeUp':57392,/* html:AudioVolumeUp (AudioVolumeUp) -> linux:115 (KEY_VOLUMEUP) -> atset1:57392 */'Backquote':41,/* html:Backquote (Backquote) -> linux:41 (KEY_GRAVE) -> atset1:41 */'Backslash':43,/* html:Backslash (Backslash) -> linux:43 (KEY_BACKSLASH) -> atset1:43 */'Backspace':14,/* html:Backspace (Backspace) -> linux:14 (KEY_BACKSPACE) -> atset1:14 */'BracketLeft':26,/* html:BracketLeft (BracketLeft) -> linux:26 (KEY_LEFTBRACE) -> atset1:26 */'BracketRight':27,/* html:BracketRight (BracketRight) -> linux:27 (KEY_RIGHTBRACE) -> atset1:27 */'BrowserBack':57450,/* html:BrowserBack (BrowserBack) -> linux:158 (KEY_BACK) -> atset1:57450 */'BrowserFavorites':57446,/* html:BrowserFavorites (BrowserFavorites) -> linux:156 (KEY_BOOKMARKS) -> atset1:57446 */'BrowserForward':57449,/* html:BrowserForward (BrowserForward) -> linux:159 (KEY_FORWARD) -> atset1:57449 */'BrowserHome':57394,/* html:BrowserHome (BrowserHome) -> linux:172 (KEY_HOMEPAGE) -> atset1:57394 */'BrowserRefresh':57447,/* html:BrowserRefresh (BrowserRefresh) -> linux:173 (KEY_REFRESH) -> atset1:57447 */'BrowserSearch':57445,/* html:BrowserSearch (BrowserSearch) -> linux:217 (KEY_SEARCH) -> atset1:57445 */'BrowserStop':57448,/* html:BrowserStop (BrowserStop) -> linux:128 (KEY_STOP) -> atset1:57448 */'CapsLock':58,/* html:CapsLock (CapsLock) -> linux:58 (KEY_CAPSLOCK) -> atset1:58 */'Comma':51,/* html:Comma (Comma) -> linux:51 (KEY_COMMA) -> atset1:51 */'ContextMenu':57437,/* html:ContextMenu (ContextMenu) -> linux:127 (KEY_COMPOSE) -> atset1:57437 */'ControlLeft':29,/* html:ControlLeft (ControlLeft) -> linux:29 (KEY_LEFTCTRL) -> atset1:29 */'ControlRight':57373,/* html:ControlRight (ControlRight) -> linux:97 (KEY_RIGHTCTRL) -> atset1:57373 */'Convert':121,/* html:Convert (Convert) -> linux:92 (KEY_HENKAN) -> atset1:121 */'Copy':57464,/* html:Copy (Copy) -> linux:133 (KEY_COPY) -> atset1:57464 */'Cut':57404,/* html:Cut (Cut) -> linux:137 (KEY_CUT) -> atset1:57404 */'Delete':57427,/* html:Delete (Delete) -> linux:111 (KEY_DELETE) -> atset1:57427 */'Digit0':11,/* html:Digit0 (Digit0) -> linux:11 (KEY_0) -> atset1:11 */'Digit1':2,/* html:Digit1 (Digit1) -> linux:2 (KEY_1) -> atset1:2 */'Digit2':3,/* html:Digit2 (Digit2) -> linux:3 (KEY_2) -> atset1:3 */'Digit3':4,/* html:Digit3 (Digit3) -> linux:4 (KEY_3) -> atset1:4 */'Digit4':5,/* html:Digit4 (Digit4) -> linux:5 (KEY_4) -> atset1:5 */'Digit5':6,/* html:Digit5 (Digit5) -> linux:6 (KEY_5) -> atset1:6 */'Digit6':7,/* html:Digit6 (Digit6) -> linux:7 (KEY_6) -> atset1:7 */'Digit7':8,/* html:Digit7 (Digit7) -> linux:8 (KEY_7) -> atset1:8 */'Digit8':9,/* html:Digit8 (Digit8) -> linux:9 (KEY_8) -> atset1:9 */'Digit9':10,/* html:Digit9 (Digit9) -> linux:10 (KEY_9) -> atset1:10 */'Eject':57469,/* html:Eject (Eject) -> linux:162 (KEY_EJECTCLOSECD) -> atset1:57469 */'End':57423,/* html:End (End) -> linux:107 (KEY_END) -> atset1:57423 */'Enter':28,/* html:Enter (Enter) -> linux:28 (KEY_ENTER) -> atset1:28 */'Equal':13,/* html:Equal (Equal) -> linux:13 (KEY_EQUAL) -> atset1:13 */'Escape':1,/* html:Escape (Escape) -> linux:1 (KEY_ESC) -> atset1:1 */'F1':59,/* html:F1 (F1) -> linux:59 (KEY_F1) -> atset1:59 */'F10':68,/* html:F10 (F10) -> linux:68 (KEY_F10) -> atset1:68 */'F11':87,/* html:F11 (F11) -> linux:87 (KEY_F11) -> atset1:87 */'F12':88,/* html:F12 (F12) -> linux:88 (KEY_F12) -> atset1:88 */'F13':93,/* html:F13 (F13) -> linux:183 (KEY_F13) -> atset1:93 */'F14':94,/* html:F14 (F14) -> linux:184 (KEY_F14) -> atset1:94 */'F15':95,/* html:F15 (F15) -> linux:185 (KEY_F15) -> atset1:95 */'F16':85,/* html:F16 (F16) -> linux:186 (KEY_F16) -> atset1:85 */'F17':57347,/* html:F17 (F17) -> linux:187 (KEY_F17) -> atset1:57347 */'F18':57463,/* html:F18 (F18) -> linux:188 (KEY_F18) -> atset1:57463 */'F19':57348,/* html:F19 (F19) -> linux:189 (KEY_F19) -> atset1:57348 */'F2':60,/* html:F2 (F2) -> linux:60 (KEY_F2) -> atset1:60 */'F20':90,/* html:F20 (F20) -> linux:190 (KEY_F20) -> atset1:90 */'F21':116,/* html:F21 (F21) -> linux:191 (KEY_F21) -> atset1:116 */'F22':57465,/* html:F22 (F22) -> linux:192 (KEY_F22) -> atset1:57465 */'F23':109,/* html:F23 (F23) -> linux:193 (KEY_F23) -> atset1:109 */'F24':111,/* html:F24 (F24) -> linux:194 (KEY_F24) -> atset1:111 */'F3':61,/* html:F3 (F3) -> linux:61 (KEY_F3) -> atset1:61 */'F4':62,/* html:F4 (F4) -> linux:62 (KEY_F4) -> atset1:62 */'F5':63,/* html:F5 (F5) -> linux:63 (KEY_F5) -> atset1:63 */'F6':64,/* html:F6 (F6) -> linux:64 (KEY_F6) -> atset1:64 */'F7':65,/* html:F7 (F7) -> linux:65 (KEY_F7) -> atset1:65 */'F8':66,/* html:F8 (F8) -> linux:66 (KEY_F8) -> atset1:66 */'F9':67,/* html:F9 (F9) -> linux:67 (KEY_F9) -> atset1:67 */'Find':57409,/* html:Find (Find) -> linux:136 (KEY_FIND) -> atset1:57409 */'Help':57461,/* html:Help (Help) -> linux:138 (KEY_HELP) -> atset1:57461 */'Hiragana':119,/* html:Hiragana (Lang4) -> linux:91 (KEY_HIRAGANA) -> atset1:119 */'Home':57415,/* html:Home (Home) -> linux:102 (KEY_HOME) -> atset1:57415 */'Insert':57426,/* html:Insert (Insert) -> linux:110 (KEY_INSERT) -> atset1:57426 */'IntlBackslash':86,/* html:IntlBackslash (IntlBackslash) -> linux:86 (KEY_102ND) -> atset1:86 */'IntlRo':115,/* html:IntlRo (IntlRo) -> linux:89 (KEY_RO) -> atset1:115 */'IntlYen':125,/* html:IntlYen (IntlYen) -> linux:124 (KEY_YEN) -> atset1:125 */'KanaMode':112,/* html:KanaMode (KanaMode) -> linux:93 (KEY_KATAKANAHIRAGANA) -> atset1:112 */'Katakana':120,/* html:Katakana (Lang3) -> linux:90 (KEY_KATAKANA) -> atset1:120 */'KeyA':30,/* html:KeyA (KeyA) -> linux:30 (KEY_A) -> atset1:30 */'KeyB':48,/* html:KeyB (KeyB) -> linux:48 (KEY_B) -> atset1:48 */'KeyC':46,/* html:KeyC (KeyC) -> linux:46 (KEY_C) -> atset1:46 */'KeyD':32,/* html:KeyD (KeyD) -> linux:32 (KEY_D) -> atset1:32 */'KeyE':18,/* html:KeyE (KeyE) -> linux:18 (KEY_E) -> atset1:18 */'KeyF':33,/* html:KeyF (KeyF) -> linux:33 (KEY_F) -> atset1:33 */'KeyG':34,/* html:KeyG (KeyG) -> linux:34 (KEY_G) -> atset1:34 */'KeyH':35,/* html:KeyH (KeyH) -> linux:35 (KEY_H) -> atset1:35 */'KeyI':23,/* html:KeyI (KeyI) -> linux:23 (KEY_I) -> atset1:23 */'KeyJ':36,/* html:KeyJ (KeyJ) -> linux:36 (KEY_J) -> atset1:36 */'KeyK':37,/* html:KeyK (KeyK) -> linux:37 (KEY_K) -> atset1:37 */'KeyL':38,/* html:KeyL (KeyL) -> linux:38 (KEY_L) -> atset1:38 */'KeyM':50,/* html:KeyM (KeyM) -> linux:50 (KEY_M) -> atset1:50 */'KeyN':49,/* html:KeyN (KeyN) -> linux:49 (KEY_N) -> atset1:49 */'KeyO':24,/* html:KeyO (KeyO) -> linux:24 (KEY_O) -> atset1:24 */'KeyP':25,/* html:KeyP (KeyP) -> linux:25 (KEY_P) -> atset1:25 */'KeyQ':16,/* html:KeyQ (KeyQ) -> linux:16 (KEY_Q) -> atset1:16 */'KeyR':19,/* html:KeyR (KeyR) -> linux:19 (KEY_R) -> atset1:19 */'KeyS':31,/* html:KeyS (KeyS) -> linux:31 (KEY_S) -> atset1:31 */'KeyT':20,/* html:KeyT (KeyT) -> linux:20 (KEY_T) -> atset1:20 */'KeyU':22,/* html:KeyU (KeyU) -> linux:22 (KEY_U) -> atset1:22 */'KeyV':47,/* html:KeyV (KeyV) -> linux:47 (KEY_V) -> atset1:47 */'KeyW':17,/* html:KeyW (KeyW) -> linux:17 (KEY_W) -> atset1:17 */'KeyX':45,/* html:KeyX (KeyX) -> linux:45 (KEY_X) -> atset1:45 */'KeyY':21,/* html:KeyY (KeyY) -> linux:21 (KEY_Y) -> atset1:21 */'KeyZ':44,/* html:KeyZ (KeyZ) -> linux:44 (KEY_Z) -> atset1:44 */'Lang3':120,/* html:Lang3 (Lang3) -> linux:90 (KEY_KATAKANA) -> atset1:120 */'Lang4':119,/* html:Lang4 (Lang4) -> linux:91 (KEY_HIRAGANA) -> atset1:119 */'Lang5':118,/* html:Lang5 (Lang5) -> linux:85 (KEY_ZENKAKUHANKAKU) -> atset1:118 */'LaunchApp1':57451,/* html:LaunchApp1 (LaunchApp1) -> linux:157 (KEY_COMPUTER) -> atset1:57451 */'LaunchApp2':57377,/* html:LaunchApp2 (LaunchApp2) -> linux:140 (KEY_CALC) -> atset1:57377 */'LaunchMail':57452,/* html:LaunchMail (LaunchMail) -> linux:155 (KEY_MAIL) -> atset1:57452 */'MediaPlayPause':57378,/* html:MediaPlayPause (MediaPlayPause) -> linux:164 (KEY_PLAYPAUSE) -> atset1:57378 */'MediaSelect':57453,/* html:MediaSelect (MediaSelect) -> linux:226 (KEY_MEDIA) -> atset1:57453 */'MediaStop':57380,/* html:MediaStop (MediaStop) -> linux:166 (KEY_STOPCD) -> atset1:57380 */'MediaTrackNext':57369,/* html:MediaTrackNext (MediaTrackNext) -> linux:163 (KEY_NEXTSONG) -> atset1:57369 */'MediaTrackPrevious':57360,/* html:MediaTrackPrevious (MediaTrackPrevious) -> linux:165 (KEY_PREVIOUSSONG) -> atset1:57360 */'MetaLeft':57435,/* html:MetaLeft (MetaLeft) -> linux:125 (KEY_LEFTMETA) -> atset1:57435 */'MetaRight':57436,/* html:MetaRight (MetaRight) -> linux:126 (KEY_RIGHTMETA) -> atset1:57436 */'Minus':12,/* html:Minus (Minus) -> linux:12 (KEY_MINUS) -> atset1:12 */'NonConvert':123,/* html:NonConvert (NonConvert) -> linux:94 (KEY_MUHENKAN) -> atset1:123 */'NumLock':69,/* html:NumLock (NumLock) -> linux:69 (KEY_NUMLOCK) -> atset1:69 */'Numpad0':82,/* html:Numpad0 (Numpad0) -> linux:82 (KEY_KP0) -> atset1:82 */'Numpad1':79,/* html:Numpad1 (Numpad1) -> linux:79 (KEY_KP1) -> atset1:79 */'Numpad2':80,/* html:Numpad2 (Numpad2) -> linux:80 (KEY_KP2) -> atset1:80 */'Numpad3':81,/* html:Numpad3 (Numpad3) -> linux:81 (KEY_KP3) -> atset1:81 */'Numpad4':75,/* html:Numpad4 (Numpad4) -> linux:75 (KEY_KP4) -> atset1:75 */'Numpad5':76,/* html:Numpad5 (Numpad5) -> linux:76 (KEY_KP5) -> atset1:76 */'Numpad6':77,/* html:Numpad6 (Numpad6) -> linux:77 (KEY_KP6) -> atset1:77 */'Numpad7':71,/* html:Numpad7 (Numpad7) -> linux:71 (KEY_KP7) -> atset1:71 */'Numpad8':72,/* html:Numpad8 (Numpad8) -> linux:72 (KEY_KP8) -> atset1:72 */'Numpad9':73,/* html:Numpad9 (Numpad9) -> linux:73 (KEY_KP9) -> atset1:73 */'NumpadAdd':78,/* html:NumpadAdd (NumpadAdd) -> linux:78 (KEY_KPPLUS) -> atset1:78 */'NumpadComma':126,/* html:NumpadComma (NumpadComma) -> linux:121 (KEY_KPCOMMA) -> atset1:126 */'NumpadDecimal':83,/* html:NumpadDecimal (NumpadDecimal) -> linux:83 (KEY_KPDOT) -> atset1:83 */'NumpadDivide':57397,/* html:NumpadDivide (NumpadDivide) -> linux:98 (KEY_KPSLASH) -> atset1:57397 */'NumpadEnter':57372,/* html:NumpadEnter (NumpadEnter) -> linux:96 (KEY_KPENTER) -> atset1:57372 */'NumpadEqual':89,/* html:NumpadEqual (NumpadEqual) -> linux:117 (KEY_KPEQUAL) -> atset1:89 */'NumpadMultiply':55,/* html:NumpadMultiply (NumpadMultiply) -> linux:55 (KEY_KPASTERISK) -> atset1:55 */'NumpadParenLeft':57462,/* html:NumpadParenLeft (NumpadParenLeft) -> linux:179 (KEY_KPLEFTPAREN) -> atset1:57462 */'NumpadParenRight':57467,/* html:NumpadParenRight (NumpadParenRight) -> linux:180 (KEY_KPRIGHTPAREN) -> atset1:57467 */'NumpadSubtract':74,/* html:NumpadSubtract (NumpadSubtract) -> linux:74 (KEY_KPMINUS) -> atset1:74 */'Open':100,/* html:Open (Open) -> linux:134 (KEY_OPEN) -> atset1:100 */'PageDown':57425,/* html:PageDown (PageDown) -> linux:109 (KEY_PAGEDOWN) -> atset1:57425 */'PageUp':57417,/* html:PageUp (PageUp) -> linux:104 (KEY_PAGEUP) -> atset1:57417 */'Paste':101,/* html:Paste (Paste) -> linux:135 (KEY_PASTE) -> atset1:101 */'Pause':57414,/* html:Pause (Pause) -> linux:119 (KEY_PAUSE) -> atset1:57414 */'Period':52,/* html:Period (Period) -> linux:52 (KEY_DOT) -> atset1:52 */'Power':57438,/* html:Power (Power) -> linux:116 (KEY_POWER) -> atset1:57438 */'PrintScreen':84,/* html:PrintScreen (PrintScreen) -> linux:99 (KEY_SYSRQ) -> atset1:84 */'Props':57350,/* html:Props (Props) -> linux:130 (KEY_PROPS) -> atset1:57350 */'Quote':40,/* html:Quote (Quote) -> linux:40 (KEY_APOSTROPHE) -> atset1:40 */'ScrollLock':70,/* html:ScrollLock (ScrollLock) -> linux:70 (KEY_SCROLLLOCK) -> atset1:70 */'Semicolon':39,/* html:Semicolon (Semicolon) -> linux:39 (KEY_SEMICOLON) -> atset1:39 */'ShiftLeft':42,/* html:ShiftLeft (ShiftLeft) -> linux:42 (KEY_LEFTSHIFT) -> atset1:42 */'ShiftRight':54,/* html:ShiftRight (ShiftRight) -> linux:54 (KEY_RIGHTSHIFT) -> atset1:54 */'Slash':53,/* html:Slash (Slash) -> linux:53 (KEY_SLASH) -> atset1:53 */'Sleep':57439,/* html:Sleep (Sleep) -> linux:142 (KEY_SLEEP) -> atset1:57439 */'Space':57,/* html:Space (Space) -> linux:57 (KEY_SPACE) -> atset1:57 */'Suspend':57381,/* html:Suspend (Suspend) -> linux:205 (KEY_SUSPEND) -> atset1:57381 */'Tab':15,/* html:Tab (Tab) -> linux:15 (KEY_TAB) -> atset1:15 */'Undo':57351,/* html:Undo (Undo) -> linux:131 (KEY_UNDO) -> atset1:57351 */'WakeUp':57443/* html:WakeUp (WakeUp) -> linux:143 (KEY_WAKEUP) -> atset1:57443 */};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.isTouchDevice=undefined;exports.supportsCursorURIs=supportsCursorURIs;exports.isMac=isMac;exports.isIE=isIE;exports.isEdge=isEdge;exports.isWindows=isWindows;exports.isIOS=isIOS;var _logging=require('./logging.js');var Log=_interopRequireWildcard(_logging);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}// Touch detection
var isTouchDevice=exports.isTouchDevice='ontouchstart'in document.documentElement||// requried for Chrome debugger
document.ontouchstart!==undefined||// required for MS Surface
navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 */window.addEventListener('touchstart',function onFirstTouch(){exports.isTouchDevice=isTouchDevice=true;window.removeEventListener('touchstart',onFirstTouch,false)},false);var _cursor_uris_supported=null;function supportsCursorURIs(){if(_cursor_uris_supported===null){try{var target=document.createElement('canvas');target.style.cursor='url("data:image/x-icon;base64,AAACAAEACAgAAAIAAgA4AQAAFgAAACgAAAAIAAAAEAAAAAEAIAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAA==") 2 2, default';if(target.style.cursor){Log.Info('Data URI scheme cursor supported');_cursor_uris_supported=true}else{Log.Warn('Data URI scheme cursor not supported');_cursor_uris_supported=false}}catch(exc){Log.Error('Data URI scheme cursor test exception: '+exc);_cursor_uris_supported=false}}return _cursor_uris_supported};function isMac(){return navigator&&!!/mac/i.exec(navigator.platform)}function isIE(){return navigator&&!!/trident/i.exec(navigator.userAgent)}function isEdge(){return navigator&&!!/edge/i.exec(navigator.userAgent)}function isWindows(){return navigator&&!!/win/i.exec(navigator.platform)}function isIOS(){return navigator&&(!!/ipad/i.exec(navigator.platform)||!!/iphone/i.exec(navigator.platform)||!!/ipod/i.exec(navigator.platform))}'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.getPointerEvent=getPointerEvent;exports.stopEvent=stopEvent;exports.setCapture=setCapture;exports.releaseCapture=releaseCapture;/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 *//*
 * Cross-browser event and position routines
 */function getPointerEvent(e){return e.changedTouches?e.changedTouches[0]:e.touches?e.touches[0]:e};function stopEvent(e){e.stopPropagation();e.preventDefault()};// Emulate Element.setCapture() when not supported
var _captureRecursion=false;var _captureElem=null;function _captureProxy(e){// Recursion protection as we'll see our own event
if(_captureRecursion)return;// Clone the event as we cannot dispatch an already dispatched event
var newEv=new e.constructor(e.type,e);_captureRecursion=true;_captureElem.dispatchEvent(newEv);_captureRecursion=false;// Avoid double events
e.stopPropagation();// Respect the wishes of the redirected event handlers
if(newEv.defaultPrevented){e.preventDefault()}// Implicitly release the capture on button release
if(e.type==='mouseup'){releaseCapture()}};// Follow cursor style of target element
function _captureElemChanged(){var captureElem=document.getElementById('noVNC_mouse_capture_elem');captureElem.style.cursor=window.getComputedStyle(_captureElem).cursor};var _captureObserver=new MutationObserver(_captureElemChanged);var _captureIndex=0;function setCapture(elem){if(elem.setCapture){elem.setCapture();// IE releases capture on 'click' events which might not trigger
elem.addEventListener('mouseup',releaseCapture)}else{// Release any existing capture in case this method is
// called multiple times without coordination
releaseCapture();var captureElem=document.getElementById('noVNC_mouse_capture_elem');if(captureElem===null){captureElem=document.createElement('div');captureElem.id='noVNC_mouse_capture_elem';captureElem.style.position='fixed';captureElem.style.top='0px';captureElem.style.left='0px';captureElem.style.width='100%';captureElem.style.height='100%';captureElem.style.zIndex=10000;captureElem.style.display='none';document.body.appendChild(captureElem);// This is to make sure callers don't get confused by having
// our blocking element as the target
captureElem.addEventListener('contextmenu',_captureProxy);captureElem.addEventListener('mousemove',_captureProxy);captureElem.addEventListener('mouseup',_captureProxy)}_captureElem=elem;_captureIndex++;// Track cursor and get initial cursor
_captureObserver.observe(elem,{attributes:true});_captureElemChanged();captureElem.style.display='';// We listen to events on window in order to keep tracking if it
// happens to leave the viewport
window.addEventListener('mousemove',_captureProxy);window.addEventListener('mouseup',_captureProxy)}};function releaseCapture(){if(document.releaseCapture){document.releaseCapture()}else{if(!_captureElem){return}// There might be events already queued, so we need to wait for
// them to flush. E.g. contextmenu in Microsoft Edge
window.setTimeout(function(expected){// Only clear it if it's the expected grab (i.e. no one
// else has initiated a new grab)
if(_captureIndex===expected){_captureElem=null}},0,_captureIndex);_captureObserver.disconnect();var captureElem=document.getElementById('noVNC_mouse_capture_elem');captureElem.style.display='none';window.removeEventListener('mousemove',_captureProxy);window.removeEventListener('mouseup',_captureProxy)}};'use strict';Object.defineProperty(exports,'__esModule',{value:true});/*
 * noVNC: HTML5 VNC client
 * Copyright 2017 Pierre Ossman for Cendio AB
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 */var EventTargetMixin={_listeners:null,addEventListener:function addEventListener(type,callback){if(!this._listeners){this._listeners=new Map}if(!this._listeners.has(type)){this._listeners.set(type,new Set)}this._listeners.get(type).add(callback)},removeEventListener:function removeEventListener(type,callback){if(!this._listeners||!this._listeners.has(type)){return}this._listeners.get(type).delete(callback)},dispatchEvent:function dispatchEvent(event){if(!this._listeners||!this._listeners.has(event.type)){return true}this._listeners.get(event.type).forEach(function(callback){callback.call(this,event)},this);return!event.defaultPrevented}};exports.default=EventTargetMixin;'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.init_logging=init_logging;exports.get_logging=get_logging;/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 *//*
 * Logging/debug routines
 */var _log_level='warn';var Debug=function Debug(msg){};var Info=function Info(msg){};var Warn=function Warn(msg){};var Error=function Error(msg){};function init_logging(level){if(typeof level==='undefined'){level=_log_level}else{_log_level=level}exports.Debug=Debug=exports.Info=Info=exports.Warn=Warn=exports.Error=Error=function Error(msg){};if(typeof window.console!=='undefined'){switch(level){case'debug':exports.Debug=Debug=console.debug.bind(window.console);case'info':exports.Info=Info=console.info.bind(window.console);case'warn':exports.Warn=Warn=console.warn.bind(window.console);case'error':exports.Error=Error=console.error.bind(window.console);case'none':break;default:throw new Error('invalid logging type \''+level+'\'');}}};function get_logging(){return _log_level};exports.Debug=Debug;exports.Info=Info;exports.Warn=Warn;exports.Error=Error;// Initialize logging level
init_logging();'use strict';/*
 * noVNC: HTML5 VNC client
 * Copyright 2017 Pierre Ossman for noVNC
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 *//* Polyfills to provide new APIs in old browsers *//* Object.assign() (taken from MDN) */if(typeof Object.assign!='function'){// Must be writable: true, enumerable: false, configurable: true
Object.defineProperty(Object,'assign',{value:function assign(target,varArgs){// .length of function is 2
'use strict';if(target==null){// TypeError if undefined or null
throw new TypeError('Cannot convert undefined or null to object')}var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){// Skip over if undefined or null
for(var nextKey in nextSource){// Avoid bugs when hasOwnProperty is shadowed
if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey]}}}}return to},writable:true,configurable:true})}/* CustomEvent constructor (taken from MDN) */(function(){function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}CustomEvent.prototype=window.Event.prototype;if(typeof window.CustomEvent!=='function'){window.CustomEvent=CustomEvent}})();'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.decodeUTF8=decodeUTF8;/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 *//*
 * Decode from UTF-8
 */function decodeUTF8(utf8string){'use strict';return decodeURIComponent(escape(utf8string))};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=DES;/*
 * Ported from Flashlight VNC ActionScript implementation:
 *     http://www.wizhelp.com/flashlight-vnc/
 *
 * Full attribution follows:
 *
 * -------------------------------------------------------------------------
 *
 * This DES class has been extracted from package Acme.Crypto for use in VNC.
 * The unnecessary odd parity code has been removed.
 *
 * These changes are:
 *  Copyright (C) 1999 AT&T Laboratories Cambridge.  All Rights Reserved.
 *
 * This software is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 *

 * DesCipher - the DES encryption method
 *
 * The meat of this code is by Dave Zimmerman <dzimm@widget.com>, and is:
 *
 * Copyright (c) 1996 Widget Workshop, Inc. All Rights Reserved.
 *
 * Permission to use, copy, modify, and distribute this software
 * and its documentation for NON-COMMERCIAL or COMMERCIAL purposes and
 * without fee is hereby granted, provided that this copyright notice is kept
 * intact.
 *
 * WIDGET WORKSHOP MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE SUITABILITY
 * OF THE SOFTWARE, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED
 * TO THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 * PARTICULAR PURPOSE, OR NON-INFRINGEMENT. WIDGET WORKSHOP SHALL NOT BE LIABLE
 * FOR ANY DAMAGES SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR
 * DISTRIBUTING THIS SOFTWARE OR ITS DERIVATIVES.
 *
 * THIS SOFTWARE IS NOT DESIGNED OR INTENDED FOR USE OR RESALE AS ON-LINE
 * CONTROL EQUIPMENT IN HAZARDOUS ENVIRONMENTS REQUIRING FAIL-SAFE
 * PERFORMANCE, SUCH AS IN THE OPERATION OF NUCLEAR FACILITIES, AIRCRAFT
 * NAVIGATION OR COMMUNICATION SYSTEMS, AIR TRAFFIC CONTROL, DIRECT LIFE
 * SUPPORT MACHINES, OR WEAPONS SYSTEMS, IN WHICH THE FAILURE OF THE
 * SOFTWARE COULD LEAD DIRECTLY TO DEATH, PERSONAL INJURY, OR SEVERE
 * PHYSICAL OR ENVIRONMENTAL DAMAGE ("HIGH RISK ACTIVITIES").  WIDGET WORKSHOP
 * SPECIFICALLY DISCLAIMS ANY EXPRESS OR IMPLIED WARRANTY OF FITNESS FOR
 * HIGH RISK ACTIVITIES.
 *
 *
 * The rest is:
 *
 * Copyright (C) 1996 by Jef Poskanzer <jef@acme.com>.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 * Visit the ACME Labs Java page for up-to-date versions of this and other
 * fine Java utilities: http://www.acme.com/java/
 */function DES(passwd){'use strict';// Tables, permutations, S-boxes, etc.
var PC2=[13,16,10,23,0,4,2,27,14,5,20,9,22,18,11,3,25,7,15,6,26,19,12,1,40,51,30,36,46,54,29,39,50,44,32,47,43,48,38,55,33,52,45,41,49,35,28,31],totrot=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],z=0,a,b,c,d,e,f,SP1,SP2,SP3,SP4,SP5,SP6,SP7,SP8,keys=[];a=1<<16;b=1<<24;c=a|b;d=1<<2;e=1<<10;f=d|e;SP1=[c|e,z|z,a|z,c|f,c|d,a|f,z|d,a|z,z|e,c|e,c|f,z|e,b|f,c|d,b|z,z|d,z|f,b|e,b|e,a|e,a|e,c|z,c|z,b|f,a|d,b|d,b|d,a|d,z|z,z|f,a|f,b|z,a|z,c|f,z|d,c|z,c|e,b|z,b|z,z|e,c|d,a|z,a|e,b|d,z|e,z|d,b|f,a|f,c|f,a|d,c|z,b|f,b|d,z|f,a|f,c|e,z|f,b|e,b|e,z|z,a|d,a|e,z|z,c|d];a=1<<20;b=1<<31;c=a|b;d=1<<5;e=1<<15;f=d|e;SP2=[c|f,b|e,z|e,a|f,a|z,z|d,c|d,b|f,b|d,c|f,c|e,b|z,b|e,a|z,z|d,c|d,a|e,a|d,b|f,z|z,b|z,z|e,a|f,c|z,a|d,b|d,z|z,a|e,z|f,c|e,c|z,z|f,z|z,a|f,c|d,a|z,b|f,c|z,c|e,z|e,c|z,b|e,z|d,c|f,a|f,z|d,z|e,b|z,z|f,c|e,a|z,b|d,a|d,b|f,b|d,a|d,a|e,z|z,b|e,z|f,b|z,c|d,c|f,a|e];a=1<<17;b=1<<27;c=a|b;d=1<<3;e=1<<9;f=d|e;SP3=[z|f,c|e,z|z,c|d,b|e,z|z,a|f,b|e,a|d,b|d,b|d,a|z,c|f,a|d,c|z,z|f,b|z,z|d,c|e,z|e,a|e,c|z,c|d,a|f,b|f,a|e,a|z,b|f,z|d,c|f,z|e,b|z,c|e,b|z,a|d,z|f,a|z,c|e,b|e,z|z,z|e,a|d,c|f,b|e,b|d,z|e,z|z,c|d,b|f,a|z,b|z,c|f,z|d,a|f,a|e,b|d,c|z,b|f,z|f,c|z,a|f,z|d,c|d,a|e];a=1<<13;b=1<<23;c=a|b;d=1<<0;e=1<<7;f=d|e;SP4=[c|d,a|f,a|f,z|e,c|e,b|f,b|d,a|d,z|z,c|z,c|z,c|f,z|f,z|z,b|e,b|d,z|d,a|z,b|z,c|d,z|e,b|z,a|d,a|e,b|f,z|d,a|e,b|e,a|z,c|e,c|f,z|f,b|e,b|d,c|z,c|f,z|f,z|z,z|z,c|z,a|e,b|e,b|f,z|d,c|d,a|f,a|f,z|e,c|f,z|f,z|d,a|z,b|d,a|d,c|e,b|f,a|d,a|e,b|z,c|d,z|e,b|z,a|z,c|e];a=1<<25;b=1<<30;c=a|b;d=1<<8;e=1<<19;f=d|e;SP5=[z|d,a|f,a|e,c|d,z|e,z|d,b|z,a|e,b|f,z|e,a|d,b|f,c|d,c|e,z|f,b|z,a|z,b|e,b|e,z|z,b|d,c|f,c|f,a|d,c|e,b|d,z|z,c|z,a|f,a|z,c|z,z|f,z|e,c|d,z|d,a|z,b|z,a|e,c|d,b|f,a|d,b|z,c|e,a|f,b|f,z|d,a|z,c|e,c|f,z|f,c|z,c|f,a|e,z|z,b|e,c|z,z|f,a|d,b|d,z|e,z|z,b|e,a|f,b|d];a=1<<22;b=1<<29;c=a|b;d=1<<4;e=1<<14;f=d|e;SP6=[b|d,c|z,z|e,c|f,c|z,z|d,c|f,a|z,b|e,a|f,a|z,b|d,a|d,b|e,b|z,z|f,z|z,a|d,b|f,z|e,a|e,b|f,z|d,c|d,c|d,z|z,a|f,c|e,z|f,a|e,c|e,b|z,b|e,z|d,c|d,a|e,c|f,a|z,z|f,b|d,a|z,b|e,b|z,z|f,b|d,c|f,a|e,c|z,a|f,c|e,z|z,c|d,z|d,z|e,c|z,a|f,z|e,a|d,b|f,z|z,c|e,b|z,a|d,b|f];a=1<<21;b=1<<26;c=a|b;d=1<<1;e=1<<11;f=d|e;SP7=[a|z,c|d,b|f,z|z,z|e,b|f,a|f,c|e,c|f,a|z,z|z,b|d,z|d,b|z,c|d,z|f,b|e,a|f,a|d,b|e,b|d,c|z,c|e,a|d,c|z,z|e,z|f,c|f,a|e,z|d,b|z,a|e,b|z,a|e,a|z,b|f,b|f,c|d,c|d,z|d,a|d,b|z,b|e,a|z,c|e,z|f,a|f,c|e,z|f,b|d,c|f,c|z,a|e,z|z,z|d,c|f,z|z,a|f,c|z,z|e,b|d,b|e,z|e,a|d];a=1<<18;b=1<<28;c=a|b;d=1<<6;e=1<<12;f=d|e;SP8=[b|f,z|e,a|z,c|f,b|z,b|f,z|d,b|z,a|d,c|z,c|f,a|e,c|e,a|f,z|e,z|d,c|z,b|d,b|e,z|f,a|e,a|d,c|d,c|e,z|f,z|z,z|z,c|d,b|d,b|e,a|f,a|z,a|f,a|z,c|e,z|e,z|d,c|d,z|e,a|f,b|e,z|d,b|d,c|z,c|d,b|z,a|z,b|f,z|z,c|f,a|d,b|d,c|z,b|e,b|f,z|z,c|f,a|e,a|e,z|f,z|f,a|d,b|z,c|e];// Set the key.
function setKeys(keyBlock){var i,j,l,m,n,o,pc1m=[],pcr=[],kn=[],raw0,raw1,rawi,KnLi;for(j=0,l=56;j<56;++j,l-=8){l+=l<-5?65:l<-3?31:l<-1?63:l===27?35:0;// PC1
m=l&7;pc1m[j]=(keyBlock[l>>>3]&1<<m)!==0?1:0}for(i=0;i<16;++i){m=i<<1;n=m+1;kn[m]=kn[n]=0;for(o=28;o<59;o+=28){for(j=o-28;j<o;++j){l=j+totrot[i];if(l<o){pcr[j]=pc1m[l]}else{pcr[j]=pc1m[l-28]}}}for(j=0;j<24;++j){if(pcr[PC2[j]]!==0){kn[m]|=1<<23-j}if(pcr[PC2[j+24]]!==0){kn[n]|=1<<23-j}}}// cookey
for(i=0,rawi=0,KnLi=0;i<16;++i){raw0=kn[rawi++];raw1=kn[rawi++];keys[KnLi]=(raw0&16515072)<<6;keys[KnLi]|=(raw0&4032)<<10;keys[KnLi]|=(raw1&16515072)>>>10;keys[KnLi]|=(raw1&4032)>>>6;++KnLi;keys[KnLi]=(raw0&258048)<<12;keys[KnLi]|=(raw0&63)<<16;keys[KnLi]|=(raw1&258048)>>>4;keys[KnLi]|=raw1&63;++KnLi}}// Encrypt 8 bytes of text
function enc8(text){var i=0,b=text.slice(),fval,keysi=0,l,r,x;// left, right, accumulator
// Squash 8 bytes to 2 ints
l=b[i++]<<24|b[i++]<<16|b[i++]<<8|b[i++];r=b[i++]<<24|b[i++]<<16|b[i++]<<8|b[i++];x=(l>>>4^r)&252645135;r^=x;l^=x<<4;x=(l>>>16^r)&65535;r^=x;l^=x<<16;x=(r>>>2^l)&858993459;l^=x;r^=x<<2;x=(r>>>8^l)&16711935;l^=x;r^=x<<8;r=r<<1|r>>>31&1;x=(l^r)&2863311530;l^=x;r^=x;l=l<<1|l>>>31&1;for(i=0;i<8;++i){x=r<<28|r>>>4;x^=keys[keysi++];fval=SP7[x&63];fval|=SP5[x>>>8&63];fval|=SP3[x>>>16&63];fval|=SP1[x>>>24&63];x=r^keys[keysi++];fval|=SP8[x&63];fval|=SP6[x>>>8&63];fval|=SP4[x>>>16&63];fval|=SP2[x>>>24&63];l^=fval;x=l<<28|l>>>4;x^=keys[keysi++];fval=SP7[x&63];fval|=SP5[x>>>8&63];fval|=SP3[x>>>16&63];fval|=SP1[x>>>24&63];x=l^keys[keysi++];fval|=SP8[x&63];fval|=SP6[x>>>8&63];fval|=SP4[x>>>16&63];fval|=SP2[x>>>24&63];r^=fval}r=r<<31|r>>>1;x=(l^r)&2863311530;l^=x;r^=x;l=l<<31|l>>>1;x=(l>>>8^r)&16711935;r^=x;l^=x<<8;x=(l>>>2^r)&858993459;r^=x;l^=x<<2;x=(r>>>16^l)&65535;l^=x;r^=x<<16;x=(r>>>4^l)&252645135;l^=x;r^=x<<4;// Spread ints to bytes
x=[r,l];for(i=0;i<8;i++){b[i]=(x[i>>>2]>>>8*(3-i%4))%256;if(b[i]<0){b[i]+=256}// unsigned
}return b}// Encrypt 16 bytes of text using passwd as key
function encrypt(t){return enc8(t.slice(0,8)).concat(enc8(t.slice(8,16)))}setKeys(passwd);// Setup keys
return{'encrypt':encrypt};// Public interface
};// function DES
'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=Display;var _logging=require('./util/logging.js');var Log=_interopRequireWildcard(_logging);var _base=require('./base64.js');var _base2=_interopRequireDefault(_base);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Copyright (C) 2015 Samuel Mannehed for Cendio AB
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 */function Display(target){this._drawCtx=null;this._c_forceCanvas=false;this._renderQ=[];// queue drawing actions for in-oder rendering
this._flushing=false;// the full frame buffer (logical canvas) size
this._fb_width=0;this._fb_height=0;this._prevDrawStyle='';this._tile=null;this._tile16x16=null;this._tile_x=0;this._tile_y=0;Log.Debug('>> Display.constructor');// The visible canvas
this._target=target;if(!this._target){throw new Error('Target must be set')}if(typeof this._target==='string'){throw new Error('target must be a DOM element')}if(!this._target.getContext){throw new Error('no getContext method')}this._targetCtx=this._target.getContext('2d');// the visible canvas viewport (i.e. what actually gets seen)
this._viewportLoc={'x':0,'y':0,'w':this._target.width,'h':this._target.height};// The hidden canvas, where we do the actual rendering
this._backbuffer=document.createElement('canvas');this._drawCtx=this._backbuffer.getContext('2d');this._damageBounds={left:0,top:0,right:this._backbuffer.width,bottom:this._backbuffer.height};Log.Debug('User Agent: '+navigator.userAgent);this.clear();// Check canvas features
if(!('createImageData'in this._drawCtx)){throw new Error('Canvas does not support createImageData')}this._tile16x16=this._drawCtx.createImageData(16,16);Log.Debug('<< Display.constructor')};var SUPPORTS_IMAGEDATA_CONSTRUCTOR=false;try{new ImageData(new Uint8ClampedArray(4),1,1);SUPPORTS_IMAGEDATA_CONSTRUCTOR=true}catch(ex){// ignore failure
}Display.prototype={// ===== PROPERTIES =====
_scale:1,get scale(){return this._scale},set scale(scale){this._rescale(scale)},_clipViewport:false,get clipViewport(){return this._clipViewport},set clipViewport(viewport){this._clipViewport=viewport;// May need to readjust the viewport dimensions
var vp=this._viewportLoc;this.viewportChangeSize(vp.w,vp.h);this.viewportChangePos(0,0)},get width(){return this._fb_width},get height(){return this._fb_height},logo:null,// ===== EVENT HANDLERS =====
onflush:function onflush(){},// A flush request has finished
// ===== PUBLIC METHODS =====
viewportChangePos:function viewportChangePos(deltaX,deltaY){var vp=this._viewportLoc;deltaX=Math.floor(deltaX);deltaY=Math.floor(deltaY);if(!this._clipViewport){deltaX=-vp.w;// clamped later of out of bounds
deltaY=-vp.h}var vx2=vp.x+vp.w-1;var vy2=vp.y+vp.h-1;// Position change
if(deltaX<0&&vp.x+deltaX<0){deltaX=-vp.x}if(vx2+deltaX>=this._fb_width){deltaX-=vx2+deltaX-this._fb_width+1}if(vp.y+deltaY<0){deltaY=-vp.y}if(vy2+deltaY>=this._fb_height){deltaY-=vy2+deltaY-this._fb_height+1}if(deltaX===0&&deltaY===0){return}Log.Debug('viewportChange deltaX: '+deltaX+', deltaY: '+deltaY);vp.x+=deltaX;vp.y+=deltaY;this._damage(vp.x,vp.y,vp.w,vp.h);this.flip()},viewportChangeSize:function viewportChangeSize(width,height){if(!this._clipViewport||typeof width==='undefined'||typeof height==='undefined'){Log.Debug('Setting viewport to full display region');width=this._fb_width;height=this._fb_height}if(width>this._fb_width){width=this._fb_width}if(height>this._fb_height){height=this._fb_height}var vp=this._viewportLoc;if(vp.w!==width||vp.h!==height){vp.w=width;vp.h=height;var canvas=this._target;canvas.width=width;canvas.height=height;// The position might need to be updated if we've grown
this.viewportChangePos(0,0);this._damage(vp.x,vp.y,vp.w,vp.h);this.flip();// Update the visible size of the target canvas
this._rescale(this._scale)}},absX:function absX(x){return x/this._scale+this._viewportLoc.x},absY:function absY(y){return y/this._scale+this._viewportLoc.y},resize:function resize(width,height){this._prevDrawStyle='';this._fb_width=width;this._fb_height=height;var canvas=this._backbuffer;if(canvas.width!==width||canvas.height!==height){// We have to save the canvas data since changing the size will clear it
var saveImg=null;if(canvas.width>0&&canvas.height>0){saveImg=this._drawCtx.getImageData(0,0,canvas.width,canvas.height)}if(canvas.width!==width){canvas.width=width}if(canvas.height!==height){canvas.height=height}if(saveImg){this._drawCtx.putImageData(saveImg,0,0)}}// Readjust the viewport as it may be incorrectly sized
// and positioned
var vp=this._viewportLoc;this.viewportChangeSize(vp.w,vp.h);this.viewportChangePos(0,0)},// Track what parts of the visible canvas that need updating
_damage:function _damage(x,y,w,h){if(x<this._damageBounds.left){this._damageBounds.left=x}if(y<this._damageBounds.top){this._damageBounds.top=y}if(x+w>this._damageBounds.right){this._damageBounds.right=x+w}if(y+h>this._damageBounds.bottom){this._damageBounds.bottom=y+h}},// Update the visible canvas with the contents of the
// rendering canvas
flip:function flip(from_queue){if(this._renderQ.length!==0&&!from_queue){this._renderQ_push({'type':'flip'})}else{var x,y,vx,vy,w,h;x=this._damageBounds.left;y=this._damageBounds.top;w=this._damageBounds.right-x;h=this._damageBounds.bottom-y;vx=x-this._viewportLoc.x;vy=y-this._viewportLoc.y;if(vx<0){w+=vx;x-=vx;vx=0}if(vy<0){h+=vy;y-=vy;vy=0}if(vx+w>this._viewportLoc.w){w=this._viewportLoc.w-vx}if(vy+h>this._viewportLoc.h){h=this._viewportLoc.h-vy}if(w>0&&h>0){// FIXME: We may need to disable image smoothing here
//        as well (see copyImage()), but we haven't
//        noticed any problem yet.
this._targetCtx.drawImage(this._backbuffer,x,y,w,h,vx,vy,w,h)}this._damageBounds.left=this._damageBounds.top=65535;this._damageBounds.right=this._damageBounds.bottom=0}},clear:function clear(){if(this._logo){this.resize(this._logo.width,this._logo.height);this.imageRect(0,0,this._logo.type,this._logo.data)}else{this.resize(240,20);this._drawCtx.clearRect(0,0,this._fb_width,this._fb_height)}this.flip()},pending:function pending(){return this._renderQ.length>0},flush:function flush(){if(this._renderQ.length===0){this.onflush()}else{this._flushing=true}},fillRect:function fillRect(x,y,width,height,color,from_queue){if(this._renderQ.length!==0&&!from_queue){this._renderQ_push({'type':'fill','x':x,'y':y,'width':width,'height':height,'color':color})}else{this._setFillColor(color);this._drawCtx.fillRect(x,y,width,height);this._damage(x,y,width,height)}},copyImage:function copyImage(old_x,old_y,new_x,new_y,w,h,from_queue){if(this._renderQ.length!==0&&!from_queue){this._renderQ_push({'type':'copy','old_x':old_x,'old_y':old_y,'x':new_x,'y':new_y,'width':w,'height':h})}else{// Due to this bug among others [1] we need to disable the image-smoothing to
// avoid getting a blur effect when copying data.
//
// 1. https://bugzilla.mozilla.org/show_bug.cgi?id=1194719
//
// We need to set these every time since all properties are reset
// when the the size is changed
this._drawCtx.mozImageSmoothingEnabled=false;this._drawCtx.webkitImageSmoothingEnabled=false;this._drawCtx.msImageSmoothingEnabled=false;this._drawCtx.imageSmoothingEnabled=false;this._drawCtx.drawImage(this._backbuffer,old_x,old_y,w,h,new_x,new_y,w,h);this._damage(new_x,new_y,w,h)}},imageRect:function imageRect(x,y,mime,arr){var img=new Image;img.src='data: '+mime+';base64,'+_base2.default.encode(arr);this._renderQ_push({'type':'img','img':img,'x':x,'y':y})},// start updating a tile
startTile:function startTile(x,y,width,height,color){this._tile_x=x;this._tile_y=y;if(width===16&&height===16){this._tile=this._tile16x16}else{this._tile=this._drawCtx.createImageData(width,height)}var red=color[2];var green=color[1];var blue=color[0];var data=this._tile.data;for(var i=0;i<width*height*4;i+=4){data[i]=red;data[i+1]=green;data[i+2]=blue;data[i+3]=255}},// update sub-rectangle of the current tile
subTile:function subTile(x,y,w,h,color){var red=color[2];var green=color[1];var blue=color[0];var xend=x+w;var yend=y+h;var data=this._tile.data;var width=this._tile.width;for(var j=y;j<yend;j++){for(var i=x;i<xend;i++){var p=(i+j*width)*4;data[p]=red;data[p+1]=green;data[p+2]=blue;data[p+3]=255}}},// draw the current tile to the screen
finishTile:function finishTile(){this._drawCtx.putImageData(this._tile,this._tile_x,this._tile_y);this._damage(this._tile_x,this._tile_y,this._tile.width,this._tile.height)},blitImage:function blitImage(x,y,width,height,arr,offset,from_queue){if(this._renderQ.length!==0&&!from_queue){// NB(directxman12): it's technically more performant here to use preallocated arrays,
// but it's a lot of extra work for not a lot of payoff -- if we're using the render queue,
// this probably isn't getting called *nearly* as much
var new_arr=new Uint8Array(width*height*4);new_arr.set(new Uint8Array(arr.buffer,0,new_arr.length));this._renderQ_push({'type':'blit','data':new_arr,'x':x,'y':y,'width':width,'height':height})}else{this._bgrxImageData(x,y,width,height,arr,offset)}},blitRgbImage:function blitRgbImage(x,y,width,height,arr,offset,from_queue){if(this._renderQ.length!==0&&!from_queue){// NB(directxman12): it's technically more performant here to use preallocated arrays,
// but it's a lot of extra work for not a lot of payoff -- if we're using the render queue,
// this probably isn't getting called *nearly* as much
var new_arr=new Uint8Array(width*height*3);new_arr.set(new Uint8Array(arr.buffer,0,new_arr.length));this._renderQ_push({'type':'blitRgb','data':new_arr,'x':x,'y':y,'width':width,'height':height})}else{this._rgbImageData(x,y,width,height,arr,offset)}},blitRgbxImage:function blitRgbxImage(x,y,width,height,arr,offset,from_queue){if(this._renderQ.length!==0&&!from_queue){// NB(directxman12): it's technically more performant here to use preallocated arrays,
// but it's a lot of extra work for not a lot of payoff -- if we're using the render queue,
// this probably isn't getting called *nearly* as much
var new_arr=new Uint8Array(width*height*4);new_arr.set(new Uint8Array(arr.buffer,0,new_arr.length));this._renderQ_push({'type':'blitRgbx','data':new_arr,'x':x,'y':y,'width':width,'height':height})}else{this._rgbxImageData(x,y,width,height,arr,offset)}},drawImage:function drawImage(img,x,y){this._drawCtx.drawImage(img,x,y);this._damage(x,y,img.width,img.height)},changeCursor:function changeCursor(pixels,mask,hotx,hoty,w,h){Display.changeCursor(this._target,pixels,mask,hotx,hoty,w,h)},defaultCursor:function defaultCursor(){this._target.style.cursor='default'},disableLocalCursor:function disableLocalCursor(){this._target.style.cursor='none'},autoscale:function autoscale(containerWidth,containerHeight){var vp=this._viewportLoc;var targetAspectRatio=containerWidth/containerHeight;var fbAspectRatio=vp.w/vp.h;var scaleRatio;if(fbAspectRatio>=targetAspectRatio){scaleRatio=containerWidth/vp.w}else{scaleRatio=containerHeight/vp.h}this._rescale(scaleRatio)},// ===== PRIVATE METHODS =====
_rescale:function _rescale(factor){this._scale=factor;var vp=this._viewportLoc;// NB(directxman12): If you set the width directly, or set the
//                   style width to a number, the canvas is cleared.
//                   However, if you set the style width to a string
//                   ('NNNpx'), the canvas is scaled without clearing.
var width=Math.round(factor*vp.w)+'px';var height=Math.round(factor*vp.h)+'px';if(this._target.style.width!==width||this._target.style.height!==height){this._target.style.width=width;this._target.style.height=height}},_setFillColor:function _setFillColor(color){var newStyle='rgb('+color[2]+','+color[1]+','+color[0]+')';if(newStyle!==this._prevDrawStyle){this._drawCtx.fillStyle=newStyle;this._prevDrawStyle=newStyle}},_rgbImageData:function _rgbImageData(x,y,width,height,arr,offset){var img=this._drawCtx.createImageData(width,height);var data=img.data;for(var i=0,j=offset;i<width*height*4;i+=4,j+=3){data[i]=arr[j];data[i+1]=arr[j+1];data[i+2]=arr[j+2];data[i+3]=255;// Alpha
}this._drawCtx.putImageData(img,x,y);this._damage(x,y,img.width,img.height)},_bgrxImageData:function _bgrxImageData(x,y,width,height,arr,offset){var img=this._drawCtx.createImageData(width,height);var data=img.data;for(var i=0,j=offset;i<width*height*4;i+=4,j+=4){data[i]=arr[j+2];data[i+1]=arr[j+1];data[i+2]=arr[j];data[i+3]=255;// Alpha
}this._drawCtx.putImageData(img,x,y);this._damage(x,y,img.width,img.height)},_rgbxImageData:function _rgbxImageData(x,y,width,height,arr,offset){// NB(directxman12): arr must be an Type Array view
var img;if(SUPPORTS_IMAGEDATA_CONSTRUCTOR){img=new ImageData(new Uint8ClampedArray(arr.buffer,arr.byteOffset,width*height*4),width,height)}else{img=this._drawCtx.createImageData(width,height);img.data.set(new Uint8ClampedArray(arr.buffer,arr.byteOffset,width*height*4))}this._drawCtx.putImageData(img,x,y);this._damage(x,y,img.width,img.height)},_renderQ_push:function _renderQ_push(action){this._renderQ.push(action);if(this._renderQ.length===1){// If this can be rendered immediately it will be, otherwise
// the scanner will wait for the relevant event
this._scan_renderQ()}},_resume_renderQ:function _resume_renderQ(){// "this" is the object that is ready, not the
// display object
this.removeEventListener('load',this._noVNC_display._resume_renderQ);this._noVNC_display._scan_renderQ()},_scan_renderQ:function _scan_renderQ(){var ready=true;while(ready&&this._renderQ.length>0){var a=this._renderQ[0];switch(a.type){case'flip':this.flip(true);break;case'copy':this.copyImage(a.old_x,a.old_y,a.x,a.y,a.width,a.height,true);break;case'fill':this.fillRect(a.x,a.y,a.width,a.height,a.color,true);break;case'blit':this.blitImage(a.x,a.y,a.width,a.height,a.data,0,true);break;case'blitRgb':this.blitRgbImage(a.x,a.y,a.width,a.height,a.data,0,true);break;case'blitRgbx':this.blitRgbxImage(a.x,a.y,a.width,a.height,a.data,0,true);break;case'img':if(a.img.complete){this.drawImage(a.img,a.x,a.y)}else{a.img._noVNC_display=this;a.img.addEventListener('load',this._resume_renderQ);// We need to wait for this image to 'load'
// to keep things in-order
ready=false}break;}if(ready){this._renderQ.shift()}}if(this._renderQ.length===0&&this._flushing){this._flushing=false;this.onflush()}}};// Class Methods
Display.changeCursor=function(target,pixels,mask,hotx,hoty,w,h){if(w===0||h===0){target.style.cursor='none';return}var cur=[];var y,x;for(y=0;y<h;y++){for(x=0;x<w;x++){var idx=y*Math.ceil(w/8)+Math.floor(x/8);var alpha=mask[idx]<<x%8&128?255:0;idx=(w*y+x)*4;cur.push(pixels[idx+2]);// red
cur.push(pixels[idx+1]);// green
cur.push(pixels[idx]);// blue
cur.push(alpha);// alpha
}}var canvas=document.createElement('canvas');var ctx=canvas.getContext('2d');canvas.width=w;canvas.height=h;var img;if(SUPPORTS_IMAGEDATA_CONSTRUCTOR){img=new ImageData(new Uint8ClampedArray(cur),w,h)}else{img=ctx.createImageData(w,h);img.data.set(new Uint8ClampedArray(cur))}ctx.clearRect(0,0,w,h);ctx.putImageData(img,0,0);var url=canvas.toDataURL();target.style.cursor='url('+url+')'+hotx+' '+hoty+', default'};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.encodingName=encodingName;/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2017 Pierre Ossman for Cendio AB
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 */var encodings=exports.encodings={encodingRaw:0,encodingCopyRect:1,encodingRRE:2,encodingHextile:5,encodingTight:-260,pseudoEncodingQualityLevel9:-23,pseudoEncodingQualityLevel0:-32,pseudoEncodingDesktopSize:-223,pseudoEncodingLastRect:-224,pseudoEncodingCursor:-239,pseudoEncodingQEMUExtendedKeyEvent:-258,pseudoEncodingTightPNG:-260,pseudoEncodingExtendedDesktopSize:-308,pseudoEncodingXvp:-309,pseudoEncodingFence:-312,pseudoEncodingContinuousUpdates:-313,pseudoEncodingCompressLevel9:-247,pseudoEncodingCompressLevel0:-256};function encodingName(num){switch(num){case encodings.encodingRaw:return'Raw';case encodings.encodingCopyRect:return'CopyRect';case encodings.encodingRRE:return'RRE';case encodings.encodingHextile:return'Hextile';case encodings.encodingTight:return'Tight';default:return'[unknown encoding '+num+']';}}'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=Inflate;var _inflate2=require('../vendor/pako/lib/zlib/inflate.js');var _zstream=require('../vendor/pako/lib/zlib/zstream.js');var _zstream2=_interopRequireDefault(_zstream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Inflate.prototype={inflate:function inflate(data,flush,expected){this.strm.input=data;this.strm.avail_in=this.strm.input.length;this.strm.next_in=0;this.strm.next_out=0;// resize our output buffer if it's too small
// (we could just use multiple chunks, but that would cause an extra
// allocation each time to flatten the chunks)
if(expected>this.chunkSize){this.chunkSize=expected;this.strm.output=new Uint8Array(this.chunkSize)}this.strm.avail_out=this.chunkSize;(0,_inflate2.inflate)(this.strm,flush);return new Uint8Array(this.strm.output.buffer,0,this.strm.next_out)},reset:function reset(){(0,_inflate2.inflateReset)(this.strm)}};function Inflate(){this.strm=new _zstream2.default;this.chunkSize=1024*10*10;this.strm.output=new Uint8Array(this.chunkSize);this.windowBits=5;(0,_inflate2.inflateInit)(this.strm,this.windowBits)};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=RFB;var _logging=require('./util/logging.js');var Log=_interopRequireWildcard(_logging);var _strings=require('./util/strings.js');var _browser=require('./util/browser.js');var _eventtarget=require('./util/eventtarget.js');var _eventtarget2=_interopRequireDefault(_eventtarget);var _display=require('./display.js');var _display2=_interopRequireDefault(_display);var _keyboard=require('./input/keyboard.js');var _keyboard2=_interopRequireDefault(_keyboard);var _mouse=require('./input/mouse.js');var _mouse2=_interopRequireDefault(_mouse);var _websock=require('./websock.js');var _websock2=_interopRequireDefault(_websock);var _des=require('./des.js');var _des2=_interopRequireDefault(_des);var _keysym=require('./input/keysym.js');var _keysym2=_interopRequireDefault(_keysym);var _xtscancodes=require('./input/xtscancodes.js');var _xtscancodes2=_interopRequireDefault(_xtscancodes);var _inflator=require('./inflator.js');var _inflator2=_interopRequireDefault(_inflator);var _encodings=require('./encodings.js');require('./util/polyfill.js');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}/*jslint white: false, browser: true *//*global window, Util, Display, Keyboard, Mouse, Websock, Websock_native, Base64, DES, KeyTable, Inflator, XtScancode */// How many seconds to wait for a disconnect to finish
/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Copyright (C) 2017 Samuel Mannehed for Cendio AB
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 *
 * TIGHT decoder portion:
 * (c) 2012 Michael Tinglof, Joe Balaz, Les Piech (Mercuri.ca)
 */var DISCONNECT_TIMEOUT=3;function RFB(target,url,options){if(!target){throw Error('Must specify target')}if(!url){throw Error('Must specify URL')}this._target=target;this._url=url;// Connection details
options=options||{};this._rfb_credentials=options.credentials||{};this._shared='shared'in options?!!options.shared:true;this._repeaterID=options.repeaterID||'';// Internal state
this._rfb_connection_state='';this._rfb_init_state='';this._rfb_auth_scheme='';this._rfb_clean_disconnect=true;// Server capabilities
this._rfb_version=0;this._rfb_max_version=3.8;this._rfb_tightvnc=false;this._rfb_xvp_ver=0;this._fb_width=0;this._fb_height=0;this._fb_name='';this._capabilities={power:false};this._supportsFence=false;this._supportsContinuousUpdates=false;this._enabledContinuousUpdates=false;this._supportsSetDesktopSize=false;this._screen_id=0;this._screen_flags=0;this._qemuExtKeyEventSupported=false;// Internal objects
this._sock=null;// Websock object
this._display=null;// Display object
this._flushing=false;// Display flushing state
this._keyboard=null;// Keyboard input handler object
this._mouse=null;// Mouse input handler object
// Timers
this._disconnTimer=null;// disconnection timer
this._resizeTimeout=null;// resize rate limiting
// Decoder states and stats
this._encHandlers={};this._encStats={};this._FBU={rects:0,subrects:0,// RRE and HEXTILE
lines:0,// RAW
tiles:0,// HEXTILE
bytes:0,x:0,y:0,width:0,height:0,encoding:0,subencoding:-1,background:null,zlibs:[]// TIGHT zlib streams
};for(var i=0;i<4;i++){this._FBU.zlibs[i]=new _inflator2.default}this._destBuff=null;this._paletteBuff=new Uint8Array(1024);// 256 * 4 (max palette size * max bytes-per-pixel)
this._rre_chunk_sz=100;this._timing={last_fbu:0,fbu_total:0,fbu_total_cnt:0,full_fbu_total:0,full_fbu_cnt:0,fbu_rt_start:0,fbu_rt_total:0,fbu_rt_cnt:0,pixels:0};// Mouse state
this._mouse_buttonMask=0;this._mouse_arr=[];this._viewportDragging=false;this._viewportDragPos={};this._viewportHasMoved=false;// Bound event handlers
this._eventHandlers={focusCanvas:this._focusCanvas.bind(this),windowResize:this._windowResize.bind(this)};// main setup
Log.Debug('>> RFB.constructor');// Create DOM elements
this._screen=document.createElement('div');this._screen.style.display='flex';this._screen.style.width='100%';this._screen.style.height='100%';this._screen.style.overflow='auto';this._screen.style.backgroundColor='rgb(40, 40, 40)';this._canvas=document.createElement('canvas');this._canvas.style.margin='auto';// Some browsers add an outline on focus
this._canvas.style.outline='none';// IE miscalculates width without this :(
this._canvas.style.flexShrink='0';this._canvas.width=0;this._canvas.height=0;this._canvas.tabIndex=-1;this._screen.appendChild(this._canvas);// populate encHandlers with bound versions
this._encHandlers[_encodings.encodings.encodingRaw]=RFB.encodingHandlers.RAW.bind(this);this._encHandlers[_encodings.encodings.encodingCopyRect]=RFB.encodingHandlers.COPYRECT.bind(this);this._encHandlers[_encodings.encodings.encodingRRE]=RFB.encodingHandlers.RRE.bind(this);this._encHandlers[_encodings.encodings.encodingHextile]=RFB.encodingHandlers.HEXTILE.bind(this);this._encHandlers[_encodings.encodings.encodingTight]=RFB.encodingHandlers.TIGHT.bind(this);this._encHandlers[_encodings.encodings.pseudoEncodingDesktopSize]=RFB.encodingHandlers.DesktopSize.bind(this);this._encHandlers[_encodings.encodings.pseudoEncodingLastRect]=RFB.encodingHandlers.last_rect.bind(this);this._encHandlers[_encodings.encodings.pseudoEncodingCursor]=RFB.encodingHandlers.Cursor.bind(this);this._encHandlers[_encodings.encodings.pseudoEncodingQEMUExtendedKeyEvent]=RFB.encodingHandlers.QEMUExtendedKeyEvent.bind(this);this._encHandlers[_encodings.encodings.pseudoEncodingExtendedDesktopSize]=RFB.encodingHandlers.ExtendedDesktopSize.bind(this);// NB: nothing that needs explicit teardown should be done
// before this point, since this can throw an exception
try{this._display=new _display2.default(this._canvas)}catch(exc){Log.Error('Display exception: '+exc);throw exc}this._display.onflush=this._onFlush.bind(this);this._display.clear();this._keyboard=new _keyboard2.default(this._canvas);this._keyboard.onkeyevent=this._handleKeyEvent.bind(this);this._mouse=new _mouse2.default(this._canvas);this._mouse.onmousebutton=this._handleMouseButton.bind(this);this._mouse.onmousemove=this._handleMouseMove.bind(this);this._sock=new _websock2.default;this._sock.on('message',this._handle_message.bind(this));this._sock.on('open',function(){if(this._rfb_connection_state==='connecting'&&this._rfb_init_state===''){this._rfb_init_state='ProtocolVersion';Log.Debug('Starting VNC handshake')}else{this._fail('Unexpected server connection while '+this._rfb_connection_state)}}.bind(this));this._sock.on('close',function(e){Log.Debug('WebSocket on-close event');var msg='';if(e.code){msg='(code: '+e.code;if(e.reason){msg+=', reason: '+e.reason}msg+=')'}switch(this._rfb_connection_state){case'connecting':this._fail('Connection closed '+msg);break;case'connected':// Handle disconnects that were initiated server-side
this._updateConnectionState('disconnecting');this._updateConnectionState('disconnected');break;case'disconnecting':// Normal disconnection path
this._updateConnectionState('disconnected');break;case'disconnected':this._fail('Unexpected server disconnect '+'when already disconnected '+msg);break;default:this._fail('Unexpected server disconnect before connecting '+msg);break;}this._sock.off('close')}.bind(this));this._sock.on('error',function(e){Log.Warn('WebSocket on-error event')});// Slight delay of the actual connection so that the caller has
// time to set up callbacks
setTimeout(this._updateConnectionState.bind(this,'connecting'));Log.Debug('<< RFB.constructor')};RFB.prototype={// ===== PROPERTIES =====
dragViewport:false,focusOnClick:true,_viewOnly:false,get viewOnly(){return this._viewOnly},set viewOnly(viewOnly){this._viewOnly=viewOnly;if(this._rfb_connection_state==='connecting'||this._rfb_connection_state==='connected'){if(viewOnly){this._keyboard.ungrab();this._mouse.ungrab()}else{this._keyboard.grab();this._mouse.grab()}}},get capabilities(){return this._capabilities},get touchButton(){return this._mouse.touchButton},set touchButton(button){this._mouse.touchButton=button},_clipViewport:false,get clipViewport(){return this._clipViewport},set clipViewport(viewport){this._clipViewport=viewport;this._updateClip()},_scaleViewport:false,get scaleViewport(){return this._scaleViewport},set scaleViewport(scale){this._scaleViewport=scale;// Scaling trumps clipping, so we may need to adjust
// clipping when enabling or disabling scaling
if(scale&&this._clipViewport){this._updateClip()}this._updateScale();if(!scale&&this._clipViewport){this._updateClip()}},_resizeSession:false,get resizeSession(){return this._resizeSession},set resizeSession(resize){this._resizeSession=resize;if(resize){this._requestRemoteResize()}},// ===== PUBLIC METHODS =====
disconnect:function disconnect(){this._updateConnectionState('disconnecting');this._sock.off('error');this._sock.off('message');this._sock.off('open')},sendCredentials:function sendCredentials(creds){this._rfb_credentials=creds;setTimeout(this._init_msg.bind(this),0)},sendCtrlAltDel:function sendCtrlAltDel(){if(this._rfb_connection_state!=='connected'||this._viewOnly){return}Log.Info('Sending Ctrl-Alt-Del');this.sendKey(_keysym2.default.XK_Control_L,'ControlLeft',true);this.sendKey(_keysym2.default.XK_Alt_L,'AltLeft',true);this.sendKey(_keysym2.default.XK_Delete,'Delete',true);this.sendKey(_keysym2.default.XK_Delete,'Delete',false);this.sendKey(_keysym2.default.XK_Alt_L,'AltLeft',false);this.sendKey(_keysym2.default.XK_Control_L,'ControlLeft',false)},machineShutdown:function machineShutdown(){this._xvpOp(1,2)},machineReboot:function machineReboot(){this._xvpOp(1,3)},machineReset:function machineReset(){this._xvpOp(1,4)},// Send a key press. If 'down' is not specified then send a down key
// followed by an up key.
sendKey:function sendKey(keysym,code,down){if(this._rfb_connection_state!=='connected'||this._viewOnly){return}if(down===undefined){this.sendKey(keysym,code,true);this.sendKey(keysym,code,false);return}var scancode=_xtscancodes2.default[code];if(this._qemuExtKeyEventSupported&&scancode){// 0 is NoSymbol
keysym=keysym||0;Log.Info('Sending key ('+(down?'down':'up')+'): keysym '+keysym+', scancode '+scancode);RFB.messages.QEMUExtendedKeyEvent(this._sock,keysym,down,scancode)}else{if(!keysym){return}Log.Info('Sending keysym ('+(down?'down':'up')+'): '+keysym);RFB.messages.keyEvent(this._sock,keysym,down?1:0)}},focus:function focus(){this._canvas.focus()},blur:function blur(){this._canvas.blur()},clipboardPasteFrom:function clipboardPasteFrom(text){if(this._rfb_connection_state!=='connected'||this._viewOnly){return}RFB.messages.clientCutText(this._sock,text)},// ===== PRIVATE METHODS =====
_connect:function _connect(){Log.Debug('>> RFB.connect');Log.Info('connecting to '+this._url);try{// WebSocket.onopen transitions to the RFB init states
this._sock.open(this._url,['binary'])}catch(e){if(e.name==='SyntaxError'){this._fail('Invalid host or port ('+e+')')}else{this._fail('Error when opening socket ('+e+')')}}// Make our elements part of the page
this._target.appendChild(this._screen);// Monitor size changes of the screen
// FIXME: Use ResizeObserver, or hidden overflow
window.addEventListener('resize',this._eventHandlers.windowResize);// Always grab focus on some kind of click event
this._canvas.addEventListener('mousedown',this._eventHandlers.focusCanvas);this._canvas.addEventListener('touchstart',this._eventHandlers.focusCanvas);Log.Debug('<< RFB.connect')},_disconnect:function _disconnect(){Log.Debug('>> RFB.disconnect');this._canvas.removeEventListener('mousedown',this._eventHandlers.focusCanvas);this._canvas.removeEventListener('touchstart',this._eventHandlers.focusCanvas);window.removeEventListener('resize',this._eventHandlers.windowResize);this._keyboard.ungrab();this._mouse.ungrab();this._sock.close();this._print_stats();try{this._target.removeChild(this._screen)}catch(e){if(e.name==='NotFoundError'){// Some cases where the initial connection fails
// can disconnect before the _screen is created
}else{throw e}}clearTimeout(this._resizeTimeout);Log.Debug('<< RFB.disconnect')},_print_stats:function _print_stats(){var stats=this._encStats;Log.Info('Encoding stats for this connection:');Object.keys(stats).forEach(function(key){var s=stats[key];if(s[0]+s[1]>0){Log.Info('    '+(0,_encodings.encodingName)(key)+': '+s[0]+' rects')}});Log.Info('Encoding stats since page load:');Object.keys(stats).forEach(function(key){var s=stats[key];Log.Info('    '+(0,_encodings.encodingName)(key)+': '+s[1]+' rects')})},_focusCanvas:function _focusCanvas(event){// Respect earlier handlers' request to not do side-effects
if(event.defaultPrevented){return}if(!this.focusOnClick){return}this.focus()},_windowResize:function _windowResize(event){// If the window resized then our screen element might have
// as well. Update the viewport dimensions.
window.requestAnimationFrame(function(){this._updateClip();this._updateScale()}.bind(this));if(this._resizeSession){// Request changing the resolution of the remote display to
// the size of the local browser viewport.
// In order to not send multiple requests before the browser-resize
// is finished we wait 0.5 seconds before sending the request.
clearTimeout(this._resizeTimeout);this._resizeTimeout=setTimeout(this._requestRemoteResize.bind(this),500)}},// Update state of clipping in Display object, and make sure the
// configured viewport matches the current screen size
_updateClip:function _updateClip(){var cur_clip=this._display.clipViewport;var new_clip=this._clipViewport;if(this._scaleViewport){// Disable viewport clipping if we are scaling
new_clip=false}if(cur_clip!==new_clip){this._display.clipViewport=new_clip}if(new_clip){// When clipping is enabled, the screen is limited to
// the size of the container.
var size=this._screenSize();this._display.viewportChangeSize(size.w,size.h);this._fixScrollbars()}},_updateScale:function _updateScale(){if(!this._scaleViewport){this._display.scale=1}else{var size=this._screenSize();this._display.autoscale(size.w,size.h)}this._fixScrollbars()},// Requests a change of remote desktop size. This message is an extension
// and may only be sent if we have received an ExtendedDesktopSize message
_requestRemoteResize:function _requestRemoteResize(){clearTimeout(this._resizeTimeout);this._resizeTimeout=null;if(!this._resizeSession||this._viewOnly||!this._supportsSetDesktopSize){return}var size=this._screenSize();RFB.messages.setDesktopSize(this._sock,size.w,size.h,this._screen_id,this._screen_flags);Log.Debug('Requested new desktop size: '+size.w+'x'+size.h)},// Gets the the size of the available screen
_screenSize:function _screenSize(){return{w:this._screen.offsetWidth,h:this._screen.offsetHeight}},_fixScrollbars:function _fixScrollbars(){// This is a hack because Chrome screws up the calculation
// for when scrollbars are needed. So to fix it we temporarily
// toggle them off and on.
var orig=this._screen.style.overflow;this._screen.style.overflow='hidden';// Force Chrome to recalculate the layout by asking for
// an element's dimensions
this._screen.getBoundingClientRect();this._screen.style.overflow=orig},/*
     * Connection states:
     *   connecting
     *   connected
     *   disconnecting
     *   disconnected - permanent state
     */_updateConnectionState:function _updateConnectionState(state){var oldstate=this._rfb_connection_state;if(state===oldstate){Log.Debug('Already in state \''+state+'\', ignoring');return}// The 'disconnected' state is permanent for each RFB object
if(oldstate==='disconnected'){Log.Error('Tried changing state of a disconnected RFB object');return}// Ensure proper transitions before doing anything
switch(state){case'connected':if(oldstate!=='connecting'){Log.Error('Bad transition to connected state, '+'previous connection state: '+oldstate);return}break;case'disconnected':if(oldstate!=='disconnecting'){Log.Error('Bad transition to disconnected state, '+'previous connection state: '+oldstate);return}break;case'connecting':if(oldstate!==''){Log.Error('Bad transition to connecting state, '+'previous connection state: '+oldstate);return}break;case'disconnecting':if(oldstate!=='connected'&&oldstate!=='connecting'){Log.Error('Bad transition to disconnecting state, '+'previous connection state: '+oldstate);return}break;default:Log.Error('Unknown connection state: '+state);return;}// State change actions
this._rfb_connection_state=state;var smsg='New state \''+state+'\', was \''+oldstate+'\'.';Log.Debug(smsg);if(this._disconnTimer&&state!=='disconnecting'){Log.Debug('Clearing disconnect timer');clearTimeout(this._disconnTimer);this._disconnTimer=null;// make sure we don't get a double event
this._sock.off('close')}switch(state){case'connecting':this._connect();break;case'connected':var event=new CustomEvent('connect',{detail:{}});this.dispatchEvent(event);break;case'disconnecting':this._disconnect();this._disconnTimer=setTimeout(function(){Log.Error('Disconnection timed out.');this._updateConnectionState('disconnected')}.bind(this),DISCONNECT_TIMEOUT*1000);break;case'disconnected':event=new CustomEvent('disconnect',{detail:{clean:this._rfb_clean_disconnect}});this.dispatchEvent(event);break;}},/* Print errors and disconnect
     *
     * The parameter 'details' is used for information that
     * should be logged but not sent to the user interface.
     */_fail:function _fail(details){switch(this._rfb_connection_state){case'disconnecting':Log.Error('Failed when disconnecting: '+details);break;case'connected':Log.Error('Failed while connected: '+details);break;case'connecting':Log.Error('Failed when connecting: '+details);break;default:Log.Error('RFB failure: '+details);break;}this._rfb_clean_disconnect=false;//This is sent to the UI
// Transition to disconnected without waiting for socket to close
this._updateConnectionState('disconnecting');this._updateConnectionState('disconnected');return false},_setCapability:function _setCapability(cap,val){this._capabilities[cap]=val;var event=new CustomEvent('capabilities',{detail:{capabilities:this._capabilities}});this.dispatchEvent(event)},_handle_message:function _handle_message(){if(this._sock.rQlen()===0){Log.Warn('handle_message called on an empty receive queue');return}switch(this._rfb_connection_state){case'disconnected':Log.Error('Got data while disconnected');break;case'connected':while(true){if(this._flushing){break}if(!this._normal_msg()){break}if(this._sock.rQlen()===0){break}}break;default:this._init_msg();break;}},_handleKeyEvent:function _handleKeyEvent(keysym,code,down){this.sendKey(keysym,code,down)},_handleMouseButton:function _handleMouseButton(x,y,down,bmask){if(down){this._mouse_buttonMask|=bmask}else{this._mouse_buttonMask&=~bmask}if(this.dragViewport){if(down&&!this._viewportDragging){this._viewportDragging=true;this._viewportDragPos={'x':x,'y':y};this._viewportHasMoved=false;// Skip sending mouse events
return}else{this._viewportDragging=false;// If we actually performed a drag then we are done
// here and should not send any mouse events
if(this._viewportHasMoved){return}// Otherwise we treat this as a mouse click event.
// Send the button down event here, as the button up
// event is sent at the end of this function.
RFB.messages.pointerEvent(this._sock,this._display.absX(x),this._display.absY(y),bmask)}}if(this._viewOnly){return}// View only, skip mouse events
if(this._rfb_connection_state!=='connected'){return}RFB.messages.pointerEvent(this._sock,this._display.absX(x),this._display.absY(y),this._mouse_buttonMask)},_handleMouseMove:function _handleMouseMove(x,y){if(this._viewportDragging){var deltaX=this._viewportDragPos.x-x;var deltaY=this._viewportDragPos.y-y;// The goal is to trigger on a certain physical width, the
// devicePixelRatio brings us a bit closer but is not optimal.
var dragThreshold=10*(window.devicePixelRatio||1);if(this._viewportHasMoved||Math.abs(deltaX)>dragThreshold||Math.abs(deltaY)>dragThreshold){this._viewportHasMoved=true;this._viewportDragPos={'x':x,'y':y};this._display.viewportChangePos(deltaX,deltaY)}// Skip sending mouse events
return}if(this._viewOnly){return}// View only, skip mouse events
if(this._rfb_connection_state!=='connected'){return}RFB.messages.pointerEvent(this._sock,this._display.absX(x),this._display.absY(y),this._mouse_buttonMask)},// Message Handlers
_negotiate_protocol_version:function _negotiate_protocol_version(){if(this._sock.rQlen()<12){return this._fail('Received incomplete protocol version.')}var sversion=this._sock.rQshiftStr(12).substr(4,7);Log.Info('Server ProtocolVersion: '+sversion);var is_repeater=0;switch(sversion){case'000.000':// UltraVNC repeater
is_repeater=1;break;case'003.003':case'003.006':// UltraVNC
case'003.889':// Apple Remote Desktop
this._rfb_version=3.3;break;case'003.007':this._rfb_version=3.7;break;case'003.008':case'004.000':// Intel AMT KVM
case'004.001':// RealVNC 4.6
case'005.000':// RealVNC 5.3
this._rfb_version=3.8;break;default:return this._fail('Invalid server version '+sversion);}if(is_repeater){var repeaterID='ID:'+this._repeaterID;while(repeaterID.length<250){repeaterID+='\0'}this._sock.send_string(repeaterID);return true}if(this._rfb_version>this._rfb_max_version){this._rfb_version=this._rfb_max_version}var cversion='00'+parseInt(this._rfb_version,10)+'.00'+this._rfb_version*10%10;this._sock.send_string('RFB '+cversion+'\n');Log.Debug('Sent ProtocolVersion: '+cversion);this._rfb_init_state='Security'},_negotiate_security:function _negotiate_security(){// Polyfill since IE and PhantomJS doesn't have
// TypedArray.includes()
function includes(item,array){for(var i=0;i<array.length;i++){if(array[i]===item){return true}}return false}if(this._rfb_version>=3.7){// Server sends supported list, client decides
var num_types=this._sock.rQshift8();if(this._sock.rQwait('security type',num_types,1)){return false}if(num_types===0){return this._handle_security_failure('no security types')}var types=this._sock.rQshiftBytes(num_types);Log.Debug('Server security types: '+types);// Look for each auth in preferred order
this._rfb_auth_scheme=0;if(includes(1,types)){this._rfb_auth_scheme=1;// None
}else if(includes(22,types)){this._rfb_auth_scheme=22;// XVP
}else if(includes(16,types)){this._rfb_auth_scheme=16;// Tight
}else if(includes(2,types)){this._rfb_auth_scheme=2;// VNC Auth
}else{return this._fail('Unsupported security types (types: '+types+')')}this._sock.send([this._rfb_auth_scheme])}else{// Server decides
if(this._sock.rQwait('security scheme',4)){return false}this._rfb_auth_scheme=this._sock.rQshift32()}this._rfb_init_state='Authentication';Log.Debug('Authenticating using scheme: '+this._rfb_auth_scheme);return this._init_msg();// jump to authentication
},/*
     * Get the security failure reason if sent from the server and
     * send the 'securityfailure' event.
     *
     * - The optional parameter context can be used to add some extra
     *   context to the log output.
     *
     * - The optional parameter security_result_status can be used to
     *   add a custom status code to the event.
     */_handle_security_failure:function _handle_security_failure(context,security_result_status){if(typeof context==='undefined'){context=''}else{context=' on '+context}if(typeof security_result_status==='undefined'){security_result_status=1;// fail
}if(this._sock.rQwait('reason length',4)){return false}var strlen=this._sock.rQshift32();var reason='';if(strlen>0){if(this._sock.rQwait('reason',strlen,8)){return false}reason=this._sock.rQshiftStr(strlen)}if(reason!==''){var event=new CustomEvent('securityfailure',{detail:{status:security_result_status,reason:reason}});this.dispatchEvent(event);return this._fail('Security negotiation failed'+context+' (reason: '+reason+')')}else{var _event=new CustomEvent('securityfailure',{detail:{status:security_result_status}});this.dispatchEvent(_event);return this._fail('Security negotiation failed'+context)}},// authentication
_negotiate_xvp_auth:function _negotiate_xvp_auth(){if(!this._rfb_credentials.username||!this._rfb_credentials.password||!this._rfb_credentials.target){var event=new CustomEvent('credentialsrequired',{detail:{types:['username','password','target']}});this.dispatchEvent(event);return false}var xvp_auth_str=String.fromCharCode(this._rfb_credentials.username.length)+String.fromCharCode(this._rfb_credentials.target.length)+this._rfb_credentials.username+this._rfb_credentials.target;this._sock.send_string(xvp_auth_str);this._rfb_auth_scheme=2;return this._negotiate_authentication()},_negotiate_std_vnc_auth:function _negotiate_std_vnc_auth(){if(this._sock.rQwait('auth challenge',16)){return false}if(!this._rfb_credentials.password){var event=new CustomEvent('credentialsrequired',{detail:{types:['password']}});this.dispatchEvent(event);return false}// TODO(directxman12): make genDES not require an Array
var challenge=Array.prototype.slice.call(this._sock.rQshiftBytes(16));var response=RFB.genDES(this._rfb_credentials.password,challenge);this._sock.send(response);this._rfb_init_state='SecurityResult';return true},_negotiate_tight_tunnels:function _negotiate_tight_tunnels(numTunnels){var clientSupportedTunnelTypes={0:{vendor:'TGHT',signature:'NOTUNNEL'}};var serverSupportedTunnelTypes={};// receive tunnel capabilities
for(var i=0;i<numTunnels;i++){var cap_code=this._sock.rQshift32();var cap_vendor=this._sock.rQshiftStr(4);var cap_signature=this._sock.rQshiftStr(8);serverSupportedTunnelTypes[cap_code]={vendor:cap_vendor,signature:cap_signature}}// choose the notunnel type
if(serverSupportedTunnelTypes[0]){if(serverSupportedTunnelTypes[0].vendor!=clientSupportedTunnelTypes[0].vendor||serverSupportedTunnelTypes[0].signature!=clientSupportedTunnelTypes[0].signature){return this._fail('Client\'s tunnel type had the incorrect '+'vendor or signature')}this._sock.send([0,0,0,0]);// use NOTUNNEL
return false;// wait until we receive the sub auth count to continue
}else{return this._fail('Server wanted tunnels, but doesn\'t support '+'the notunnel type')}},_negotiate_tight_auth:function _negotiate_tight_auth(){if(!this._rfb_tightvnc){// first pass, do the tunnel negotiation
if(this._sock.rQwait('num tunnels',4)){return false}var numTunnels=this._sock.rQshift32();if(numTunnels>0&&this._sock.rQwait('tunnel capabilities',16*numTunnels,4)){return false}this._rfb_tightvnc=true;if(numTunnels>0){this._negotiate_tight_tunnels(numTunnels);return false;// wait until we receive the sub auth to continue
}}// second pass, do the sub-auth negotiation
if(this._sock.rQwait('sub auth count',4)){return false}var subAuthCount=this._sock.rQshift32();if(subAuthCount===0){// empty sub-auth list received means 'no auth' subtype selected
this._rfb_init_state='SecurityResult';return true}if(this._sock.rQwait('sub auth capabilities',16*subAuthCount,4)){return false}var clientSupportedTypes={'STDVNOAUTH__':1,'STDVVNCAUTH_':2};var serverSupportedTypes=[];for(var i=0;i<subAuthCount;i++){var capNum=this._sock.rQshift32();var capabilities=this._sock.rQshiftStr(12);serverSupportedTypes.push(capabilities)}for(var authType in clientSupportedTypes){if(serverSupportedTypes.indexOf(authType)!=-1){this._sock.send([0,0,0,clientSupportedTypes[authType]]);switch(authType){case'STDVNOAUTH__':// no auth
this._rfb_init_state='SecurityResult';return true;case'STDVVNCAUTH_':// VNC auth
this._rfb_auth_scheme=2;return this._init_msg();default:return this._fail('Unsupported tiny auth scheme '+'(scheme: '+authType+')');}}}return this._fail('No supported sub-auth types!')},_negotiate_authentication:function _negotiate_authentication(){switch(this._rfb_auth_scheme){case 0:// connection failed
return this._handle_security_failure('authentication scheme');case 1:// no auth
if(this._rfb_version>=3.8){this._rfb_init_state='SecurityResult';return true}this._rfb_init_state='ClientInitialisation';return this._init_msg();case 22:// XVP auth
return this._negotiate_xvp_auth();case 2:// VNC authentication
return this._negotiate_std_vnc_auth();case 260:// TightVNC Security Type
return this._negotiate_tight_auth();default:return this._fail('Unsupported auth scheme (scheme: '+this._rfb_auth_scheme+')');}},_handle_security_result:function _handle_security_result(){if(this._sock.rQwait('VNC auth response ',4)){return false}var status=this._sock.rQshift32();if(status===0){// OK
this._rfb_init_state='ClientInitialisation';Log.Debug('Authentication OK');return this._init_msg()}else{if(this._rfb_version>=3.8){return this._handle_security_failure('security result',status)}else{var event=new CustomEvent('securityfailure',{detail:{status:status}});this.dispatchEvent(event);return this._fail('Security handshake failed')}}},_negotiate_server_init:function _negotiate_server_init(){if(this._sock.rQwait('server initialization',24)){return false}/* Screen size */var width=this._sock.rQshift16();var height=this._sock.rQshift16();/* PIXEL_FORMAT */var bpp=this._sock.rQshift8();var depth=this._sock.rQshift8();var big_endian=this._sock.rQshift8();var true_color=this._sock.rQshift8();var red_max=this._sock.rQshift16();var green_max=this._sock.rQshift16();var blue_max=this._sock.rQshift16();var red_shift=this._sock.rQshift8();var green_shift=this._sock.rQshift8();var blue_shift=this._sock.rQshift8();this._sock.rQskipBytes(3);// padding
// NB(directxman12): we don't want to call any callbacks or print messages until
//                   *after* we're past the point where we could backtrack
/* Connection name/title */var name_length=this._sock.rQshift32();if(this._sock.rQwait('server init name',name_length,24)){return false}this._fb_name=(0,_strings.decodeUTF8)(this._sock.rQshiftStr(name_length));if(this._rfb_tightvnc){if(this._sock.rQwait('TightVNC extended server init header',8,24+name_length)){return false}// In TightVNC mode, ServerInit message is extended
var numServerMessages=this._sock.rQshift16();var numClientMessages=this._sock.rQshift16();var numEncodings=this._sock.rQshift16();this._sock.rQskipBytes(2);// padding
var totalMessagesLength=(numServerMessages+numClientMessages+numEncodings)*16;if(this._sock.rQwait('TightVNC extended server init header',totalMessagesLength,32+name_length)){return false}// we don't actually do anything with the capability information that TIGHT sends,
// so we just skip the all of this.
// TIGHT server message capabilities
this._sock.rQskipBytes(16*numServerMessages);// TIGHT client message capabilities
this._sock.rQskipBytes(16*numClientMessages);// TIGHT encoding capabilities
this._sock.rQskipBytes(16*numEncodings)}// NB(directxman12): these are down here so that we don't run them multiple times
//                   if we backtrack
Log.Info('Screen: '+width+'x'+height+', bpp: '+bpp+', depth: '+depth+', big_endian: '+big_endian+', true_color: '+true_color+', red_max: '+red_max+', green_max: '+green_max+', blue_max: '+blue_max+', red_shift: '+red_shift+', green_shift: '+green_shift+', blue_shift: '+blue_shift);if(big_endian!==0){Log.Warn('Server native endian is not little endian')}if(red_shift!==16){Log.Warn('Server native red-shift is not 16')}if(blue_shift!==0){Log.Warn('Server native blue-shift is not 0')}// we're past the point where we could backtrack, so it's safe to call this
var event=new CustomEvent('desktopname',{detail:{name:this._fb_name}});this.dispatchEvent(event);this._resize(width,height);if(!this._viewOnly){this._keyboard.grab()}if(!this._viewOnly){this._mouse.grab()}this._fb_depth=24;if(this._fb_name==='Intel(r) AMT KVM'){Log.Warn('Intel AMT KVM only supports 8/16 bit depths. Using low color mode.');this._fb_depth=8}RFB.messages.pixelFormat(this._sock,this._fb_depth,true);this._sendEncodings();RFB.messages.fbUpdateRequest(this._sock,false,0,0,this._fb_width,this._fb_height);this._timing.fbu_rt_start=new Date().getTime();this._timing.pixels=0;// Cursor will be server side until the server decides to honor
// our request and send over the cursor image
this._display.disableLocalCursor();this._updateConnectionState('connected');return true},_sendEncodings:function _sendEncodings(){var encs=[];// In preference order
encs.push(_encodings.encodings.encodingCopyRect);// Only supported with full depth support
if(this._fb_depth==24){encs.push(_encodings.encodings.encodingTight);encs.push(_encodings.encodings.encodingHextile);encs.push(_encodings.encodings.encodingRRE)}encs.push(_encodings.encodings.encodingRaw);// Psuedo-encoding settings
encs.push(_encodings.encodings.pseudoEncodingTightPNG);encs.push(_encodings.encodings.pseudoEncodingQualityLevel0+6);encs.push(_encodings.encodings.pseudoEncodingCompressLevel0+2);encs.push(_encodings.encodings.pseudoEncodingDesktopSize);encs.push(_encodings.encodings.pseudoEncodingLastRect);encs.push(_encodings.encodings.pseudoEncodingQEMUExtendedKeyEvent);encs.push(_encodings.encodings.pseudoEncodingExtendedDesktopSize);encs.push(_encodings.encodings.pseudoEncodingXvp);encs.push(_encodings.encodings.pseudoEncodingFence);encs.push(_encodings.encodings.pseudoEncodingContinuousUpdates);if((0,_browser.supportsCursorURIs)()&&!_browser.isTouchDevice&&this._fb_depth==24){encs.push(_encodings.encodings.pseudoEncodingCursor)}RFB.messages.clientEncodings(this._sock,encs)},/* RFB protocol initialization states:
     *   ProtocolVersion
     *   Security
     *   Authentication
     *   SecurityResult
     *   ClientInitialization - not triggered by server message
     *   ServerInitialization
     */_init_msg:function _init_msg(){switch(this._rfb_init_state){case'ProtocolVersion':return this._negotiate_protocol_version();case'Security':return this._negotiate_security();case'Authentication':return this._negotiate_authentication();case'SecurityResult':return this._handle_security_result();case'ClientInitialisation':this._sock.send([this._shared?1:0]);// ClientInitialisation
this._rfb_init_state='ServerInitialisation';return true;case'ServerInitialisation':return this._negotiate_server_init();default:return this._fail('Unknown init state (state: '+this._rfb_init_state+')');}},_handle_set_colour_map_msg:function _handle_set_colour_map_msg(){Log.Debug('SetColorMapEntries');return this._fail('Unexpected SetColorMapEntries message')},_handle_server_cut_text:function _handle_server_cut_text(){Log.Debug('ServerCutText');if(this._sock.rQwait('ServerCutText header',7,1)){return false}this._sock.rQskipBytes(3);// Padding
var length=this._sock.rQshift32();if(this._sock.rQwait('ServerCutText',length,8)){return false}var text=this._sock.rQshiftStr(length);if(this._viewOnly){return true}var event=new CustomEvent('clipboard',{detail:{text:text}});this.dispatchEvent(event);return true},_handle_server_fence_msg:function _handle_server_fence_msg(){if(this._sock.rQwait('ServerFence header',8,1)){return false}this._sock.rQskipBytes(3);// Padding
var flags=this._sock.rQshift32();var length=this._sock.rQshift8();if(this._sock.rQwait('ServerFence payload',length,9)){return false}if(length>64){Log.Warn('Bad payload length ('+length+') in fence response');length=64}var payload=this._sock.rQshiftStr(length);this._supportsFence=true;/*
         * Fence flags
         *
         *  (1<<0)  - BlockBefore
         *  (1<<1)  - BlockAfter
         *  (1<<2)  - SyncNext
         *  (1<<31) - Request
         */if(!(flags&1<<31)){return this._fail('Unexpected fence response')}// Filter out unsupported flags
// FIXME: support syncNext
flags&=1<<0|1<<1;// BlockBefore and BlockAfter are automatically handled by
// the fact that we process each incoming message
// synchronuosly.
RFB.messages.clientFence(this._sock,flags,payload);return true},_handle_xvp_msg:function _handle_xvp_msg(){if(this._sock.rQwait('XVP version and message',3,1)){return false}this._sock.rQskip8();// Padding
var xvp_ver=this._sock.rQshift8();var xvp_msg=this._sock.rQshift8();switch(xvp_msg){case 0:// XVP_FAIL
Log.Error('XVP Operation Failed');break;case 1:// XVP_INIT
this._rfb_xvp_ver=xvp_ver;Log.Info('XVP extensions enabled (version '+this._rfb_xvp_ver+')');this._setCapability('power',true);break;default:this._fail('Illegal server XVP message (msg: '+xvp_msg+')');break;}return true},_normal_msg:function _normal_msg(){var msg_type;if(this._FBU.rects>0){msg_type=0}else{msg_type=this._sock.rQshift8()}switch(msg_type){case 0:// FramebufferUpdate
var ret=this._framebufferUpdate();if(ret&&!this._enabledContinuousUpdates){RFB.messages.fbUpdateRequest(this._sock,true,0,0,this._fb_width,this._fb_height)}return ret;case 1:// SetColorMapEntries
return this._handle_set_colour_map_msg();case 2:// Bell
Log.Debug('Bell');var event=new CustomEvent('bell',{detail:{}});this.dispatchEvent(event);return true;case 3:// ServerCutText
return this._handle_server_cut_text();case 150:// EndOfContinuousUpdates
var first=!this._supportsContinuousUpdates;this._supportsContinuousUpdates=true;this._enabledContinuousUpdates=false;if(first){this._enabledContinuousUpdates=true;this._updateContinuousUpdates();Log.Info('Enabling continuous updates.')}else{// FIXME: We need to send a framebufferupdaterequest here
// if we add support for turning off continuous updates
}return true;case 248:// ServerFence
return this._handle_server_fence_msg();case 250:// XVP
return this._handle_xvp_msg();default:this._fail('Unexpected server message (type '+msg_type+')');Log.Debug('sock.rQslice(0, 30): '+this._sock.rQslice(0,30));return true;}},_onFlush:function _onFlush(){this._flushing=false;// Resume processing
if(this._sock.rQlen()>0){this._handle_message()}},_framebufferUpdate:function _framebufferUpdate(){var ret=true;var now;if(this._FBU.rects===0){if(this._sock.rQwait('FBU header',3,1)){return false}this._sock.rQskip8();// Padding
this._FBU.rects=this._sock.rQshift16();this._FBU.bytes=0;this._timing.cur_fbu=0;if(this._timing.fbu_rt_start>0){now=new Date().getTime();Log.Info('First FBU latency: '+(now-this._timing.fbu_rt_start))}// Make sure the previous frame is fully rendered first
// to avoid building up an excessive queue
if(this._display.pending()){this._flushing=true;this._display.flush();return false}}while(this._FBU.rects>0){if(this._rfb_connection_state!=='connected'){return false}if(this._sock.rQwait('FBU',this._FBU.bytes)){return false}if(this._FBU.bytes===0){if(this._sock.rQwait('rect header',12)){return false}/* New FramebufferUpdate */var hdr=this._sock.rQshiftBytes(12);this._FBU.x=(hdr[0]<<8)+hdr[1];this._FBU.y=(hdr[2]<<8)+hdr[3];this._FBU.width=(hdr[4]<<8)+hdr[5];this._FBU.height=(hdr[6]<<8)+hdr[7];this._FBU.encoding=parseInt((hdr[8]<<24)+(hdr[9]<<16)+(hdr[10]<<8)+hdr[11],10);if(!this._encHandlers[this._FBU.encoding]){this._fail('Unsupported encoding (encoding: '+this._FBU.encoding+')');return false}}this._timing.last_fbu=new Date().getTime();ret=this._encHandlers[this._FBU.encoding]();now=new Date().getTime();this._timing.cur_fbu+=now-this._timing.last_fbu;if(ret){if(!(this._FBU.encoding in this._encStats)){this._encStats[this._FBU.encoding]=[0,0]}this._encStats[this._FBU.encoding][0]++;this._encStats[this._FBU.encoding][1]++;this._timing.pixels+=this._FBU.width*this._FBU.height}if(this._timing.pixels>=this._fb_width*this._fb_height){if(this._FBU.width===this._fb_width&&this._FBU.height===this._fb_height||this._timing.fbu_rt_start>0){this._timing.full_fbu_total+=this._timing.cur_fbu;this._timing.full_fbu_cnt++;Log.Info('Timing of full FBU, curr: '+this._timing.cur_fbu+', total: '+this._timing.full_fbu_total+', cnt: '+this._timing.full_fbu_cnt+', avg: '+this._timing.full_fbu_total/this._timing.full_fbu_cnt)}if(this._timing.fbu_rt_start>0){var fbu_rt_diff=now-this._timing.fbu_rt_start;this._timing.fbu_rt_total+=fbu_rt_diff;this._timing.fbu_rt_cnt++;Log.Info('full FBU round-trip, cur: '+fbu_rt_diff+', total: '+this._timing.fbu_rt_total+', cnt: '+this._timing.fbu_rt_cnt+', avg: '+this._timing.fbu_rt_total/this._timing.fbu_rt_cnt);this._timing.fbu_rt_start=0}}if(!ret){return ret}// need more data
}this._display.flip();return true;// We finished this FBU
},_updateContinuousUpdates:function _updateContinuousUpdates(){if(!this._enabledContinuousUpdates){return}RFB.messages.enableContinuousUpdates(this._sock,true,0,0,this._fb_width,this._fb_height)},_resize:function _resize(width,height){this._fb_width=width;this._fb_height=height;this._destBuff=new Uint8Array(this._fb_width*this._fb_height*4);this._display.resize(this._fb_width,this._fb_height);// Adjust the visible viewport based on the new dimensions
this._updateClip();this._updateScale();this._timing.fbu_rt_start=new Date().getTime();this._updateContinuousUpdates()},_xvpOp:function _xvpOp(ver,op){if(this._rfb_xvp_ver<ver){return}Log.Info('Sending XVP operation '+op+' (version '+ver+')');RFB.messages.xvpOp(this._sock,ver,op)}};Object.assign(RFB.prototype,_eventtarget2.default);// Class Methods
RFB.messages={keyEvent:function keyEvent(sock,keysym,down){var buff=sock._sQ;var offset=sock._sQlen;buff[offset]=4;// msg-type
buff[offset+1]=down;buff[offset+2]=0;buff[offset+3]=0;buff[offset+4]=keysym>>24;buff[offset+5]=keysym>>16;buff[offset+6]=keysym>>8;buff[offset+7]=keysym;sock._sQlen+=8;sock.flush()},QEMUExtendedKeyEvent:function QEMUExtendedKeyEvent(sock,keysym,down,keycode){function getRFBkeycode(xt_scancode){var upperByte=keycode>>8;var lowerByte=keycode&255;if(upperByte===224&&lowerByte<127){lowerByte=lowerByte|128;return lowerByte}return xt_scancode}var buff=sock._sQ;var offset=sock._sQlen;buff[offset]=255;// msg-type
buff[offset+1]=0;// sub msg-type
buff[offset+2]=down>>8;buff[offset+3]=down;buff[offset+4]=keysym>>24;buff[offset+5]=keysym>>16;buff[offset+6]=keysym>>8;buff[offset+7]=keysym;var RFBkeycode=getRFBkeycode(keycode);buff[offset+8]=RFBkeycode>>24;buff[offset+9]=RFBkeycode>>16;buff[offset+10]=RFBkeycode>>8;buff[offset+11]=RFBkeycode;sock._sQlen+=12;sock.flush()},pointerEvent:function pointerEvent(sock,x,y,mask){var buff=sock._sQ;var offset=sock._sQlen;buff[offset]=5;// msg-type
buff[offset+1]=mask;buff[offset+2]=x>>8;buff[offset+3]=x;buff[offset+4]=y>>8;buff[offset+5]=y;sock._sQlen+=6;sock.flush()},// TODO(directxman12): make this unicode compatible?
clientCutText:function clientCutText(sock,text){var buff=sock._sQ;var offset=sock._sQlen;buff[offset]=6;// msg-type
buff[offset+1]=0;// padding
buff[offset+2]=0;// padding
buff[offset+3]=0;// padding
var n=text.length;buff[offset+4]=n>>24;buff[offset+5]=n>>16;buff[offset+6]=n>>8;buff[offset+7]=n;for(var i=0;i<n;i++){buff[offset+8+i]=text.charCodeAt(i)}sock._sQlen+=8+n;sock.flush()},setDesktopSize:function setDesktopSize(sock,width,height,id,flags){var buff=sock._sQ;var offset=sock._sQlen;buff[offset]=251;// msg-type
buff[offset+1]=0;// padding
buff[offset+2]=width>>8;// width
buff[offset+3]=width;buff[offset+4]=height>>8;// height
buff[offset+5]=height;buff[offset+6]=1;// number-of-screens
buff[offset+7]=0;// padding
// screen array
buff[offset+8]=id>>24;// id
buff[offset+9]=id>>16;buff[offset+10]=id>>8;buff[offset+11]=id;buff[offset+12]=0;// x-position
buff[offset+13]=0;buff[offset+14]=0;// y-position
buff[offset+15]=0;buff[offset+16]=width>>8;// width
buff[offset+17]=width;buff[offset+18]=height>>8;// height
buff[offset+19]=height;buff[offset+20]=flags>>24;// flags
buff[offset+21]=flags>>16;buff[offset+22]=flags>>8;buff[offset+23]=flags;sock._sQlen+=24;sock.flush()},clientFence:function clientFence(sock,flags,payload){var buff=sock._sQ;var offset=sock._sQlen;buff[offset]=248;// msg-type
buff[offset+1]=0;// padding
buff[offset+2]=0;// padding
buff[offset+3]=0;// padding
buff[offset+4]=flags>>24;// flags
buff[offset+5]=flags>>16;buff[offset+6]=flags>>8;buff[offset+7]=flags;var n=payload.length;buff[offset+8]=n;// length
for(var i=0;i<n;i++){buff[offset+9+i]=payload.charCodeAt(i)}sock._sQlen+=9+n;sock.flush()},enableContinuousUpdates:function enableContinuousUpdates(sock,enable,x,y,width,height){var buff=sock._sQ;var offset=sock._sQlen;buff[offset]=150;// msg-type
buff[offset+1]=enable;// enable-flag
buff[offset+2]=x>>8;// x
buff[offset+3]=x;buff[offset+4]=y>>8;// y
buff[offset+5]=y;buff[offset+6]=width>>8;// width
buff[offset+7]=width;buff[offset+8]=height>>8;// height
buff[offset+9]=height;sock._sQlen+=10;sock.flush()},pixelFormat:function pixelFormat(sock,depth,true_color){var buff=sock._sQ;var offset=sock._sQlen;var bpp,bits;if(depth>16){bpp=32}else if(depth>8){bpp=16}else{bpp=8}bits=Math.floor(depth/3);buff[offset]=0;// msg-type
buff[offset+1]=0;// padding
buff[offset+2]=0;// padding
buff[offset+3]=0;// padding
buff[offset+4]=bpp;// bits-per-pixel
buff[offset+5]=depth;// depth
buff[offset+6]=0;// little-endian
buff[offset+7]=true_color?1:0;// true-color
buff[offset+8]=0;// red-max
buff[offset+9]=(1<<bits)-1;// red-max
buff[offset+10]=0;// green-max
buff[offset+11]=(1<<bits)-1;// green-max
buff[offset+12]=0;// blue-max
buff[offset+13]=(1<<bits)-1;// blue-max
buff[offset+14]=bits*2;// red-shift
buff[offset+15]=bits*1;// green-shift
buff[offset+16]=bits*0;// blue-shift
buff[offset+17]=0;// padding
buff[offset+18]=0;// padding
buff[offset+19]=0;// padding
sock._sQlen+=20;sock.flush()},clientEncodings:function clientEncodings(sock,encodings){var buff=sock._sQ;var offset=sock._sQlen;buff[offset]=2;// msg-type
buff[offset+1]=0;// padding
buff[offset+2]=encodings.length>>8;buff[offset+3]=encodings.length;var i,j=offset+4;for(i=0;i<encodings.length;i++){var enc=encodings[i];buff[j]=enc>>24;buff[j+1]=enc>>16;buff[j+2]=enc>>8;buff[j+3]=enc;j+=4}sock._sQlen+=j-offset;sock.flush()},fbUpdateRequest:function fbUpdateRequest(sock,incremental,x,y,w,h){var buff=sock._sQ;var offset=sock._sQlen;if(typeof x==='undefined'){x=0}if(typeof y==='undefined'){y=0}buff[offset]=3;// msg-type
buff[offset+1]=incremental?1:0;buff[offset+2]=x>>8&255;buff[offset+3]=x&255;buff[offset+4]=y>>8&255;buff[offset+5]=y&255;buff[offset+6]=w>>8&255;buff[offset+7]=w&255;buff[offset+8]=h>>8&255;buff[offset+9]=h&255;sock._sQlen+=10;sock.flush()},xvpOp:function xvpOp(sock,ver,op){var buff=sock._sQ;var offset=sock._sQlen;buff[offset]=250;// msg-type
buff[offset+1]=0;// padding
buff[offset+2]=ver;buff[offset+3]=op;sock._sQlen+=4;sock.flush()}};RFB.genDES=function(password,challenge){var passwd=[];for(var i=0;i<password.length;i++){passwd.push(password.charCodeAt(i))}return new _des2.default(passwd).encrypt(challenge)};RFB.encodingHandlers={RAW:function RAW(){if(this._FBU.lines===0){this._FBU.lines=this._FBU.height}var pixelSize=this._fb_depth==8?1:4;this._FBU.bytes=this._FBU.width*pixelSize;// at least a line
if(this._sock.rQwait('RAW',this._FBU.bytes)){return false}var cur_y=this._FBU.y+(this._FBU.height-this._FBU.lines);var curr_height=Math.min(this._FBU.lines,Math.floor(this._sock.rQlen()/(this._FBU.width*pixelSize)));var data=this._sock.get_rQ();var index=this._sock.get_rQi();if(this._fb_depth==8){var pixels=this._FBU.width*curr_height;var newdata=new Uint8Array(pixels*4);var i;for(i=0;i<pixels;i++){newdata[i*4+0]=(data[index+i]>>0&3)*255/3;newdata[i*4+1]=(data[index+i]>>2&3)*255/3;newdata[i*4+2]=(data[index+i]>>4&3)*255/3;newdata[i*4+4]=0}data=newdata;index=0}this._display.blitImage(this._FBU.x,cur_y,this._FBU.width,curr_height,data,index);this._sock.rQskipBytes(this._FBU.width*curr_height*pixelSize);this._FBU.lines-=curr_height;if(this._FBU.lines>0){this._FBU.bytes=this._FBU.width*pixelSize;// At least another line
}else{this._FBU.rects--;this._FBU.bytes=0}return true},COPYRECT:function COPYRECT(){this._FBU.bytes=4;if(this._sock.rQwait('COPYRECT',4)){return false}this._display.copyImage(this._sock.rQshift16(),this._sock.rQshift16(),this._FBU.x,this._FBU.y,this._FBU.width,this._FBU.height);this._FBU.rects--;this._FBU.bytes=0;return true},RRE:function RRE(){var color;if(this._FBU.subrects===0){this._FBU.bytes=4+4;if(this._sock.rQwait('RRE',4+4)){return false}this._FBU.subrects=this._sock.rQshift32();color=this._sock.rQshiftBytes(4);// Background
this._display.fillRect(this._FBU.x,this._FBU.y,this._FBU.width,this._FBU.height,color)}while(this._FBU.subrects>0&&this._sock.rQlen()>=4+8){color=this._sock.rQshiftBytes(4);var x=this._sock.rQshift16();var y=this._sock.rQshift16();var width=this._sock.rQshift16();var height=this._sock.rQshift16();this._display.fillRect(this._FBU.x+x,this._FBU.y+y,width,height,color);this._FBU.subrects--}if(this._FBU.subrects>0){var chunk=Math.min(this._rre_chunk_sz,this._FBU.subrects);this._FBU.bytes=(4+8)*chunk}else{this._FBU.rects--;this._FBU.bytes=0}return true},HEXTILE:function HEXTILE(){var rQ=this._sock.get_rQ();var rQi=this._sock.get_rQi();if(this._FBU.tiles===0){this._FBU.tiles_x=Math.ceil(this._FBU.width/16);this._FBU.tiles_y=Math.ceil(this._FBU.height/16);this._FBU.total_tiles=this._FBU.tiles_x*this._FBU.tiles_y;this._FBU.tiles=this._FBU.total_tiles}while(this._FBU.tiles>0){this._FBU.bytes=1;if(this._sock.rQwait('HEXTILE subencoding',this._FBU.bytes)){return false}var subencoding=rQ[rQi];// Peek
if(subencoding>30){// Raw
this._fail('Illegal hextile subencoding (subencoding: '+subencoding+')');return false}var subrects=0;var curr_tile=this._FBU.total_tiles-this._FBU.tiles;var tile_x=curr_tile%this._FBU.tiles_x;var tile_y=Math.floor(curr_tile/this._FBU.tiles_x);var x=this._FBU.x+tile_x*16;var y=this._FBU.y+tile_y*16;var w=Math.min(16,this._FBU.x+this._FBU.width-x);var h=Math.min(16,this._FBU.y+this._FBU.height-y);// Figure out how much we are expecting
if(subencoding&1){// Raw
this._FBU.bytes+=w*h*4}else{if(subencoding&2){// Background
this._FBU.bytes+=4}if(subencoding&4){// Foreground
this._FBU.bytes+=4}if(subencoding&8){// AnySubrects
this._FBU.bytes++;// Since we aren't shifting it off
if(this._sock.rQwait('hextile subrects header',this._FBU.bytes)){return false}subrects=rQ[rQi+this._FBU.bytes-1];// Peek
if(subencoding&16){// SubrectsColoured
this._FBU.bytes+=subrects*(4+2)}else{this._FBU.bytes+=subrects*2}}}if(this._sock.rQwait('hextile',this._FBU.bytes)){return false}// We know the encoding and have a whole tile
this._FBU.subencoding=rQ[rQi];rQi++;if(this._FBU.subencoding===0){if(this._FBU.lastsubencoding&1){// Weird: ignore blanks are RAW
Log.Debug('     Ignoring blank after RAW')}else{this._display.fillRect(x,y,w,h,this._FBU.background)}}else if(this._FBU.subencoding&1){// Raw
this._display.blitImage(x,y,w,h,rQ,rQi);rQi+=this._FBU.bytes-1}else{if(this._FBU.subencoding&2){// Background
this._FBU.background=[rQ[rQi],rQ[rQi+1],rQ[rQi+2],rQ[rQi+3]];rQi+=4}if(this._FBU.subencoding&4){// Foreground
this._FBU.foreground=[rQ[rQi],rQ[rQi+1],rQ[rQi+2],rQ[rQi+3]];rQi+=4}this._display.startTile(x,y,w,h,this._FBU.background);if(this._FBU.subencoding&8){// AnySubrects
subrects=rQ[rQi];rQi++;for(var s=0;s<subrects;s++){var color;if(this._FBU.subencoding&16){// SubrectsColoured
color=[rQ[rQi],rQ[rQi+1],rQ[rQi+2],rQ[rQi+3]];rQi+=4}else{color=this._FBU.foreground}var xy=rQ[rQi];rQi++;var sx=xy>>4;var sy=xy&15;var wh=rQ[rQi];rQi++;var sw=(wh>>4)+1;var sh=(wh&15)+1;this._display.subTile(sx,sy,sw,sh,color)}}this._display.finishTile()}this._sock.set_rQi(rQi);this._FBU.lastsubencoding=this._FBU.subencoding;this._FBU.bytes=0;this._FBU.tiles--}if(this._FBU.tiles===0){this._FBU.rects--}return true},TIGHT:function TIGHT(){this._FBU.bytes=1;// compression-control byte
if(this._sock.rQwait('TIGHT compression-control',this._FBU.bytes)){return false}var checksum=function checksum(data){var sum=0;for(var i=0;i<data.length;i++){sum+=data[i];if(sum>65536)sum-=65536}return sum};var resetStreams=0;var streamId=-1;var decompress=function(data,expected){for(var i=0;i<4;i++){if(resetStreams>>i&1){this._FBU.zlibs[i].reset();Log.Info('Reset zlib stream '+i)}}//var uncompressed = this._FBU.zlibs[streamId].uncompress(data, 0);
var uncompressed=this._FBU.zlibs[streamId].inflate(data,true,expected);/*if (uncompressed.status !== 0) {
                Log.Error("Invalid data in zlib stream");
            }*///return uncompressed.data;
return uncompressed}.bind(this);var indexedToRGBX2Color=function(data,palette,width,height){// Convert indexed (palette based) image data to RGB
// TODO: reduce number of calculations inside loop
var dest=this._destBuff;var w=Math.floor((width+7)/8);var w1=Math.floor(width/8);/*for (var y = 0; y < height; y++) {
                var b, x, dp, sp;
                var yoffset = y * width;
                var ybitoffset = y * w;
                var xoffset, targetbyte;
                for (x = 0; x < w1; x++) {
                    xoffset = yoffset + x * 8;
                    targetbyte = data[ybitoffset + x];
                    for (b = 7; b >= 0; b--) {
                        dp = (xoffset + 7 - b) * 3;
                        sp = (targetbyte >> b & 1) * 3;
                        dest[dp] = palette[sp];
                        dest[dp + 1] = palette[sp + 1];
                        dest[dp + 2] = palette[sp + 2];
                    }
                }

                xoffset = yoffset + x * 8;
                targetbyte = data[ybitoffset + x];
                for (b = 7; b >= 8 - width % 8; b--) {
                    dp = (xoffset + 7 - b) * 3;
                    sp = (targetbyte >> b & 1) * 3;
                    dest[dp] = palette[sp];
                    dest[dp + 1] = palette[sp + 1];
                    dest[dp + 2] = palette[sp + 2];
                }
            }*/for(var y=0;y<height;y++){var b,x,dp,sp;for(x=0;x<w1;x++){for(b=7;b>=0;b--){dp=(y*width+x*8+7-b)*4;sp=(data[y*w+x]>>b&1)*3;dest[dp]=palette[sp];dest[dp+1]=palette[sp+1];dest[dp+2]=palette[sp+2];dest[dp+3]=255}}for(b=7;b>=8-width%8;b--){dp=(y*width+x*8+7-b)*4;sp=(data[y*w+x]>>b&1)*3;dest[dp]=palette[sp];dest[dp+1]=palette[sp+1];dest[dp+2]=palette[sp+2];dest[dp+3]=255}}return dest}.bind(this);var indexedToRGBX=function(data,palette,width,height){// Convert indexed (palette based) image data to RGB
var dest=this._destBuff;var total=width*height*4;for(var i=0,j=0;i<total;i+=4,j++){var sp=data[j]*3;dest[i]=palette[sp];dest[i+1]=palette[sp+1];dest[i+2]=palette[sp+2];dest[i+3]=255}return dest}.bind(this);var rQi=this._sock.get_rQi();var rQ=this._sock.rQwhole();var cmode,data;var cl_header,cl_data;var handlePalette=function(){var numColors=rQ[rQi+2]+1;var paletteSize=numColors*3;this._FBU.bytes+=paletteSize;if(this._sock.rQwait('TIGHT palette '+cmode,this._FBU.bytes)){return false}var bpp=numColors<=2?1:8;var rowSize=Math.floor((this._FBU.width*bpp+7)/8);var raw=false;if(rowSize*this._FBU.height<12){raw=true;cl_header=0;cl_data=rowSize*this._FBU.height;//clength = [0, rowSize * this._FBU.height];
}else{// begin inline getTightCLength (returning two-item arrays is bad for performance with GC)
var cl_offset=rQi+3+paletteSize;cl_header=1;cl_data=0;cl_data+=rQ[cl_offset]&127;if(rQ[cl_offset]&128){cl_header++;cl_data+=(rQ[cl_offset+1]&127)<<7;if(rQ[cl_offset+1]&128){cl_header++;cl_data+=rQ[cl_offset+2]<<14}}// end inline getTightCLength
}this._FBU.bytes+=cl_header+cl_data;if(this._sock.rQwait('TIGHT '+cmode,this._FBU.bytes)){return false}// Shift ctl, filter id, num colors, palette entries, and clength off
this._sock.rQskipBytes(3);//var palette = this._sock.rQshiftBytes(paletteSize);
this._sock.rQshiftTo(this._paletteBuff,paletteSize);this._sock.rQskipBytes(cl_header);if(raw){data=this._sock.rQshiftBytes(cl_data)}else{data=decompress(this._sock.rQshiftBytes(cl_data),rowSize*this._FBU.height)}// Convert indexed (palette based) image data to RGB
var rgbx;if(numColors==2){rgbx=indexedToRGBX2Color(data,this._paletteBuff,this._FBU.width,this._FBU.height);this._display.blitRgbxImage(this._FBU.x,this._FBU.y,this._FBU.width,this._FBU.height,rgbx,0,false)}else{rgbx=indexedToRGBX(data,this._paletteBuff,this._FBU.width,this._FBU.height);this._display.blitRgbxImage(this._FBU.x,this._FBU.y,this._FBU.width,this._FBU.height,rgbx,0,false)}return true}.bind(this);var handleCopy=function(){var raw=false;var uncompressedSize=this._FBU.width*this._FBU.height*3;if(uncompressedSize<12){raw=true;cl_header=0;cl_data=uncompressedSize}else{// begin inline getTightCLength (returning two-item arrays is for peformance with GC)
var cl_offset=rQi+1;cl_header=1;cl_data=0;cl_data+=rQ[cl_offset]&127;if(rQ[cl_offset]&128){cl_header++;cl_data+=(rQ[cl_offset+1]&127)<<7;if(rQ[cl_offset+1]&128){cl_header++;cl_data+=rQ[cl_offset+2]<<14}}// end inline getTightCLength
}this._FBU.bytes=1+cl_header+cl_data;if(this._sock.rQwait('TIGHT '+cmode,this._FBU.bytes)){return false}// Shift ctl, clength off
this._sock.rQshiftBytes(1+cl_header);if(raw){data=this._sock.rQshiftBytes(cl_data)}else{data=decompress(this._sock.rQshiftBytes(cl_data),uncompressedSize)}this._display.blitRgbImage(this._FBU.x,this._FBU.y,this._FBU.width,this._FBU.height,data,0,false);return true}.bind(this);var ctl=this._sock.rQpeek8();// Keep tight reset bits
resetStreams=ctl&15;// Figure out filter
ctl=ctl>>4;streamId=ctl&3;if(ctl===8)cmode='fill';else if(ctl===9)cmode='jpeg';else if(ctl===10)cmode='png';else if(ctl&4)cmode='filter';else if(ctl<4)cmode='copy';else return this._fail('Illegal tight compression received (ctl: '+ctl+')');switch(cmode){// fill use depth because TPIXELs drop the padding byte
case'fill':// TPIXEL
this._FBU.bytes+=3;break;case'jpeg':// max clength
this._FBU.bytes+=3;break;case'png':// max clength
this._FBU.bytes+=3;break;case'filter':// filter id + num colors if palette
this._FBU.bytes+=2;break;case'copy':break;}if(this._sock.rQwait('TIGHT '+cmode,this._FBU.bytes)){return false}// Determine FBU.bytes
switch(cmode){case'fill':// skip ctl byte
this._display.fillRect(this._FBU.x,this._FBU.y,this._FBU.width,this._FBU.height,[rQ[rQi+3],rQ[rQi+2],rQ[rQi+1]],false);this._sock.rQskipBytes(4);break;case'png':case'jpeg':// begin inline getTightCLength (returning two-item arrays is for peformance with GC)
var cl_offset=rQi+1;cl_header=1;cl_data=0;cl_data+=rQ[cl_offset]&127;if(rQ[cl_offset]&128){cl_header++;cl_data+=(rQ[cl_offset+1]&127)<<7;if(rQ[cl_offset+1]&128){cl_header++;cl_data+=rQ[cl_offset+2]<<14}}// end inline getTightCLength
this._FBU.bytes=1+cl_header+cl_data;// ctl + clength size + jpeg-data
if(this._sock.rQwait('TIGHT '+cmode,this._FBU.bytes)){return false}// We have everything, render it
this._sock.rQskipBytes(1+cl_header);// shift off clt + compact length
data=this._sock.rQshiftBytes(cl_data);this._display.imageRect(this._FBU.x,this._FBU.y,'image/'+cmode,data);break;case'filter':var filterId=rQ[rQi+1];if(filterId===1){if(!handlePalette()){return false}}else{// Filter 0, Copy could be valid here, but servers don't send it as an explicit filter
// Filter 2, Gradient is valid but not use if jpeg is enabled
this._fail('Unsupported tight subencoding received '+'(filter: '+filterId+')')}break;case'copy':if(!handleCopy()){return false}break;}this._FBU.bytes=0;this._FBU.rects--;return true},last_rect:function last_rect(){this._FBU.rects=0;return true},ExtendedDesktopSize:function ExtendedDesktopSize(){this._FBU.bytes=1;if(this._sock.rQwait('ExtendedDesktopSize',this._FBU.bytes)){return false}var firstUpdate=!this._supportsSetDesktopSize;this._supportsSetDesktopSize=true;// Normally we only apply the current resize mode after a
// window resize event. However there is no such trigger on the
// initial connect. And we don't know if the server supports
// resizing until we've gotten here.
if(firstUpdate){this._requestRemoteResize()}var number_of_screens=this._sock.rQpeek8();this._FBU.bytes=4+number_of_screens*16;if(this._sock.rQwait('ExtendedDesktopSize',this._FBU.bytes)){return false}this._sock.rQskipBytes(1);// number-of-screens
this._sock.rQskipBytes(3);// padding
for(var i=0;i<number_of_screens;i+=1){// Save the id and flags of the first screen
if(i===0){this._screen_id=this._sock.rQshiftBytes(4);// id
this._sock.rQskipBytes(2);// x-position
this._sock.rQskipBytes(2);// y-position
this._sock.rQskipBytes(2);// width
this._sock.rQskipBytes(2);// height
this._screen_flags=this._sock.rQshiftBytes(4);// flags
}else{this._sock.rQskipBytes(16)}}/*
         * The x-position indicates the reason for the change:
         *
         *  0 - server resized on its own
         *  1 - this client requested the resize
         *  2 - another client requested the resize
         */// We need to handle errors when we requested the resize.
if(this._FBU.x===1&&this._FBU.y!==0){var msg='';// The y-position indicates the status code from the server
switch(this._FBU.y){case 1:msg='Resize is administratively prohibited';break;case 2:msg='Out of resources';break;case 3:msg='Invalid screen layout';break;default:msg='Unknown reason';break;}Log.Warn('Server did not accept the resize request: '+msg)}else{this._resize(this._FBU.width,this._FBU.height)}this._FBU.bytes=0;this._FBU.rects-=1;return true},DesktopSize:function DesktopSize(){this._resize(this._FBU.width,this._FBU.height);this._FBU.bytes=0;this._FBU.rects-=1;return true},Cursor:function Cursor(){Log.Debug('>> set_cursor');var x=this._FBU.x;// hotspot-x
var y=this._FBU.y;// hotspot-y
var w=this._FBU.width;var h=this._FBU.height;var pixelslength=w*h*4;var masklength=Math.floor((w+7)/8)*h;this._FBU.bytes=pixelslength+masklength;if(this._sock.rQwait('cursor encoding',this._FBU.bytes)){return false}this._display.changeCursor(this._sock.rQshiftBytes(pixelslength),this._sock.rQshiftBytes(masklength),x,y,w,h);this._FBU.bytes=0;this._FBU.rects--;Log.Debug('<< set_cursor');return true},QEMUExtendedKeyEvent:function QEMUExtendedKeyEvent(){this._FBU.rects--;// Old Safari doesn't support creating keyboard events
try{var keyboardEvent=document.createEvent('keyboardEvent');if(keyboardEvent.code!==undefined){this._qemuExtKeyEventSupported=true}}catch(err){}}};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=Websock;var _logging=require('./util/logging.js');var Log=_interopRequireWildcard(_logging);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function Websock(){'use strict';this._websocket=null;// WebSocket object
this._rQi=0;// Receive queue index
this._rQlen=0;// Next write position in the receive queue
this._rQbufferSize=1024*1024*4;// Receive queue buffer size (4 MiB)
this._rQmax=this._rQbufferSize/8;// called in init: this._rQ = new Uint8Array(this._rQbufferSize);
this._rQ=null;// Receive queue
this._sQbufferSize=1024*10;// 10 KiB
// called in init: this._sQ = new Uint8Array(this._sQbufferSize);
this._sQlen=0;this._sQ=null;// Send queue
this._eventHandlers={'message':function message(){},'open':function open(){},'close':function close(){},'error':function error(){}}}/*
 * Websock: high-performance binary WebSockets
 * Copyright (C) 2012 Joel Martin
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * Websock is similar to the standard WebSocket object but with extra
 * buffer handling.
 *
 * Websock has built-in receive queue buffering; the message event
 * does not contain actual data but is simply a notification that
 * there is new data available. Several rQ* methods are available to
 * read binary data off of the receive queue.
 */;// this has performance issues in some versions Chromium, and
// doesn't gain a tremendous amount of performance increase in Firefox
// at the moment.  It may be valuable to turn it on in the future.
var ENABLE_COPYWITHIN=false;var MAX_RQ_GROW_SIZE=40*1024*1024;// 40 MiB
var typedArrayToString=function(){// This is only for PhantomJS, which doesn't like apply-ing
// with Typed Arrays
try{var arr=new Uint8Array([1,2,3]);String.fromCharCode.apply(null,arr);return function(a){return String.fromCharCode.apply(null,a)}}catch(ex){return function(a){return String.fromCharCode.apply(null,Array.prototype.slice.call(a))}}}();Websock.prototype={// Getters and Setters
get_sQ:function get_sQ(){return this._sQ},get_rQ:function get_rQ(){return this._rQ},get_rQi:function get_rQi(){return this._rQi},set_rQi:function set_rQi(val){this._rQi=val},// Receive Queue
rQlen:function rQlen(){return this._rQlen-this._rQi},rQpeek8:function rQpeek8(){return this._rQ[this._rQi]},rQshift8:function rQshift8(){return this._rQ[this._rQi++]},rQskip8:function rQskip8(){this._rQi++},rQskipBytes:function rQskipBytes(num){this._rQi+=num},// TODO(directxman12): test performance with these vs a DataView
rQshift16:function rQshift16(){return(this._rQ[this._rQi++]<<8)+this._rQ[this._rQi++]},rQshift32:function rQshift32(){return(this._rQ[this._rQi++]<<24)+(this._rQ[this._rQi++]<<16)+(this._rQ[this._rQi++]<<8)+this._rQ[this._rQi++]},rQshiftStr:function rQshiftStr(len){if(typeof len==='undefined'){len=this.rQlen()}var arr=new Uint8Array(this._rQ.buffer,this._rQi,len);this._rQi+=len;return typedArrayToString(arr)},rQshiftBytes:function rQshiftBytes(len){if(typeof len==='undefined'){len=this.rQlen()}this._rQi+=len;return new Uint8Array(this._rQ.buffer,this._rQi-len,len)},rQshiftTo:function rQshiftTo(target,len){if(len===undefined){len=this.rQlen()}// TODO: make this just use set with views when using a ArrayBuffer to store the rQ
target.set(new Uint8Array(this._rQ.buffer,this._rQi,len));this._rQi+=len},rQwhole:function rQwhole(){return new Uint8Array(this._rQ.buffer,0,this._rQlen)},rQslice:function rQslice(start,end){if(end){return new Uint8Array(this._rQ.buffer,this._rQi+start,end-start)}else{return new Uint8Array(this._rQ.buffer,this._rQi+start,this._rQlen-this._rQi-start)}},// Check to see if we must wait for 'num' bytes (default to FBU.bytes)
// to be available in the receive queue. Return true if we need to
// wait (and possibly print a debug message), otherwise false.
rQwait:function rQwait(msg,num,goback){var rQlen=this._rQlen-this._rQi;// Skip rQlen() function call
if(rQlen<num){if(goback){if(this._rQi<goback){throw new Error('rQwait cannot backup '+goback+' bytes')}this._rQi-=goback}return true;// true means need more data
}return false},// Send Queue
flush:function flush(){if(this._sQlen>0&&this._websocket.readyState===WebSocket.OPEN){this._websocket.send(this._encode_message());this._sQlen=0}},send:function send(arr){this._sQ.set(arr,this._sQlen);this._sQlen+=arr.length;this.flush()},send_string:function send_string(str){this.send(str.split('').map(function(chr){return chr.charCodeAt(0)}))},// Event Handlers
off:function off(evt){this._eventHandlers[evt]=function(){}},on:function on(evt,handler){this._eventHandlers[evt]=handler},_allocate_buffers:function _allocate_buffers(){this._rQ=new Uint8Array(this._rQbufferSize);this._sQ=new Uint8Array(this._sQbufferSize)},init:function init(){this._allocate_buffers();this._rQi=0;this._websocket=null},open:function open(uri,protocols){var ws_schema=uri.match(/^([a-z]+):\/\//)[1];this.init();this._websocket=new WebSocket(uri,protocols);this._websocket.binaryType='arraybuffer';this._websocket.onmessage=this._recv_message.bind(this);this._websocket.onopen=function(){Log.Debug('>> WebSock.onopen');if(this._websocket.protocol){Log.Info('Server choose sub-protocol: '+this._websocket.protocol)}this._eventHandlers.open();Log.Debug('<< WebSock.onopen')}.bind(this);this._websocket.onclose=function(e){Log.Debug('>> WebSock.onclose');this._eventHandlers.close(e);Log.Debug('<< WebSock.onclose')}.bind(this);this._websocket.onerror=function(e){Log.Debug('>> WebSock.onerror: '+e);this._eventHandlers.error(e);Log.Debug('<< WebSock.onerror: '+e)}.bind(this)},close:function close(){if(this._websocket){if(this._websocket.readyState===WebSocket.OPEN||this._websocket.readyState===WebSocket.CONNECTING){Log.Info('Closing WebSocket connection');this._websocket.close()}this._websocket.onmessage=function(e){return}}},// private methods
_encode_message:function _encode_message(){// Put in a binary arraybuffer
// according to the spec, you can send ArrayBufferViews with the send method
return new Uint8Array(this._sQ.buffer,0,this._sQlen)},_expand_compact_rQ:function _expand_compact_rQ(min_fit){var resizeNeeded=min_fit||this._rQlen-this._rQi>this._rQbufferSize/2;if(resizeNeeded){if(!min_fit){// just double the size if we need to do compaction
this._rQbufferSize*=2}else{// otherwise, make sure we satisy rQlen - rQi + min_fit < rQbufferSize / 8
this._rQbufferSize=(this._rQlen-this._rQi+min_fit)*8}}// we don't want to grow unboundedly
if(this._rQbufferSize>MAX_RQ_GROW_SIZE){this._rQbufferSize=MAX_RQ_GROW_SIZE;if(this._rQbufferSize-this._rQlen-this._rQi<min_fit){throw new Exception('Receive Queue buffer exceeded '+MAX_RQ_GROW_SIZE+' bytes, and the new message could not fit')}}if(resizeNeeded){var old_rQbuffer=this._rQ.buffer;this._rQmax=this._rQbufferSize/8;this._rQ=new Uint8Array(this._rQbufferSize);this._rQ.set(new Uint8Array(old_rQbuffer,this._rQi))}else{if(ENABLE_COPYWITHIN){this._rQ.copyWithin(0,this._rQi)}else{this._rQ.set(new Uint8Array(this._rQ.buffer,this._rQi))}}this._rQlen=this._rQlen-this._rQi;this._rQi=0},_decode_message:function _decode_message(data){// push arraybuffer values onto the end
var u8=new Uint8Array(data);if(u8.length>this._rQbufferSize-this._rQlen){this._expand_compact_rQ(u8.length)}this._rQ.set(u8,this._rQlen);this._rQlen+=u8.length},_recv_message:function _recv_message(e){this._decode_message(e.data);if(this.rQlen()>0){this._eventHandlers.message();// Compact the receive queue
if(this._rQlen==this._rQi){this._rQlen=0;this._rQi=0}else if(this._rQlen>this._rQmax){this._expand_compact_rQ()}}else{Log.Debug('Ignoring empty message')}}};'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _keysym=require('./keysym.js');var _keysym2=_interopRequireDefault(_keysym);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}/*
 * Mapping between HTML key values and VNC/X11 keysyms for "special"
 * keys that cannot be handled via their Unicode codepoint.
 *
 * See https://www.w3.org/TR/uievents-key/ for possible values.
 */var DOMKeyTable={};/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2017 Pierre Ossman for Cendio AB
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 */function addStandard(key,standard){if(standard===undefined)throw'Undefined keysym for key "'+key+'"';if(key in DOMKeyTable)throw'Duplicate entry for key "'+key+'"';DOMKeyTable[key]=[standard,standard,standard,standard]}function addLeftRight(key,left,right){if(left===undefined)throw'Undefined keysym for key "'+key+'"';if(right===undefined)throw'Undefined keysym for key "'+key+'"';if(key in DOMKeyTable)throw'Duplicate entry for key "'+key+'"';DOMKeyTable[key]=[left,left,right,left]}function addNumpad(key,standard,numpad){if(standard===undefined)throw'Undefined keysym for key "'+key+'"';if(numpad===undefined)throw'Undefined keysym for key "'+key+'"';if(key in DOMKeyTable)throw'Duplicate entry for key "'+key+'"';DOMKeyTable[key]=[standard,standard,standard,numpad]}// 2.2. Modifier Keys
addLeftRight('Alt',_keysym2.default.XK_Alt_L,_keysym2.default.XK_Alt_R);addStandard('AltGraph',_keysym2.default.XK_ISO_Level3_Shift);addStandard('CapsLock',_keysym2.default.XK_Caps_Lock);addLeftRight('Control',_keysym2.default.XK_Control_L,_keysym2.default.XK_Control_R);// - Fn
// - FnLock
addLeftRight('Hyper',_keysym2.default.XK_Super_L,_keysym2.default.XK_Super_R);addLeftRight('Meta',_keysym2.default.XK_Super_L,_keysym2.default.XK_Super_R);addStandard('NumLock',_keysym2.default.XK_Num_Lock);addStandard('ScrollLock',_keysym2.default.XK_Scroll_Lock);addLeftRight('Shift',_keysym2.default.XK_Shift_L,_keysym2.default.XK_Shift_R);addLeftRight('Super',_keysym2.default.XK_Super_L,_keysym2.default.XK_Super_R);// - Symbol
// - SymbolLock
// 2.3. Whitespace Keys
addNumpad('Enter',_keysym2.default.XK_Return,_keysym2.default.XK_KP_Enter);addStandard('Tab',_keysym2.default.XK_Tab);addNumpad(' ',_keysym2.default.XK_space,_keysym2.default.XK_KP_Space);// 2.4. Navigation Keys
addNumpad('ArrowDown',_keysym2.default.XK_Down,_keysym2.default.XK_KP_Down);addNumpad('ArrowUp',_keysym2.default.XK_Up,_keysym2.default.XK_KP_Up);addNumpad('ArrowLeft',_keysym2.default.XK_Left,_keysym2.default.XK_KP_Left);addNumpad('ArrowRight',_keysym2.default.XK_Right,_keysym2.default.XK_KP_Right);addNumpad('End',_keysym2.default.XK_End,_keysym2.default.XK_KP_End);addNumpad('Home',_keysym2.default.XK_Home,_keysym2.default.XK_KP_Home);addNumpad('PageDown',_keysym2.default.XK_Next,_keysym2.default.XK_KP_Next);addNumpad('PageUp',_keysym2.default.XK_Prior,_keysym2.default.XK_KP_Prior);// 2.5. Editing Keys
addStandard('Backspace',_keysym2.default.XK_BackSpace);addStandard('Clear',_keysym2.default.XK_Clear);addStandard('Copy',_keysym2.default.XF86XK_Copy);// - CrSel
addStandard('Cut',_keysym2.default.XF86XK_Cut);addNumpad('Delete',_keysym2.default.XK_Delete,_keysym2.default.XK_KP_Delete);// - EraseEof
// - ExSel
addNumpad('Insert',_keysym2.default.XK_Insert,_keysym2.default.XK_KP_Insert);addStandard('Paste',_keysym2.default.XF86XK_Paste);addStandard('Redo',_keysym2.default.XK_Redo);addStandard('Undo',_keysym2.default.XK_Undo);// 2.6. UI Keys
// - Accept
// - Again (could just be XK_Redo)
// - Attn
addStandard('Cancel',_keysym2.default.XK_Cancel);addStandard('ContextMenu',_keysym2.default.XK_Menu);addStandard('Escape',_keysym2.default.XK_Escape);addStandard('Execute',_keysym2.default.XK_Execute);addStandard('Find',_keysym2.default.XK_Find);addStandard('Help',_keysym2.default.XK_Help);addStandard('Pause',_keysym2.default.XK_Pause);// - Play
// - Props
addStandard('Select',_keysym2.default.XK_Select);addStandard('ZoomIn',_keysym2.default.XF86XK_ZoomIn);addStandard('ZoomOut',_keysym2.default.XF86XK_ZoomOut);// 2.7. Device Keys
addStandard('BrightnessDown',_keysym2.default.XF86XK_MonBrightnessDown);addStandard('BrightnessUp',_keysym2.default.XF86XK_MonBrightnessUp);addStandard('Eject',_keysym2.default.XF86XK_Eject);addStandard('LogOff',_keysym2.default.XF86XK_LogOff);addStandard('Power',_keysym2.default.XF86XK_PowerOff);addStandard('PowerOff',_keysym2.default.XF86XK_PowerDown);addStandard('PrintScreen',_keysym2.default.XK_Print);addStandard('Hibernate',_keysym2.default.XF86XK_Hibernate);addStandard('Standby',_keysym2.default.XF86XK_Standby);addStandard('WakeUp',_keysym2.default.XF86XK_WakeUp);// 2.8. IME and Composition Keys
addStandard('AllCandidates',_keysym2.default.XK_MultipleCandidate);addStandard('Alphanumeric',_keysym2.default.XK_Eisu_Shift);// could also be _Eisu_Toggle
addStandard('CodeInput',_keysym2.default.XK_Codeinput);addStandard('Compose',_keysym2.default.XK_Multi_key);addStandard('Convert',_keysym2.default.XK_Henkan);// - Dead
// - FinalMode
addStandard('GroupFirst',_keysym2.default.XK_ISO_First_Group);addStandard('GroupLast',_keysym2.default.XK_ISO_Last_Group);addStandard('GroupNext',_keysym2.default.XK_ISO_Next_Group);addStandard('GroupPrevious',_keysym2.default.XK_ISO_Prev_Group);// - ModeChange (XK_Mode_switch is often used for AltGr)
// - NextCandidate
addStandard('NonConvert',_keysym2.default.XK_Muhenkan);addStandard('PreviousCandidate',_keysym2.default.XK_PreviousCandidate);// - Process
addStandard('SingleCandidate',_keysym2.default.XK_SingleCandidate);addStandard('HangulMode',_keysym2.default.XK_Hangul);addStandard('HanjaMode',_keysym2.default.XK_Hangul_Hanja);addStandard('JunjuaMode',_keysym2.default.XK_Hangul_Jeonja);addStandard('Eisu',_keysym2.default.XK_Eisu_toggle);addStandard('Hankaku',_keysym2.default.XK_Hankaku);addStandard('Hiragana',_keysym2.default.XK_Hiragana);addStandard('HiraganaKatakana',_keysym2.default.XK_Hiragana_Katakana);addStandard('KanaMode',_keysym2.default.XK_Kana_Shift);// could also be _Kana_Lock
addStandard('KanjiMode',_keysym2.default.XK_Kanji);addStandard('Katakana',_keysym2.default.XK_Katakana);addStandard('Romaji',_keysym2.default.XK_Romaji);addStandard('Zenkaku',_keysym2.default.XK_Zenkaku);addStandard('ZenkakuHanaku',_keysym2.default.XK_Zenkaku_Hankaku);// 2.9. General-Purpose Function Keys
addStandard('F1',_keysym2.default.XK_F1);addStandard('F2',_keysym2.default.XK_F2);addStandard('F3',_keysym2.default.XK_F3);addStandard('F4',_keysym2.default.XK_F4);addStandard('F5',_keysym2.default.XK_F5);addStandard('F6',_keysym2.default.XK_F6);addStandard('F7',_keysym2.default.XK_F7);addStandard('F8',_keysym2.default.XK_F8);addStandard('F9',_keysym2.default.XK_F9);addStandard('F10',_keysym2.default.XK_F10);addStandard('F11',_keysym2.default.XK_F11);addStandard('F12',_keysym2.default.XK_F12);addStandard('F13',_keysym2.default.XK_F13);addStandard('F14',_keysym2.default.XK_F14);addStandard('F15',_keysym2.default.XK_F15);addStandard('F16',_keysym2.default.XK_F16);addStandard('F17',_keysym2.default.XK_F17);addStandard('F18',_keysym2.default.XK_F18);addStandard('F19',_keysym2.default.XK_F19);addStandard('F20',_keysym2.default.XK_F20);addStandard('F21',_keysym2.default.XK_F21);addStandard('F22',_keysym2.default.XK_F22);addStandard('F23',_keysym2.default.XK_F23);addStandard('F24',_keysym2.default.XK_F24);addStandard('F25',_keysym2.default.XK_F25);addStandard('F26',_keysym2.default.XK_F26);addStandard('F27',_keysym2.default.XK_F27);addStandard('F28',_keysym2.default.XK_F28);addStandard('F29',_keysym2.default.XK_F29);addStandard('F30',_keysym2.default.XK_F30);addStandard('F31',_keysym2.default.XK_F31);addStandard('F32',_keysym2.default.XK_F32);addStandard('F33',_keysym2.default.XK_F33);addStandard('F34',_keysym2.default.XK_F34);addStandard('F35',_keysym2.default.XK_F35);// - Soft1...
// 2.10. Multimedia Keys
// - ChannelDown
// - ChannelUp
addStandard('Close',_keysym2.default.XF86XK_Close);addStandard('MailForward',_keysym2.default.XF86XK_MailForward);addStandard('MailReply',_keysym2.default.XF86XK_Reply);addStandard('MainSend',_keysym2.default.XF86XK_Send);addStandard('MediaFastForward',_keysym2.default.XF86XK_AudioForward);addStandard('MediaPause',_keysym2.default.XF86XK_AudioPause);addStandard('MediaPlay',_keysym2.default.XF86XK_AudioPlay);addStandard('MediaRecord',_keysym2.default.XF86XK_AudioRecord);addStandard('MediaRewind',_keysym2.default.XF86XK_AudioRewind);addStandard('MediaStop',_keysym2.default.XF86XK_AudioStop);addStandard('MediaTrackNext',_keysym2.default.XF86XK_AudioNext);addStandard('MediaTrackPrevious',_keysym2.default.XF86XK_AudioPrev);addStandard('New',_keysym2.default.XF86XK_New);addStandard('Open',_keysym2.default.XF86XK_Open);addStandard('Print',_keysym2.default.XK_Print);addStandard('Save',_keysym2.default.XF86XK_Save);addStandard('SpellCheck',_keysym2.default.XF86XK_Spell);// 2.11. Multimedia Numpad Keys
// - Key11
// - Key12
// 2.12. Audio Keys
// - AudioBalanceLeft
// - AudioBalanceRight
// - AudioBassDown
// - AudioBassBoostDown
// - AudioBassBoostToggle
// - AudioBassBoostUp
// - AudioBassUp
// - AudioFaderFront
// - AudioFaderRear
// - AudioSurroundModeNext
// - AudioTrebleDown
// - AudioTrebleUp
addStandard('AudioVolumeDown',_keysym2.default.XF86XK_AudioLowerVolume);addStandard('AudioVolumeUp',_keysym2.default.XF86XK_AudioRaiseVolume);addStandard('AudioVolumeMute',_keysym2.default.XF86XK_AudioMute);// - MicrophoneToggle
// - MicrophoneVolumeDown
// - MicrophoneVolumeUp
addStandard('MicrophoneVolumeMute',_keysym2.default.XF86XK_AudioMicMute);// 2.13. Speech Keys
// - SpeechCorrectionList
// - SpeechInputToggle
// 2.14. Application Keys
addStandard('LaunchCalculator',_keysym2.default.XF86XK_Calculator);addStandard('LaunchCalendar',_keysym2.default.XF86XK_Calendar);addStandard('LaunchMail',_keysym2.default.XF86XK_Mail);addStandard('LaunchMediaPlayer',_keysym2.default.XF86XK_AudioMedia);addStandard('LaunchMusicPlayer',_keysym2.default.XF86XK_Music);addStandard('LaunchMyComputer',_keysym2.default.XF86XK_MyComputer);addStandard('LaunchPhone',_keysym2.default.XF86XK_Phone);addStandard('LaunchScreenSaver',_keysym2.default.XF86XK_ScreenSaver);addStandard('LaunchSpreadsheet',_keysym2.default.XF86XK_Excel);addStandard('LaunchWebBrowser',_keysym2.default.XF86XK_WWW);addStandard('LaunchWebCam',_keysym2.default.XF86XK_WebCam);addStandard('LaunchWordProcessor',_keysym2.default.XF86XK_Word);// 2.15. Browser Keys
addStandard('BrowserBack',_keysym2.default.XF86XK_Back);addStandard('BrowserFavorites',_keysym2.default.XF86XK_Favorites);addStandard('BrowserForward',_keysym2.default.XF86XK_Forward);addStandard('BrowserHome',_keysym2.default.XF86XK_HomePage);addStandard('BrowserRefresh',_keysym2.default.XF86XK_Refresh);addStandard('BrowserSearch',_keysym2.default.XF86XK_Search);addStandard('BrowserStop',_keysym2.default.XF86XK_Stop);// 2.16. Mobile Phone Keys
// - A whole bunch...
// 2.17. TV Keys
// - A whole bunch...
// 2.18. Media Controller Keys
// - A whole bunch...
addStandard('Dimmer',_keysym2.default.XF86XK_BrightnessAdjust);addStandard('MediaAudioTrack',_keysym2.default.XF86XK_AudioCycleTrack);addStandard('RandomToggle',_keysym2.default.XF86XK_AudioRandomPlay);addStandard('SplitScreenToggle',_keysym2.default.XF86XK_SplitScreen);addStandard('Subtitle',_keysym2.default.XF86XK_Subtitle);addStandard('VideoModeNext',_keysym2.default.XF86XK_Next_VMode);// Extra: Numpad
addNumpad('=',_keysym2.default.XK_equal,_keysym2.default.XK_KP_Equal);addNumpad('+',_keysym2.default.XK_plus,_keysym2.default.XK_KP_Add);addNumpad('-',_keysym2.default.XK_minus,_keysym2.default.XK_KP_Subtract);addNumpad('*',_keysym2.default.XK_asterisk,_keysym2.default.XK_KP_Multiply);addNumpad('/',_keysym2.default.XK_slash,_keysym2.default.XK_KP_Divide);addNumpad('.',_keysym2.default.XK_period,_keysym2.default.XK_KP_Decimal);addNumpad(',',_keysym2.default.XK_comma,_keysym2.default.XK_KP_Separator);addNumpad('0',_keysym2.default.XK_0,_keysym2.default.XK_KP_0);addNumpad('1',_keysym2.default.XK_1,_keysym2.default.XK_KP_1);addNumpad('2',_keysym2.default.XK_2,_keysym2.default.XK_KP_2);addNumpad('3',_keysym2.default.XK_3,_keysym2.default.XK_KP_3);addNumpad('4',_keysym2.default.XK_4,_keysym2.default.XK_KP_4);addNumpad('5',_keysym2.default.XK_5,_keysym2.default.XK_KP_5);addNumpad('6',_keysym2.default.XK_6,_keysym2.default.XK_KP_6);addNumpad('7',_keysym2.default.XK_7,_keysym2.default.XK_KP_7);addNumpad('8',_keysym2.default.XK_8,_keysym2.default.XK_KP_8);addNumpad('9',_keysym2.default.XK_9,_keysym2.default.XK_KP_9);exports.default=DOMKeyTable;'use strict';Object.defineProperty(exports,'__esModule',{value:true});/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2017 Pierre Ossman for Cendio AB
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 *//*
 * Fallback mapping between HTML key codes (physical keys) and
 * HTML key values. This only works for keys that don't vary
 * between layouts. We also omit those who manage fine by mapping the
 * Unicode representation.
 *
 * See https://www.w3.org/TR/uievents-code/ for possible codes.
 * See https://www.w3.org/TR/uievents-key/ for possible values.
 */exports.default={// 3.1.1.1. Writing System Keys
'Backspace':'Backspace',// 3.1.1.2. Functional Keys
'AltLeft':'Alt','AltRight':'Alt',// This could also be 'AltGraph'
'CapsLock':'CapsLock','ContextMenu':'ContextMenu','ControlLeft':'Control','ControlRight':'Control','Enter':'Enter','MetaLeft':'Meta','MetaRight':'Meta','ShiftLeft':'Shift','ShiftRight':'Shift','Tab':'Tab',// FIXME: Japanese/Korean keys
// 3.1.2. Control Pad Section
'Delete':'Delete','End':'End','Help':'Help','Home':'Home','Insert':'Insert','PageDown':'PageDown','PageUp':'PageUp',// 3.1.3. Arrow Pad Section
'ArrowDown':'ArrowDown','ArrowLeft':'ArrowLeft','ArrowRight':'ArrowRight','ArrowUp':'ArrowUp',// 3.1.4. Numpad Section
'NumLock':'NumLock','NumpadBackspace':'Backspace','NumpadClear':'Clear',// 3.1.5. Function Section
'Escape':'Escape','F1':'F1','F2':'F2','F3':'F3','F4':'F4','F5':'F5','F6':'F6','F7':'F7','F8':'F8','F9':'F9','F10':'F10','F11':'F11','F12':'F12','F13':'F13','F14':'F14','F15':'F15','F16':'F16','F17':'F17','F18':'F18','F19':'F19','F20':'F20','F21':'F21','F22':'F22','F23':'F23','F24':'F24','F25':'F25','F26':'F26','F27':'F27','F28':'F28','F29':'F29','F30':'F30','F31':'F31','F32':'F32','F33':'F33','F34':'F34','F35':'F35','PrintScreen':'PrintScreen','ScrollLock':'ScrollLock','Pause':'Pause',// 3.1.6. Media Keys
'BrowserBack':'BrowserBack','BrowserFavorites':'BrowserFavorites','BrowserForward':'BrowserForward','BrowserHome':'BrowserHome','BrowserRefresh':'BrowserRefresh','BrowserSearch':'BrowserSearch','BrowserStop':'BrowserStop','Eject':'Eject','LaunchApp1':'LaunchMyComputer','LaunchApp2':'LaunchCalendar','LaunchMail':'LaunchMail','MediaPlayPause':'MediaPlay','MediaStop':'MediaStop','MediaTrackNext':'MediaTrackNext','MediaTrackPrevious':'MediaTrackPrevious','Power':'Power','Sleep':'Sleep','AudioVolumeDown':'AudioVolumeDown','AudioVolumeMute':'AudioVolumeMute','AudioVolumeUp':'AudioVolumeUp','WakeUp':'WakeUp'};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=Keyboard;var _logging=require('../util/logging.js');var Log=_interopRequireWildcard(_logging);var _events=require('../util/events.js');var _util=require('./util.js');var KeyboardUtil=_interopRequireWildcard(_util);var _keysym=require('./keysym.js');var _keysym2=_interopRequireDefault(_keysym);var _browser=require('../util/browser.js');var browser=_interopRequireWildcard(_browser);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}//
// Keyboard event handler
//
function Keyboard(target){this._target=target||null;this._keyDownList={};// List of depressed keys
// (even if they are happy)
this._pendingKey=null;// Key waiting for keypress
// keep these here so we can refer to them later
this._eventHandlers={'keyup':this._handleKeyUp.bind(this),'keydown':this._handleKeyDown.bind(this),'keypress':this._handleKeyPress.bind(this),'blur':this._allKeysUp.bind(this)}}/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Copyright (C) 2013 Samuel Mannehed for Cendio AB
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 */;Keyboard.prototype={// ===== EVENT HANDLERS =====
onkeyevent:function onkeyevent(){},// Handler for key press/release
// ===== PRIVATE METHODS =====
_sendKeyEvent:function _sendKeyEvent(keysym,code,down){Log.Debug('onkeyevent '+(down?'down':'up')+', keysym: '+keysym,', code: '+code);// Windows sends CtrlLeft+AltRight when you press
// AltGraph, which tends to confuse the hell out of
// remote systems. Fake a release of these keys until
// there is a way to detect AltGraph properly.
var fakeAltGraph=false;if(down&&browser.isWindows()){if(code!=='ControlLeft'&&code!=='AltRight'&&'ControlLeft'in this._keyDownList&&'AltRight'in this._keyDownList){fakeAltGraph=true;this.onkeyevent(this._keyDownList['AltRight'],'AltRight',false);this.onkeyevent(this._keyDownList['ControlLeft'],'ControlLeft',false)}}this.onkeyevent(keysym,code,down);if(fakeAltGraph){this.onkeyevent(this._keyDownList['ControlLeft'],'ControlLeft',true);this.onkeyevent(this._keyDownList['AltRight'],'AltRight',true)}},_getKeyCode:function _getKeyCode(e){var code=KeyboardUtil.getKeycode(e);if(code!=='Unidentified'){return code}// Unstable, but we don't have anything else to go on
// (don't use it for 'keypress' events thought since
// WebKit sets it to the same as charCode)
if(e.keyCode&&e.type!=='keypress'){// 229 is used for composition events
if(e.keyCode!==229){return'Platform'+e.keyCode}}// A precursor to the final DOM3 standard. Unfortunately it
// is not layout independent, so it is as bad as using keyCode
if(e.keyIdentifier){// Non-character key?
if(e.keyIdentifier.substr(0,2)!=='U+'){return e.keyIdentifier}var codepoint=parseInt(e.keyIdentifier.substr(2),16);var char=String.fromCharCode(codepoint);// Some implementations fail to uppercase the symbols
char=char.toUpperCase();return'Platform'+char.charCodeAt()}return'Unidentified'},_handleKeyDown:function _handleKeyDown(e){var code=this._getKeyCode(e);var keysym=KeyboardUtil.getKeysym(e);// We cannot handle keys we cannot track, but we also need
// to deal with virtual keyboards which omit key info
// (iOS omits tracking info on keyup events, which forces us to
// special treat that platform here)
if(code==='Unidentified'||browser.isIOS()){if(keysym){// If it's a virtual keyboard then it should be
// sufficient to just send press and release right
// after each other
this._sendKeyEvent(keysym,code,true);this._sendKeyEvent(keysym,code,false)}(0,_events.stopEvent)(e);return}// Alt behaves more like AltGraph on macOS, so shuffle the
// keys around a bit to make things more sane for the remote
// server. This method is used by RealVNC and TigerVNC (and
// possibly others).
if(browser.isMac()){switch(keysym){case _keysym2.default.XK_Super_L:keysym=_keysym2.default.XK_Alt_L;break;case _keysym2.default.XK_Super_R:keysym=_keysym2.default.XK_Super_L;break;case _keysym2.default.XK_Alt_L:keysym=_keysym2.default.XK_Mode_switch;break;case _keysym2.default.XK_Alt_R:keysym=_keysym2.default.XK_ISO_Level3_Shift;break;}}// Is this key already pressed? If so, then we must use the
// same keysym or we'll confuse the server
if(code in this._keyDownList){keysym=this._keyDownList[code]}// macOS doesn't send proper key events for modifiers, only
// state change events. That gets extra confusing for CapsLock
// which toggles on each press, but not on release. So pretend
// it was a quick press and release of the button.
if(browser.isMac()&&code==='CapsLock'){this._sendKeyEvent(_keysym2.default.XK_Caps_Lock,'CapsLock',true);this._sendKeyEvent(_keysym2.default.XK_Caps_Lock,'CapsLock',false);(0,_events.stopEvent)(e);return}// If this is a legacy browser then we'll need to wait for
// a keypress event as well
// (IE and Edge has a broken KeyboardEvent.key, so we can't
// just check for the presence of that field)
if(!keysym&&(!e.key||browser.isIE()||browser.isEdge())){this._pendingKey=code;// However we might not get a keypress event if the key
// is non-printable, which needs some special fallback
// handling
setTimeout(this._handleKeyPressTimeout.bind(this),10,e);return}this._pendingKey=null;(0,_events.stopEvent)(e);this._keyDownList[code]=keysym;this._sendKeyEvent(keysym,code,true)},// Legacy event for browsers without code/key
_handleKeyPress:function _handleKeyPress(e){(0,_events.stopEvent)(e);// Are we expecting a keypress?
if(this._pendingKey===null){return}var code=this._getKeyCode(e);var keysym=KeyboardUtil.getKeysym(e);// The key we were waiting for?
if(code!=='Unidentified'&&code!=this._pendingKey){return}code=this._pendingKey;this._pendingKey=null;if(!keysym){Log.Info('keypress with no keysym:',e);return}this._keyDownList[code]=keysym;this._sendKeyEvent(keysym,code,true)},_handleKeyPressTimeout:function _handleKeyPressTimeout(e){// Did someone manage to sort out the key already?
if(this._pendingKey===null){return}var code,keysym;code=this._pendingKey;this._pendingKey=null;// We have no way of knowing the proper keysym with the
// information given, but the following are true for most
// layouts
if(e.keyCode>=48&&e.keyCode<=57){// Digit
keysym=e.keyCode}else if(e.keyCode>=65&&e.keyCode<=90){// Character (A-Z)
var char=String.fromCharCode(e.keyCode);// A feeble attempt at the correct case
if(e.shiftKey)char=char.toUpperCase();else char=char.toLowerCase();keysym=char.charCodeAt()}else{// Unknown, give up
keysym=0}this._keyDownList[code]=keysym;this._sendKeyEvent(keysym,code,true)},_handleKeyUp:function _handleKeyUp(e){(0,_events.stopEvent)(e);var code=this._getKeyCode(e);// See comment in _handleKeyDown()
if(browser.isMac()&&code==='CapsLock'){this._sendKeyEvent(_keysym2.default.XK_Caps_Lock,'CapsLock',true);this._sendKeyEvent(_keysym2.default.XK_Caps_Lock,'CapsLock',false);return}// Do we really think this key is down?
if(!(code in this._keyDownList)){return}this._sendKeyEvent(this._keyDownList[code],code,false);delete this._keyDownList[code]},_allKeysUp:function _allKeysUp(){Log.Debug('>> Keyboard.allKeysUp');for(var code in this._keyDownList){this._sendKeyEvent(this._keyDownList[code],code,false)};this._keyDownList={};Log.Debug('<< Keyboard.allKeysUp')},// ===== PUBLIC METHODS =====
grab:function grab(){//Log.Debug(">> Keyboard.grab");
var c=this._target;c.addEventListener('keydown',this._eventHandlers.keydown);c.addEventListener('keyup',this._eventHandlers.keyup);c.addEventListener('keypress',this._eventHandlers.keypress);// Release (key up) if window loses focus
window.addEventListener('blur',this._eventHandlers.blur);//Log.Debug("<< Keyboard.grab");
},ungrab:function ungrab(){//Log.Debug(">> Keyboard.ungrab");
var c=this._target;c.removeEventListener('keydown',this._eventHandlers.keydown);c.removeEventListener('keyup',this._eventHandlers.keyup);c.removeEventListener('keypress',this._eventHandlers.keypress);window.removeEventListener('blur',this._eventHandlers.blur);// Release (key up) all keys that are in a down state
this._allKeysUp();//Log.Debug(">> Keyboard.ungrab");
}};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default={XK_VoidSymbol:16777215,/* Void symbol */XK_BackSpace:65288,/* Back space, back char */XK_Tab:65289,XK_Linefeed:65290,/* Linefeed, LF */XK_Clear:65291,XK_Return:65293,/* Return, enter */XK_Pause:65299,/* Pause, hold */XK_Scroll_Lock:65300,XK_Sys_Req:65301,XK_Escape:65307,XK_Delete:65535,/* Delete, rubout *//* International & multi-key character composition */XK_Multi_key:65312,/* Multi-key character compose */XK_Codeinput:65335,XK_SingleCandidate:65340,XK_MultipleCandidate:65341,XK_PreviousCandidate:65342,/* Japanese keyboard support */XK_Kanji:65313,/* Kanji, Kanji convert */XK_Muhenkan:65314,/* Cancel Conversion */XK_Henkan_Mode:65315,/* Start/Stop Conversion */XK_Henkan:65315,/* Alias for Henkan_Mode */XK_Romaji:65316,/* to Romaji */XK_Hiragana:65317,/* to Hiragana */XK_Katakana:65318,/* to Katakana */XK_Hiragana_Katakana:65319,/* Hiragana/Katakana toggle */XK_Zenkaku:65320,/* to Zenkaku */XK_Hankaku:65321,/* to Hankaku */XK_Zenkaku_Hankaku:65322,/* Zenkaku/Hankaku toggle */XK_Touroku:65323,/* Add to Dictionary */XK_Massyo:65324,/* Delete from Dictionary */XK_Kana_Lock:65325,/* Kana Lock */XK_Kana_Shift:65326,/* Kana Shift */XK_Eisu_Shift:65327,/* Alphanumeric Shift */XK_Eisu_toggle:65328,/* Alphanumeric toggle */XK_Kanji_Bangou:65335,/* Codeinput */XK_Zen_Koho:65341,/* Multiple/All Candidate(s) */XK_Mae_Koho:65342,/* Previous Candidate *//* Cursor control & motion */XK_Home:65360,XK_Left:65361,/* Move left, left arrow */XK_Up:65362,/* Move up, up arrow */XK_Right:65363,/* Move right, right arrow */XK_Down:65364,/* Move down, down arrow */XK_Prior:65365,/* Prior, previous */XK_Page_Up:65365,XK_Next:65366,/* Next */XK_Page_Down:65366,XK_End:65367,/* EOL */XK_Begin:65368,/* BOL *//* Misc functions */XK_Select:65376,/* Select, mark */XK_Print:65377,XK_Execute:65378,/* Execute, run, do */XK_Insert:65379,/* Insert, insert here */XK_Undo:65381,XK_Redo:65382,/* Redo, again */XK_Menu:65383,XK_Find:65384,/* Find, search */XK_Cancel:65385,/* Cancel, stop, abort, exit */XK_Help:65386,/* Help */XK_Break:65387,XK_Mode_switch:65406,/* Character set switch */XK_script_switch:65406,/* Alias for mode_switch */XK_Num_Lock:65407,/* Keypad functions, keypad numbers cleverly chosen to map to ASCII */XK_KP_Space:65408,/* Space */XK_KP_Tab:65417,XK_KP_Enter:65421,/* Enter */XK_KP_F1:65425,/* PF1, KP_A, ... */XK_KP_F2:65426,XK_KP_F3:65427,XK_KP_F4:65428,XK_KP_Home:65429,XK_KP_Left:65430,XK_KP_Up:65431,XK_KP_Right:65432,XK_KP_Down:65433,XK_KP_Prior:65434,XK_KP_Page_Up:65434,XK_KP_Next:65435,XK_KP_Page_Down:65435,XK_KP_End:65436,XK_KP_Begin:65437,XK_KP_Insert:65438,XK_KP_Delete:65439,XK_KP_Equal:65469,/* Equals */XK_KP_Multiply:65450,XK_KP_Add:65451,XK_KP_Separator:65452,/* Separator, often comma */XK_KP_Subtract:65453,XK_KP_Decimal:65454,XK_KP_Divide:65455,XK_KP_0:65456,XK_KP_1:65457,XK_KP_2:65458,XK_KP_3:65459,XK_KP_4:65460,XK_KP_5:65461,XK_KP_6:65462,XK_KP_7:65463,XK_KP_8:65464,XK_KP_9:65465,/*
     * Auxiliary functions; note the duplicate definitions for left and right
     * function keys;  Sun keyboards and a few other manufacturers have such
     * function key groups on the left and/or right sides of the keyboard.
     * We've not found a keyboard with more than 35 function keys total.
     */XK_F1:65470,XK_F2:65471,XK_F3:65472,XK_F4:65473,XK_F5:65474,XK_F6:65475,XK_F7:65476,XK_F8:65477,XK_F9:65478,XK_F10:65479,XK_F11:65480,XK_L1:65480,XK_F12:65481,XK_L2:65481,XK_F13:65482,XK_L3:65482,XK_F14:65483,XK_L4:65483,XK_F15:65484,XK_L5:65484,XK_F16:65485,XK_L6:65485,XK_F17:65486,XK_L7:65486,XK_F18:65487,XK_L8:65487,XK_F19:65488,XK_L9:65488,XK_F20:65489,XK_L10:65489,XK_F21:65490,XK_R1:65490,XK_F22:65491,XK_R2:65491,XK_F23:65492,XK_R3:65492,XK_F24:65493,XK_R4:65493,XK_F25:65494,XK_R5:65494,XK_F26:65495,XK_R6:65495,XK_F27:65496,XK_R7:65496,XK_F28:65497,XK_R8:65497,XK_F29:65498,XK_R9:65498,XK_F30:65499,XK_R10:65499,XK_F31:65500,XK_R11:65500,XK_F32:65501,XK_R12:65501,XK_F33:65502,XK_R13:65502,XK_F34:65503,XK_R14:65503,XK_F35:65504,XK_R15:65504,/* Modifiers */XK_Shift_L:65505,/* Left shift */XK_Shift_R:65506,/* Right shift */XK_Control_L:65507,/* Left control */XK_Control_R:65508,/* Right control */XK_Caps_Lock:65509,/* Caps lock */XK_Shift_Lock:65510,/* Shift lock */XK_Meta_L:65511,/* Left meta */XK_Meta_R:65512,/* Right meta */XK_Alt_L:65513,/* Left alt */XK_Alt_R:65514,/* Right alt */XK_Super_L:65515,/* Left super */XK_Super_R:65516,/* Right super */XK_Hyper_L:65517,/* Left hyper */XK_Hyper_R:65518,/* Right hyper *//*
     * Keyboard (XKB) Extension function and modifier keys
     * (from Appendix C of "The X Keyboard Extension: Protocol Specification")
     * Byte 3 = 0xfe
     */XK_ISO_Level3_Shift:65027,/* AltGr */XK_ISO_Next_Group:65032,XK_ISO_Prev_Group:65034,XK_ISO_First_Group:65036,XK_ISO_Last_Group:65038,/*
     * Latin 1
     * (ISO/IEC 8859-1: Unicode U+0020..U+00FF)
     * Byte 3: 0
     */XK_space:32,/* U+0020 SPACE */XK_exclam:33,/* U+0021 EXCLAMATION MARK */XK_quotedbl:34,/* U+0022 QUOTATION MARK */XK_numbersign:35,/* U+0023 NUMBER SIGN */XK_dollar:36,/* U+0024 DOLLAR SIGN */XK_percent:37,/* U+0025 PERCENT SIGN */XK_ampersand:38,/* U+0026 AMPERSAND */XK_apostrophe:39,/* U+0027 APOSTROPHE */XK_quoteright:39,/* deprecated */XK_parenleft:40,/* U+0028 LEFT PARENTHESIS */XK_parenright:41,/* U+0029 RIGHT PARENTHESIS */XK_asterisk:42,/* U+002A ASTERISK */XK_plus:43,/* U+002B PLUS SIGN */XK_comma:44,/* U+002C COMMA */XK_minus:45,/* U+002D HYPHEN-MINUS */XK_period:46,/* U+002E FULL STOP */XK_slash:47,/* U+002F SOLIDUS */XK_0:48,/* U+0030 DIGIT ZERO */XK_1:49,/* U+0031 DIGIT ONE */XK_2:50,/* U+0032 DIGIT TWO */XK_3:51,/* U+0033 DIGIT THREE */XK_4:52,/* U+0034 DIGIT FOUR */XK_5:53,/* U+0035 DIGIT FIVE */XK_6:54,/* U+0036 DIGIT SIX */XK_7:55,/* U+0037 DIGIT SEVEN */XK_8:56,/* U+0038 DIGIT EIGHT */XK_9:57,/* U+0039 DIGIT NINE */XK_colon:58,/* U+003A COLON */XK_semicolon:59,/* U+003B SEMICOLON */XK_less:60,/* U+003C LESS-THAN SIGN */XK_equal:61,/* U+003D EQUALS SIGN */XK_greater:62,/* U+003E GREATER-THAN SIGN */XK_question:63,/* U+003F QUESTION MARK */XK_at:64,/* U+0040 COMMERCIAL AT */XK_A:65,/* U+0041 LATIN CAPITAL LETTER A */XK_B:66,/* U+0042 LATIN CAPITAL LETTER B */XK_C:67,/* U+0043 LATIN CAPITAL LETTER C */XK_D:68,/* U+0044 LATIN CAPITAL LETTER D */XK_E:69,/* U+0045 LATIN CAPITAL LETTER E */XK_F:70,/* U+0046 LATIN CAPITAL LETTER F */XK_G:71,/* U+0047 LATIN CAPITAL LETTER G */XK_H:72,/* U+0048 LATIN CAPITAL LETTER H */XK_I:73,/* U+0049 LATIN CAPITAL LETTER I */XK_J:74,/* U+004A LATIN CAPITAL LETTER J */XK_K:75,/* U+004B LATIN CAPITAL LETTER K */XK_L:76,/* U+004C LATIN CAPITAL LETTER L */XK_M:77,/* U+004D LATIN CAPITAL LETTER M */XK_N:78,/* U+004E LATIN CAPITAL LETTER N */XK_O:79,/* U+004F LATIN CAPITAL LETTER O */XK_P:80,/* U+0050 LATIN CAPITAL LETTER P */XK_Q:81,/* U+0051 LATIN CAPITAL LETTER Q */XK_R:82,/* U+0052 LATIN CAPITAL LETTER R */XK_S:83,/* U+0053 LATIN CAPITAL LETTER S */XK_T:84,/* U+0054 LATIN CAPITAL LETTER T */XK_U:85,/* U+0055 LATIN CAPITAL LETTER U */XK_V:86,/* U+0056 LATIN CAPITAL LETTER V */XK_W:87,/* U+0057 LATIN CAPITAL LETTER W */XK_X:88,/* U+0058 LATIN CAPITAL LETTER X */XK_Y:89,/* U+0059 LATIN CAPITAL LETTER Y */XK_Z:90,/* U+005A LATIN CAPITAL LETTER Z */XK_bracketleft:91,/* U+005B LEFT SQUARE BRACKET */XK_backslash:92,/* U+005C REVERSE SOLIDUS */XK_bracketright:93,/* U+005D RIGHT SQUARE BRACKET */XK_asciicircum:94,/* U+005E CIRCUMFLEX ACCENT */XK_underscore:95,/* U+005F LOW LINE */XK_grave:96,/* U+0060 GRAVE ACCENT */XK_quoteleft:96,/* deprecated */XK_a:97,/* U+0061 LATIN SMALL LETTER A */XK_b:98,/* U+0062 LATIN SMALL LETTER B */XK_c:99,/* U+0063 LATIN SMALL LETTER C */XK_d:100,/* U+0064 LATIN SMALL LETTER D */XK_e:101,/* U+0065 LATIN SMALL LETTER E */XK_f:102,/* U+0066 LATIN SMALL LETTER F */XK_g:103,/* U+0067 LATIN SMALL LETTER G */XK_h:104,/* U+0068 LATIN SMALL LETTER H */XK_i:105,/* U+0069 LATIN SMALL LETTER I */XK_j:106,/* U+006A LATIN SMALL LETTER J */XK_k:107,/* U+006B LATIN SMALL LETTER K */XK_l:108,/* U+006C LATIN SMALL LETTER L */XK_m:109,/* U+006D LATIN SMALL LETTER M */XK_n:110,/* U+006E LATIN SMALL LETTER N */XK_o:111,/* U+006F LATIN SMALL LETTER O */XK_p:112,/* U+0070 LATIN SMALL LETTER P */XK_q:113,/* U+0071 LATIN SMALL LETTER Q */XK_r:114,/* U+0072 LATIN SMALL LETTER R */XK_s:115,/* U+0073 LATIN SMALL LETTER S */XK_t:116,/* U+0074 LATIN SMALL LETTER T */XK_u:117,/* U+0075 LATIN SMALL LETTER U */XK_v:118,/* U+0076 LATIN SMALL LETTER V */XK_w:119,/* U+0077 LATIN SMALL LETTER W */XK_x:120,/* U+0078 LATIN SMALL LETTER X */XK_y:121,/* U+0079 LATIN SMALL LETTER Y */XK_z:122,/* U+007A LATIN SMALL LETTER Z */XK_braceleft:123,/* U+007B LEFT CURLY BRACKET */XK_bar:124,/* U+007C VERTICAL LINE */XK_braceright:125,/* U+007D RIGHT CURLY BRACKET */XK_asciitilde:126,/* U+007E TILDE */XK_nobreakspace:160,/* U+00A0 NO-BREAK SPACE */XK_exclamdown:161,/* U+00A1 INVERTED EXCLAMATION MARK */XK_cent:162,/* U+00A2 CENT SIGN */XK_sterling:163,/* U+00A3 POUND SIGN */XK_currency:164,/* U+00A4 CURRENCY SIGN */XK_yen:165,/* U+00A5 YEN SIGN */XK_brokenbar:166,/* U+00A6 BROKEN BAR */XK_section:167,/* U+00A7 SECTION SIGN */XK_diaeresis:168,/* U+00A8 DIAERESIS */XK_copyright:169,/* U+00A9 COPYRIGHT SIGN */XK_ordfeminine:170,/* U+00AA FEMININE ORDINAL INDICATOR */XK_guillemotleft:171,/* U+00AB LEFT-POINTING DOUBLE ANGLE QUOTATION MARK */XK_notsign:172,/* U+00AC NOT SIGN */XK_hyphen:173,/* U+00AD SOFT HYPHEN */XK_registered:174,/* U+00AE REGISTERED SIGN */XK_macron:175,/* U+00AF MACRON */XK_degree:176,/* U+00B0 DEGREE SIGN */XK_plusminus:177,/* U+00B1 PLUS-MINUS SIGN */XK_twosuperior:178,/* U+00B2 SUPERSCRIPT TWO */XK_threesuperior:179,/* U+00B3 SUPERSCRIPT THREE */XK_acute:180,/* U+00B4 ACUTE ACCENT */XK_mu:181,/* U+00B5 MICRO SIGN */XK_paragraph:182,/* U+00B6 PILCROW SIGN */XK_periodcentered:183,/* U+00B7 MIDDLE DOT */XK_cedilla:184,/* U+00B8 CEDILLA */XK_onesuperior:185,/* U+00B9 SUPERSCRIPT ONE */XK_masculine:186,/* U+00BA MASCULINE ORDINAL INDICATOR */XK_guillemotright:187,/* U+00BB RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK */XK_onequarter:188,/* U+00BC VULGAR FRACTION ONE QUARTER */XK_onehalf:189,/* U+00BD VULGAR FRACTION ONE HALF */XK_threequarters:190,/* U+00BE VULGAR FRACTION THREE QUARTERS */XK_questiondown:191,/* U+00BF INVERTED QUESTION MARK */XK_Agrave:192,/* U+00C0 LATIN CAPITAL LETTER A WITH GRAVE */XK_Aacute:193,/* U+00C1 LATIN CAPITAL LETTER A WITH ACUTE */XK_Acircumflex:194,/* U+00C2 LATIN CAPITAL LETTER A WITH CIRCUMFLEX */XK_Atilde:195,/* U+00C3 LATIN CAPITAL LETTER A WITH TILDE */XK_Adiaeresis:196,/* U+00C4 LATIN CAPITAL LETTER A WITH DIAERESIS */XK_Aring:197,/* U+00C5 LATIN CAPITAL LETTER A WITH RING ABOVE */XK_AE:198,/* U+00C6 LATIN CAPITAL LETTER AE */XK_Ccedilla:199,/* U+00C7 LATIN CAPITAL LETTER C WITH CEDILLA */XK_Egrave:200,/* U+00C8 LATIN CAPITAL LETTER E WITH GRAVE */XK_Eacute:201,/* U+00C9 LATIN CAPITAL LETTER E WITH ACUTE */XK_Ecircumflex:202,/* U+00CA LATIN CAPITAL LETTER E WITH CIRCUMFLEX */XK_Ediaeresis:203,/* U+00CB LATIN CAPITAL LETTER E WITH DIAERESIS */XK_Igrave:204,/* U+00CC LATIN CAPITAL LETTER I WITH GRAVE */XK_Iacute:205,/* U+00CD LATIN CAPITAL LETTER I WITH ACUTE */XK_Icircumflex:206,/* U+00CE LATIN CAPITAL LETTER I WITH CIRCUMFLEX */XK_Idiaeresis:207,/* U+00CF LATIN CAPITAL LETTER I WITH DIAERESIS */XK_ETH:208,/* U+00D0 LATIN CAPITAL LETTER ETH */XK_Eth:208,/* deprecated */XK_Ntilde:209,/* U+00D1 LATIN CAPITAL LETTER N WITH TILDE */XK_Ograve:210,/* U+00D2 LATIN CAPITAL LETTER O WITH GRAVE */XK_Oacute:211,/* U+00D3 LATIN CAPITAL LETTER O WITH ACUTE */XK_Ocircumflex:212,/* U+00D4 LATIN CAPITAL LETTER O WITH CIRCUMFLEX */XK_Otilde:213,/* U+00D5 LATIN CAPITAL LETTER O WITH TILDE */XK_Odiaeresis:214,/* U+00D6 LATIN CAPITAL LETTER O WITH DIAERESIS */XK_multiply:215,/* U+00D7 MULTIPLICATION SIGN */XK_Oslash:216,/* U+00D8 LATIN CAPITAL LETTER O WITH STROKE */XK_Ooblique:216,/* U+00D8 LATIN CAPITAL LETTER O WITH STROKE */XK_Ugrave:217,/* U+00D9 LATIN CAPITAL LETTER U WITH GRAVE */XK_Uacute:218,/* U+00DA LATIN CAPITAL LETTER U WITH ACUTE */XK_Ucircumflex:219,/* U+00DB LATIN CAPITAL LETTER U WITH CIRCUMFLEX */XK_Udiaeresis:220,/* U+00DC LATIN CAPITAL LETTER U WITH DIAERESIS */XK_Yacute:221,/* U+00DD LATIN CAPITAL LETTER Y WITH ACUTE */XK_THORN:222,/* U+00DE LATIN CAPITAL LETTER THORN */XK_Thorn:222,/* deprecated */XK_ssharp:223,/* U+00DF LATIN SMALL LETTER SHARP S */XK_agrave:224,/* U+00E0 LATIN SMALL LETTER A WITH GRAVE */XK_aacute:225,/* U+00E1 LATIN SMALL LETTER A WITH ACUTE */XK_acircumflex:226,/* U+00E2 LATIN SMALL LETTER A WITH CIRCUMFLEX */XK_atilde:227,/* U+00E3 LATIN SMALL LETTER A WITH TILDE */XK_adiaeresis:228,/* U+00E4 LATIN SMALL LETTER A WITH DIAERESIS */XK_aring:229,/* U+00E5 LATIN SMALL LETTER A WITH RING ABOVE */XK_ae:230,/* U+00E6 LATIN SMALL LETTER AE */XK_ccedilla:231,/* U+00E7 LATIN SMALL LETTER C WITH CEDILLA */XK_egrave:232,/* U+00E8 LATIN SMALL LETTER E WITH GRAVE */XK_eacute:233,/* U+00E9 LATIN SMALL LETTER E WITH ACUTE */XK_ecircumflex:234,/* U+00EA LATIN SMALL LETTER E WITH CIRCUMFLEX */XK_ediaeresis:235,/* U+00EB LATIN SMALL LETTER E WITH DIAERESIS */XK_igrave:236,/* U+00EC LATIN SMALL LETTER I WITH GRAVE */XK_iacute:237,/* U+00ED LATIN SMALL LETTER I WITH ACUTE */XK_icircumflex:238,/* U+00EE LATIN SMALL LETTER I WITH CIRCUMFLEX */XK_idiaeresis:239,/* U+00EF LATIN SMALL LETTER I WITH DIAERESIS */XK_eth:240,/* U+00F0 LATIN SMALL LETTER ETH */XK_ntilde:241,/* U+00F1 LATIN SMALL LETTER N WITH TILDE */XK_ograve:242,/* U+00F2 LATIN SMALL LETTER O WITH GRAVE */XK_oacute:243,/* U+00F3 LATIN SMALL LETTER O WITH ACUTE */XK_ocircumflex:244,/* U+00F4 LATIN SMALL LETTER O WITH CIRCUMFLEX */XK_otilde:245,/* U+00F5 LATIN SMALL LETTER O WITH TILDE */XK_odiaeresis:246,/* U+00F6 LATIN SMALL LETTER O WITH DIAERESIS */XK_division:247,/* U+00F7 DIVISION SIGN */XK_oslash:248,/* U+00F8 LATIN SMALL LETTER O WITH STROKE */XK_ooblique:248,/* U+00F8 LATIN SMALL LETTER O WITH STROKE */XK_ugrave:249,/* U+00F9 LATIN SMALL LETTER U WITH GRAVE */XK_uacute:250,/* U+00FA LATIN SMALL LETTER U WITH ACUTE */XK_ucircumflex:251,/* U+00FB LATIN SMALL LETTER U WITH CIRCUMFLEX */XK_udiaeresis:252,/* U+00FC LATIN SMALL LETTER U WITH DIAERESIS */XK_yacute:253,/* U+00FD LATIN SMALL LETTER Y WITH ACUTE */XK_thorn:254,/* U+00FE LATIN SMALL LETTER THORN */XK_ydiaeresis:255,/* U+00FF LATIN SMALL LETTER Y WITH DIAERESIS *//*
     * Korean
     * Byte 3 = 0x0e
     */XK_Hangul:65329,/* Hangul start/stop(toggle) */XK_Hangul_Hanja:65332,/* Start Hangul->Hanja Conversion */XK_Hangul_Jeonja:65336,/* Jeonja mode *//*
     * XFree86 vendor specific keysyms.
     *
     * The XFree86 keysym range is 0x10080001 - 0x1008FFFF.
     */XF86XK_ModeLock:269025025,XF86XK_MonBrightnessUp:269025026,XF86XK_MonBrightnessDown:269025027,XF86XK_KbdLightOnOff:269025028,XF86XK_KbdBrightnessUp:269025029,XF86XK_KbdBrightnessDown:269025030,XF86XK_Standby:269025040,XF86XK_AudioLowerVolume:269025041,XF86XK_AudioMute:269025042,XF86XK_AudioRaiseVolume:269025043,XF86XK_AudioPlay:269025044,XF86XK_AudioStop:269025045,XF86XK_AudioPrev:269025046,XF86XK_AudioNext:269025047,XF86XK_HomePage:269025048,XF86XK_Mail:269025049,XF86XK_Start:269025050,XF86XK_Search:269025051,XF86XK_AudioRecord:269025052,XF86XK_Calculator:269025053,XF86XK_Memo:269025054,XF86XK_ToDoList:269025055,XF86XK_Calendar:269025056,XF86XK_PowerDown:269025057,XF86XK_ContrastAdjust:269025058,XF86XK_RockerUp:269025059,XF86XK_RockerDown:269025060,XF86XK_RockerEnter:269025061,XF86XK_Back:269025062,XF86XK_Forward:269025063,XF86XK_Stop:269025064,XF86XK_Refresh:269025065,XF86XK_PowerOff:269025066,XF86XK_WakeUp:269025067,XF86XK_Eject:269025068,XF86XK_ScreenSaver:269025069,XF86XK_WWW:269025070,XF86XK_Sleep:269025071,XF86XK_Favorites:269025072,XF86XK_AudioPause:269025073,XF86XK_AudioMedia:269025074,XF86XK_MyComputer:269025075,XF86XK_VendorHome:269025076,XF86XK_LightBulb:269025077,XF86XK_Shop:269025078,XF86XK_History:269025079,XF86XK_OpenURL:269025080,XF86XK_AddFavorite:269025081,XF86XK_HotLinks:269025082,XF86XK_BrightnessAdjust:269025083,XF86XK_Finance:269025084,XF86XK_Community:269025085,XF86XK_AudioRewind:269025086,XF86XK_BackForward:269025087,XF86XK_Launch0:269025088,XF86XK_Launch1:269025089,XF86XK_Launch2:269025090,XF86XK_Launch3:269025091,XF86XK_Launch4:269025092,XF86XK_Launch5:269025093,XF86XK_Launch6:269025094,XF86XK_Launch7:269025095,XF86XK_Launch8:269025096,XF86XK_Launch9:269025097,XF86XK_LaunchA:269025098,XF86XK_LaunchB:269025099,XF86XK_LaunchC:269025100,XF86XK_LaunchD:269025101,XF86XK_LaunchE:269025102,XF86XK_LaunchF:269025103,XF86XK_ApplicationLeft:269025104,XF86XK_ApplicationRight:269025105,XF86XK_Book:269025106,XF86XK_CD:269025107,XF86XK_Calculater:269025108,XF86XK_Clear:269025109,XF86XK_Close:269025110,XF86XK_Copy:269025111,XF86XK_Cut:269025112,XF86XK_Display:269025113,XF86XK_DOS:269025114,XF86XK_Documents:269025115,XF86XK_Excel:269025116,XF86XK_Explorer:269025117,XF86XK_Game:269025118,XF86XK_Go:269025119,XF86XK_iTouch:269025120,XF86XK_LogOff:269025121,XF86XK_Market:269025122,XF86XK_Meeting:269025123,XF86XK_MenuKB:269025125,XF86XK_MenuPB:269025126,XF86XK_MySites:269025127,XF86XK_New:269025128,XF86XK_News:269025129,XF86XK_OfficeHome:269025130,XF86XK_Open:269025131,XF86XK_Option:269025132,XF86XK_Paste:269025133,XF86XK_Phone:269025134,XF86XK_Q:269025136,XF86XK_Reply:269025138,XF86XK_Reload:269025139,XF86XK_RotateWindows:269025140,XF86XK_RotationPB:269025141,XF86XK_RotationKB:269025142,XF86XK_Save:269025143,XF86XK_ScrollUp:269025144,XF86XK_ScrollDown:269025145,XF86XK_ScrollClick:269025146,XF86XK_Send:269025147,XF86XK_Spell:269025148,XF86XK_SplitScreen:269025149,XF86XK_Support:269025150,XF86XK_TaskPane:269025151,XF86XK_Terminal:269025152,XF86XK_Tools:269025153,XF86XK_Travel:269025154,XF86XK_UserPB:269025156,XF86XK_User1KB:269025157,XF86XK_User2KB:269025158,XF86XK_Video:269025159,XF86XK_WheelButton:269025160,XF86XK_Word:269025161,XF86XK_Xfer:269025162,XF86XK_ZoomIn:269025163,XF86XK_ZoomOut:269025164,XF86XK_Away:269025165,XF86XK_Messenger:269025166,XF86XK_WebCam:269025167,XF86XK_MailForward:269025168,XF86XK_Pictures:269025169,XF86XK_Music:269025170,XF86XK_Battery:269025171,XF86XK_Bluetooth:269025172,XF86XK_WLAN:269025173,XF86XK_UWB:269025174,XF86XK_AudioForward:269025175,XF86XK_AudioRepeat:269025176,XF86XK_AudioRandomPlay:269025177,XF86XK_Subtitle:269025178,XF86XK_AudioCycleTrack:269025179,XF86XK_CycleAngle:269025180,XF86XK_FrameBack:269025181,XF86XK_FrameForward:269025182,XF86XK_Time:269025183,XF86XK_Select:269025184,XF86XK_View:269025185,XF86XK_TopMenu:269025186,XF86XK_Red:269025187,XF86XK_Green:269025188,XF86XK_Yellow:269025189,XF86XK_Blue:269025190,XF86XK_Suspend:269025191,XF86XK_Hibernate:269025192,XF86XK_TouchpadToggle:269025193,XF86XK_TouchpadOn:269025200,XF86XK_TouchpadOff:269025201,XF86XK_AudioMicMute:269025202,XF86XK_Switch_VT_1:269024769,XF86XK_Switch_VT_2:269024770,XF86XK_Switch_VT_3:269024771,XF86XK_Switch_VT_4:269024772,XF86XK_Switch_VT_5:269024773,XF86XK_Switch_VT_6:269024774,XF86XK_Switch_VT_7:269024775,XF86XK_Switch_VT_8:269024776,XF86XK_Switch_VT_9:269024777,XF86XK_Switch_VT_10:269024778,XF86XK_Switch_VT_11:269024779,XF86XK_Switch_VT_12:269024780,XF86XK_Ungrab:269024800,XF86XK_ClearGrab:269024801,XF86XK_Next_VMode:269024802,XF86XK_Prev_VMode:269024803,XF86XK_LogWindowTree:269024804,XF86XK_LogGrabInfo:269024805};'use strict';Object.defineProperty(exports,'__esModule',{value:true});/*
 * Mapping from Unicode codepoints to X11/RFB keysyms
 *
 * This file was automatically generated from keysymdef.h
 * DO NOT EDIT!
 *//* Functions at the bottom */var codepoints={256:960,// XK_Amacron
257:992,// XK_amacron
258:451,// XK_Abreve
259:483,// XK_abreve
260:417,// XK_Aogonek
261:433,// XK_aogonek
262:454,// XK_Cacute
263:486,// XK_cacute
264:710,// XK_Ccircumflex
265:742,// XK_ccircumflex
266:709,// XK_Cabovedot
267:741,// XK_cabovedot
268:456,// XK_Ccaron
269:488,// XK_ccaron
270:463,// XK_Dcaron
271:495,// XK_dcaron
272:464,// XK_Dstroke
273:496,// XK_dstroke
274:938,// XK_Emacron
275:954,// XK_emacron
278:972,// XK_Eabovedot
279:1004,// XK_eabovedot
280:458,// XK_Eogonek
281:490,// XK_eogonek
282:460,// XK_Ecaron
283:492,// XK_ecaron
284:728,// XK_Gcircumflex
285:760,// XK_gcircumflex
286:683,// XK_Gbreve
287:699,// XK_gbreve
288:725,// XK_Gabovedot
289:757,// XK_gabovedot
290:939,// XK_Gcedilla
291:955,// XK_gcedilla
292:678,// XK_Hcircumflex
293:694,// XK_hcircumflex
294:673,// XK_Hstroke
295:689,// XK_hstroke
296:933,// XK_Itilde
297:949,// XK_itilde
298:975,// XK_Imacron
299:1007,// XK_imacron
302:967,// XK_Iogonek
303:999,// XK_iogonek
304:681,// XK_Iabovedot
305:697,// XK_idotless
308:684,// XK_Jcircumflex
309:700,// XK_jcircumflex
310:979,// XK_Kcedilla
311:1011,// XK_kcedilla
312:930,// XK_kra
313:453,// XK_Lacute
314:485,// XK_lacute
315:934,// XK_Lcedilla
316:950,// XK_lcedilla
317:421,// XK_Lcaron
318:437,// XK_lcaron
321:419,// XK_Lstroke
322:435,// XK_lstroke
323:465,// XK_Nacute
324:497,// XK_nacute
325:977,// XK_Ncedilla
326:1009,// XK_ncedilla
327:466,// XK_Ncaron
328:498,// XK_ncaron
330:957,// XK_ENG
331:959,// XK_eng
332:978,// XK_Omacron
333:1010,// XK_omacron
336:469,// XK_Odoubleacute
337:501,// XK_odoubleacute
338:5052,// XK_OE
339:5053,// XK_oe
340:448,// XK_Racute
341:480,// XK_racute
342:931,// XK_Rcedilla
343:947,// XK_rcedilla
344:472,// XK_Rcaron
345:504,// XK_rcaron
346:422,// XK_Sacute
347:438,// XK_sacute
348:734,// XK_Scircumflex
349:766,// XK_scircumflex
350:426,// XK_Scedilla
351:442,// XK_scedilla
352:425,// XK_Scaron
353:441,// XK_scaron
354:478,// XK_Tcedilla
355:510,// XK_tcedilla
356:427,// XK_Tcaron
357:443,// XK_tcaron
358:940,// XK_Tslash
359:956,// XK_tslash
360:989,// XK_Utilde
361:1021,// XK_utilde
362:990,// XK_Umacron
363:1022,// XK_umacron
364:733,// XK_Ubreve
365:765,// XK_ubreve
366:473,// XK_Uring
367:505,// XK_uring
368:475,// XK_Udoubleacute
369:507,// XK_udoubleacute
370:985,// XK_Uogonek
371:1017,// XK_uogonek
376:5054,// XK_Ydiaeresis
377:428,// XK_Zacute
378:444,// XK_zacute
379:431,// XK_Zabovedot
380:447,// XK_zabovedot
381:430,// XK_Zcaron
382:446,// XK_zcaron
402:2294,// XK_function
466:16777681,// XK_Ocaron
711:439,// XK_caron
728:418,// XK_breve
729:511,// XK_abovedot
731:434,// XK_ogonek
733:445,// XK_doubleacute
901:1966,// XK_Greek_accentdieresis
902:1953,// XK_Greek_ALPHAaccent
904:1954,// XK_Greek_EPSILONaccent
905:1955,// XK_Greek_ETAaccent
906:1956,// XK_Greek_IOTAaccent
908:1959,// XK_Greek_OMICRONaccent
910:1960,// XK_Greek_UPSILONaccent
911:1963,// XK_Greek_OMEGAaccent
912:1974,// XK_Greek_iotaaccentdieresis
913:1985,// XK_Greek_ALPHA
914:1986,// XK_Greek_BETA
915:1987,// XK_Greek_GAMMA
916:1988,// XK_Greek_DELTA
917:1989,// XK_Greek_EPSILON
918:1990,// XK_Greek_ZETA
919:1991,// XK_Greek_ETA
920:1992,// XK_Greek_THETA
921:1993,// XK_Greek_IOTA
922:1994,// XK_Greek_KAPPA
923:1995,// XK_Greek_LAMDA
924:1996,// XK_Greek_MU
925:1997,// XK_Greek_NU
926:1998,// XK_Greek_XI
927:1999,// XK_Greek_OMICRON
928:2000,// XK_Greek_PI
929:2001,// XK_Greek_RHO
931:2002,// XK_Greek_SIGMA
932:2004,// XK_Greek_TAU
933:2005,// XK_Greek_UPSILON
934:2006,// XK_Greek_PHI
935:2007,// XK_Greek_CHI
936:2008,// XK_Greek_PSI
937:2009,// XK_Greek_OMEGA
938:1957,// XK_Greek_IOTAdieresis
939:1961,// XK_Greek_UPSILONdieresis
940:1969,// XK_Greek_alphaaccent
941:1970,// XK_Greek_epsilonaccent
942:1971,// XK_Greek_etaaccent
943:1972,// XK_Greek_iotaaccent
944:1978,// XK_Greek_upsilonaccentdieresis
945:2017,// XK_Greek_alpha
946:2018,// XK_Greek_beta
947:2019,// XK_Greek_gamma
948:2020,// XK_Greek_delta
949:2021,// XK_Greek_epsilon
950:2022,// XK_Greek_zeta
951:2023,// XK_Greek_eta
952:2024,// XK_Greek_theta
953:2025,// XK_Greek_iota
954:2026,// XK_Greek_kappa
955:2027,// XK_Greek_lamda
956:2028,// XK_Greek_mu
957:2029,// XK_Greek_nu
958:2030,// XK_Greek_xi
959:2031,// XK_Greek_omicron
960:2032,// XK_Greek_pi
961:2033,// XK_Greek_rho
962:2035,// XK_Greek_finalsmallsigma
963:2034,// XK_Greek_sigma
964:2036,// XK_Greek_tau
965:2037,// XK_Greek_upsilon
966:2038,// XK_Greek_phi
967:2039,// XK_Greek_chi
968:2040,// XK_Greek_psi
969:2041,// XK_Greek_omega
970:1973,// XK_Greek_iotadieresis
971:1977,// XK_Greek_upsilondieresis
972:1975,// XK_Greek_omicronaccent
973:1976,// XK_Greek_upsilonaccent
974:1979,// XK_Greek_omegaaccent
1025:1715,// XK_Cyrillic_IO
1026:1713,// XK_Serbian_DJE
1027:1714,// XK_Macedonia_GJE
1028:1716,// XK_Ukrainian_IE
1029:1717,// XK_Macedonia_DSE
1030:1718,// XK_Ukrainian_I
1031:1719,// XK_Ukrainian_YI
1032:1720,// XK_Cyrillic_JE
1033:1721,// XK_Cyrillic_LJE
1034:1722,// XK_Cyrillic_NJE
1035:1723,// XK_Serbian_TSHE
1036:1724,// XK_Macedonia_KJE
1038:1726,// XK_Byelorussian_SHORTU
1039:1727,// XK_Cyrillic_DZHE
1040:1761,// XK_Cyrillic_A
1041:1762,// XK_Cyrillic_BE
1042:1783,// XK_Cyrillic_VE
1043:1767,// XK_Cyrillic_GHE
1044:1764,// XK_Cyrillic_DE
1045:1765,// XK_Cyrillic_IE
1046:1782,// XK_Cyrillic_ZHE
1047:1786,// XK_Cyrillic_ZE
1048:1769,// XK_Cyrillic_I
1049:1770,// XK_Cyrillic_SHORTI
1050:1771,// XK_Cyrillic_KA
1051:1772,// XK_Cyrillic_EL
1052:1773,// XK_Cyrillic_EM
1053:1774,// XK_Cyrillic_EN
1054:1775,// XK_Cyrillic_O
1055:1776,// XK_Cyrillic_PE
1056:1778,// XK_Cyrillic_ER
1057:1779,// XK_Cyrillic_ES
1058:1780,// XK_Cyrillic_TE
1059:1781,// XK_Cyrillic_U
1060:1766,// XK_Cyrillic_EF
1061:1768,// XK_Cyrillic_HA
1062:1763,// XK_Cyrillic_TSE
1063:1790,// XK_Cyrillic_CHE
1064:1787,// XK_Cyrillic_SHA
1065:1789,// XK_Cyrillic_SHCHA
1066:1791,// XK_Cyrillic_HARDSIGN
1067:1785,// XK_Cyrillic_YERU
1068:1784,// XK_Cyrillic_SOFTSIGN
1069:1788,// XK_Cyrillic_E
1070:1760,// XK_Cyrillic_YU
1071:1777,// XK_Cyrillic_YA
1072:1729,// XK_Cyrillic_a
1073:1730,// XK_Cyrillic_be
1074:1751,// XK_Cyrillic_ve
1075:1735,// XK_Cyrillic_ghe
1076:1732,// XK_Cyrillic_de
1077:1733,// XK_Cyrillic_ie
1078:1750,// XK_Cyrillic_zhe
1079:1754,// XK_Cyrillic_ze
1080:1737,// XK_Cyrillic_i
1081:1738,// XK_Cyrillic_shorti
1082:1739,// XK_Cyrillic_ka
1083:1740,// XK_Cyrillic_el
1084:1741,// XK_Cyrillic_em
1085:1742,// XK_Cyrillic_en
1086:1743,// XK_Cyrillic_o
1087:1744,// XK_Cyrillic_pe
1088:1746,// XK_Cyrillic_er
1089:1747,// XK_Cyrillic_es
1090:1748,// XK_Cyrillic_te
1091:1749,// XK_Cyrillic_u
1092:1734,// XK_Cyrillic_ef
1093:1736,// XK_Cyrillic_ha
1094:1731,// XK_Cyrillic_tse
1095:1758,// XK_Cyrillic_che
1096:1755,// XK_Cyrillic_sha
1097:1757,// XK_Cyrillic_shcha
1098:1759,// XK_Cyrillic_hardsign
1099:1753,// XK_Cyrillic_yeru
1100:1752,// XK_Cyrillic_softsign
1101:1756,// XK_Cyrillic_e
1102:1728,// XK_Cyrillic_yu
1103:1745,// XK_Cyrillic_ya
1105:1699,// XK_Cyrillic_io
1106:1697,// XK_Serbian_dje
1107:1698,// XK_Macedonia_gje
1108:1700,// XK_Ukrainian_ie
1109:1701,// XK_Macedonia_dse
1110:1702,// XK_Ukrainian_i
1111:1703,// XK_Ukrainian_yi
1112:1704,// XK_Cyrillic_je
1113:1705,// XK_Cyrillic_lje
1114:1706,// XK_Cyrillic_nje
1115:1707,// XK_Serbian_tshe
1116:1708,// XK_Macedonia_kje
1118:1710,// XK_Byelorussian_shortu
1119:1711,// XK_Cyrillic_dzhe
1168:1725,// XK_Ukrainian_GHE_WITH_UPTURN
1169:1709,// XK_Ukrainian_ghe_with_upturn
1488:3296,// XK_hebrew_aleph
1489:3297,// XK_hebrew_bet
1490:3298,// XK_hebrew_gimel
1491:3299,// XK_hebrew_dalet
1492:3300,// XK_hebrew_he
1493:3301,// XK_hebrew_waw
1494:3302,// XK_hebrew_zain
1495:3303,// XK_hebrew_chet
1496:3304,// XK_hebrew_tet
1497:3305,// XK_hebrew_yod
1498:3306,// XK_hebrew_finalkaph
1499:3307,// XK_hebrew_kaph
1500:3308,// XK_hebrew_lamed
1501:3309,// XK_hebrew_finalmem
1502:3310,// XK_hebrew_mem
1503:3311,// XK_hebrew_finalnun
1504:3312,// XK_hebrew_nun
1505:3313,// XK_hebrew_samech
1506:3314,// XK_hebrew_ayin
1507:3315,// XK_hebrew_finalpe
1508:3316,// XK_hebrew_pe
1509:3317,// XK_hebrew_finalzade
1510:3318,// XK_hebrew_zade
1511:3319,// XK_hebrew_qoph
1512:3320,// XK_hebrew_resh
1513:3321,// XK_hebrew_shin
1514:3322,// XK_hebrew_taw
1548:1452,// XK_Arabic_comma
1563:1467,// XK_Arabic_semicolon
1567:1471,// XK_Arabic_question_mark
1569:1473,// XK_Arabic_hamza
1570:1474,// XK_Arabic_maddaonalef
1571:1475,// XK_Arabic_hamzaonalef
1572:1476,// XK_Arabic_hamzaonwaw
1573:1477,// XK_Arabic_hamzaunderalef
1574:1478,// XK_Arabic_hamzaonyeh
1575:1479,// XK_Arabic_alef
1576:1480,// XK_Arabic_beh
1577:1481,// XK_Arabic_tehmarbuta
1578:1482,// XK_Arabic_teh
1579:1483,// XK_Arabic_theh
1580:1484,// XK_Arabic_jeem
1581:1485,// XK_Arabic_hah
1582:1486,// XK_Arabic_khah
1583:1487,// XK_Arabic_dal
1584:1488,// XK_Arabic_thal
1585:1489,// XK_Arabic_ra
1586:1490,// XK_Arabic_zain
1587:1491,// XK_Arabic_seen
1588:1492,// XK_Arabic_sheen
1589:1493,// XK_Arabic_sad
1590:1494,// XK_Arabic_dad
1591:1495,// XK_Arabic_tah
1592:1496,// XK_Arabic_zah
1593:1497,// XK_Arabic_ain
1594:1498,// XK_Arabic_ghain
1600:1504,// XK_Arabic_tatweel
1601:1505,// XK_Arabic_feh
1602:1506,// XK_Arabic_qaf
1603:1507,// XK_Arabic_kaf
1604:1508,// XK_Arabic_lam
1605:1509,// XK_Arabic_meem
1606:1510,// XK_Arabic_noon
1607:1511,// XK_Arabic_ha
1608:1512,// XK_Arabic_waw
1609:1513,// XK_Arabic_alefmaksura
1610:1514,// XK_Arabic_yeh
1611:1515,// XK_Arabic_fathatan
1612:1516,// XK_Arabic_dammatan
1613:1517,// XK_Arabic_kasratan
1614:1518,// XK_Arabic_fatha
1615:1519,// XK_Arabic_damma
1616:1520,// XK_Arabic_kasra
1617:1521,// XK_Arabic_shadda
1618:1522,// XK_Arabic_sukun
3585:3489,// XK_Thai_kokai
3586:3490,// XK_Thai_khokhai
3587:3491,// XK_Thai_khokhuat
3588:3492,// XK_Thai_khokhwai
3589:3493,// XK_Thai_khokhon
3590:3494,// XK_Thai_khorakhang
3591:3495,// XK_Thai_ngongu
3592:3496,// XK_Thai_chochan
3593:3497,// XK_Thai_choching
3594:3498,// XK_Thai_chochang
3595:3499,// XK_Thai_soso
3596:3500,// XK_Thai_chochoe
3597:3501,// XK_Thai_yoying
3598:3502,// XK_Thai_dochada
3599:3503,// XK_Thai_topatak
3600:3504,// XK_Thai_thothan
3601:3505,// XK_Thai_thonangmontho
3602:3506,// XK_Thai_thophuthao
3603:3507,// XK_Thai_nonen
3604:3508,// XK_Thai_dodek
3605:3509,// XK_Thai_totao
3606:3510,// XK_Thai_thothung
3607:3511,// XK_Thai_thothahan
3608:3512,// XK_Thai_thothong
3609:3513,// XK_Thai_nonu
3610:3514,// XK_Thai_bobaimai
3611:3515,// XK_Thai_popla
3612:3516,// XK_Thai_phophung
3613:3517,// XK_Thai_fofa
3614:3518,// XK_Thai_phophan
3615:3519,// XK_Thai_fofan
3616:3520,// XK_Thai_phosamphao
3617:3521,// XK_Thai_moma
3618:3522,// XK_Thai_yoyak
3619:3523,// XK_Thai_rorua
3620:3524,// XK_Thai_ru
3621:3525,// XK_Thai_loling
3622:3526,// XK_Thai_lu
3623:3527,// XK_Thai_wowaen
3624:3528,// XK_Thai_sosala
3625:3529,// XK_Thai_sorusi
3626:3530,// XK_Thai_sosua
3627:3531,// XK_Thai_hohip
3628:3532,// XK_Thai_lochula
3629:3533,// XK_Thai_oang
3630:3534,// XK_Thai_honokhuk
3631:3535,// XK_Thai_paiyannoi
3632:3536,// XK_Thai_saraa
3633:3537,// XK_Thai_maihanakat
3634:3538,// XK_Thai_saraaa
3635:3539,// XK_Thai_saraam
3636:3540,// XK_Thai_sarai
3637:3541,// XK_Thai_saraii
3638:3542,// XK_Thai_saraue
3639:3543,// XK_Thai_sarauee
3640:3544,// XK_Thai_sarau
3641:3545,// XK_Thai_sarauu
3642:3546,// XK_Thai_phinthu
3647:3551,// XK_Thai_baht
3648:3552,// XK_Thai_sarae
3649:3553,// XK_Thai_saraae
3650:3554,// XK_Thai_sarao
3651:3555,// XK_Thai_saraaimaimuan
3652:3556,// XK_Thai_saraaimaimalai
3653:3557,// XK_Thai_lakkhangyao
3654:3558,// XK_Thai_maiyamok
3655:3559,// XK_Thai_maitaikhu
3656:3560,// XK_Thai_maiek
3657:3561,// XK_Thai_maitho
3658:3562,// XK_Thai_maitri
3659:3563,// XK_Thai_maichattawa
3660:3564,// XK_Thai_thanthakhat
3661:3565,// XK_Thai_nikhahit
3664:3568,// XK_Thai_leksun
3665:3569,// XK_Thai_leknung
3666:3570,// XK_Thai_leksong
3667:3571,// XK_Thai_leksam
3668:3572,// XK_Thai_leksi
3669:3573,// XK_Thai_lekha
3670:3574,// XK_Thai_lekhok
3671:3575,// XK_Thai_lekchet
3672:3576,// XK_Thai_lekpaet
3673:3577,// XK_Thai_lekkao
8194:2722,// XK_enspace
8195:2721,// XK_emspace
8196:2723,// XK_em3space
8197:2724,// XK_em4space
8199:2725,// XK_digitspace
8200:2726,// XK_punctspace
8201:2727,// XK_thinspace
8202:2728,// XK_hairspace
8210:2747,// XK_figdash
8211:2730,// XK_endash
8212:2729,// XK_emdash
8213:1967,// XK_Greek_horizbar
8215:3295,// XK_hebrew_doublelowline
8216:2768,// XK_leftsinglequotemark
8217:2769,// XK_rightsinglequotemark
8218:2813,// XK_singlelowquotemark
8220:2770,// XK_leftdoublequotemark
8221:2771,// XK_rightdoublequotemark
8222:2814,// XK_doublelowquotemark
8224:2801,// XK_dagger
8225:2802,// XK_doubledagger
8226:2790,// XK_enfilledcircbullet
8229:2735,// XK_doubbaselinedot
8230:2734,// XK_ellipsis
8240:2773,// XK_permille
8242:2774,// XK_minutes
8243:2775,// XK_seconds
8248:2812,// XK_caret
8254:1150,// XK_overline
8361:3839,// XK_Korean_Won
8364:8364,// XK_EuroSign
8453:2744,// XK_careof
8470:1712,// XK_numerosign
8471:2811,// XK_phonographcopyright
8478:2772,// XK_prescription
8482:2761,// XK_trademark
8531:2736,// XK_onethird
8532:2737,// XK_twothirds
8533:2738,// XK_onefifth
8534:2739,// XK_twofifths
8535:2740,// XK_threefifths
8536:2741,// XK_fourfifths
8537:2742,// XK_onesixth
8538:2743,// XK_fivesixths
8539:2755,// XK_oneeighth
8540:2756,// XK_threeeighths
8541:2757,// XK_fiveeighths
8542:2758,// XK_seveneighths
8592:2299,// XK_leftarrow
8593:2300,// XK_uparrow
8594:2301,// XK_rightarrow
8595:2302,// XK_downarrow
8658:2254,// XK_implies
8660:2253,// XK_ifonlyif
8706:2287,// XK_partialderivative
8711:2245,// XK_nabla
8728:3018,// XK_jot
8730:2262,// XK_radical
8733:2241,// XK_variation
8734:2242,// XK_infinity
8743:2270,// XK_logicaland
8744:2271,// XK_logicalor
8745:2268,// XK_intersection
8746:2269,// XK_union
8747:2239,// XK_integral
8756:2240,// XK_therefore
8764:2248,// XK_approximate
8771:2249,// XK_similarequal
8773:16785992,// XK_approxeq
8800:2237,// XK_notequal
8801:2255,// XK_identical
8804:2236,// XK_lessthanequal
8805:2238,// XK_greaterthanequal
8834:2266,// XK_includedin
8835:2267,// XK_includes
8866:3068,// XK_righttack
8867:3036,// XK_lefttack
8868:3010,// XK_downtack
8869:3022,// XK_uptack
8968:3027,// XK_upstile
8970:3012,// XK_downstile
8981:2810,// XK_telephonerecorder
8992:2212,// XK_topintegral
8993:2213,// XK_botintegral
9109:3020,// XK_quad
9115:2219,// XK_topleftparens
9117:2220,// XK_botleftparens
9118:2221,// XK_toprightparens
9120:2222,// XK_botrightparens
9121:2215,// XK_topleftsqbracket
9123:2216,// XK_botleftsqbracket
9124:2217,// XK_toprightsqbracket
9126:2218,// XK_botrightsqbracket
9128:2223,// XK_leftmiddlecurlybrace
9132:2224,// XK_rightmiddlecurlybrace
9143:2209,// XK_leftradical
9146:2543,// XK_horizlinescan1
9147:2544,// XK_horizlinescan3
9148:2546,// XK_horizlinescan7
9149:2547,// XK_horizlinescan9
9225:2530,// XK_ht
9226:2533,// XK_lf
9227:2537,// XK_vt
9228:2531,// XK_ff
9229:2532,// XK_cr
9251:2732,// XK_signifblank
9252:2536,// XK_nl
9472:2211,// XK_horizconnector
9474:2214,// XK_vertconnector
9484:2210,// XK_topleftradical
9488:2539,// XK_uprightcorner
9492:2541,// XK_lowleftcorner
9496:2538,// XK_lowrightcorner
9500:2548,// XK_leftt
9508:2549,// XK_rightt
9516:2551,// XK_topt
9524:2550,// XK_bott
9532:2542,// XK_crossinglines
9618:2529,// XK_checkerboard
9642:2791,// XK_enfilledsqbullet
9643:2785,// XK_enopensquarebullet
9644:2779,// XK_filledrectbullet
9645:2786,// XK_openrectbullet
9646:2783,// XK_emfilledrect
9647:2767,// XK_emopenrectangle
9650:2792,// XK_filledtribulletup
9651:2787,// XK_opentribulletup
9654:2781,// XK_filledrighttribullet
9655:2765,// XK_rightopentriangle
9660:2793,// XK_filledtribulletdown
9661:2788,// XK_opentribulletdown
9664:2780,// XK_filledlefttribullet
9665:2764,// XK_leftopentriangle
9670:2528,// XK_soliddiamond
9675:2766,// XK_emopencircle
9679:2782,// XK_emfilledcircle
9702:2784,// XK_enopencircbullet
9734:2789,// XK_openstar
9742:2809,// XK_telephone
9747:2762,// XK_signaturemark
9756:2794,// XK_leftpointer
9758:2795,// XK_rightpointer
9792:2808,// XK_femalesymbol
9794:2807,// XK_malesymbol
9827:2796,// XK_club
9829:2798,// XK_heart
9830:2797,// XK_diamond
9837:2806,// XK_musicalflat
9839:2805,// XK_musicalsharp
10003:2803,// XK_checkmark
10007:2804,// XK_ballotcross
10013:2777,// XK_latincross
10016:2800,// XK_maltesecross
10216:2748,// XK_leftanglebracket
10217:2750,// XK_rightanglebracket
12289:1188,// XK_kana_comma
12290:1185,// XK_kana_fullstop
12300:1186,// XK_kana_openingbracket
12301:1187,// XK_kana_closingbracket
12443:1246,// XK_voicedsound
12444:1247,// XK_semivoicedsound
12449:1191,// XK_kana_a
12450:1201,// XK_kana_A
12451:1192,// XK_kana_i
12452:1202,// XK_kana_I
12453:1193,// XK_kana_u
12454:1203,// XK_kana_U
12455:1194,// XK_kana_e
12456:1204,// XK_kana_E
12457:1195,// XK_kana_o
12458:1205,// XK_kana_O
12459:1206,// XK_kana_KA
12461:1207,// XK_kana_KI
12463:1208,// XK_kana_KU
12465:1209,// XK_kana_KE
12467:1210,// XK_kana_KO
12469:1211,// XK_kana_SA
12471:1212,// XK_kana_SHI
12473:1213,// XK_kana_SU
12475:1214,// XK_kana_SE
12477:1215,// XK_kana_SO
12479:1216,// XK_kana_TA
12481:1217,// XK_kana_CHI
12483:1199,// XK_kana_tsu
12484:1218,// XK_kana_TSU
12486:1219,// XK_kana_TE
12488:1220,// XK_kana_TO
12490:1221,// XK_kana_NA
12491:1222,// XK_kana_NI
12492:1223,// XK_kana_NU
12493:1224,// XK_kana_NE
12494:1225,// XK_kana_NO
12495:1226,// XK_kana_HA
12498:1227,// XK_kana_HI
12501:1228,// XK_kana_FU
12504:1229,// XK_kana_HE
12507:1230,// XK_kana_HO
12510:1231,// XK_kana_MA
12511:1232,// XK_kana_MI
12512:1233,// XK_kana_MU
12513:1234,// XK_kana_ME
12514:1235,// XK_kana_MO
12515:1196,// XK_kana_ya
12516:1236,// XK_kana_YA
12517:1197,// XK_kana_yu
12518:1237,// XK_kana_YU
12519:1198,// XK_kana_yo
12520:1238,// XK_kana_YO
12521:1239,// XK_kana_RA
12522:1240,// XK_kana_RI
12523:1241,// XK_kana_RU
12524:1242,// XK_kana_RE
12525:1243,// XK_kana_RO
12527:1244,// XK_kana_WA
12530:1190,// XK_kana_WO
12531:1245,// XK_kana_N
12539:1189,// XK_kana_conjunctive
12540:1200// XK_prolongedsound
};exports.default={lookup:function lookup(u){// Latin-1 is one-to-one mapping
if(u>=32&&u<=255){return u}// Lookup table (fairly random)
var keysym=codepoints[u];if(keysym!==undefined){return keysym}// General mapping as final fallback
return 16777216|u}};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=Mouse;var _logging=require('../util/logging.js');var Log=_interopRequireWildcard(_logging);var _browser=require('../util/browser.js');var _events=require('../util/events.js');function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var WHEEL_STEP=10;// Delta threshold for a mouse wheel step
/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Copyright (C) 2013 Samuel Mannehed for Cendio AB
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 */var WHEEL_STEP_TIMEOUT=50;// ms
var WHEEL_LINE_HEIGHT=19;function Mouse(target){this._target=target||document;this._doubleClickTimer=null;this._lastTouchPos=null;this._pos=null;this._wheelStepXTimer=null;this._wheelStepYTimer=null;this._accumulatedWheelDeltaX=0;this._accumulatedWheelDeltaY=0;this._eventHandlers={'mousedown':this._handleMouseDown.bind(this),'mouseup':this._handleMouseUp.bind(this),'mousemove':this._handleMouseMove.bind(this),'mousewheel':this._handleMouseWheel.bind(this),'mousedisable':this._handleMouseDisable.bind(this)}};Mouse.prototype={// ===== PROPERTIES =====
touchButton:1,// Button mask (1, 2, 4) for touch devices (0 means ignore clicks)
// ===== EVENT HANDLERS =====
onmousebutton:function onmousebutton(){},// Handler for mouse button click/release
onmousemove:function onmousemove(){},// Handler for mouse movement
// ===== PRIVATE METHODS =====
_resetDoubleClickTimer:function _resetDoubleClickTimer(){this._doubleClickTimer=null},_handleMouseButton:function _handleMouseButton(e,down){this._updateMousePosition(e);var pos=this._pos;var bmask;if(e.touches||e.changedTouches){// Touch device
// When two touches occur within 500 ms of each other and are
// close enough together a double click is triggered.
if(down==1){if(this._doubleClickTimer===null){this._lastTouchPos=pos}else{clearTimeout(this._doubleClickTimer);// When the distance between the two touches is small enough
// force the position of the latter touch to the position of
// the first.
var xs=this._lastTouchPos.x-pos.x;var ys=this._lastTouchPos.y-pos.y;var d=Math.sqrt(xs*xs+ys*ys);// The goal is to trigger on a certain physical width, the
// devicePixelRatio brings us a bit closer but is not optimal.
var threshold=20*(window.devicePixelRatio||1);if(d<threshold){pos=this._lastTouchPos}}this._doubleClickTimer=setTimeout(this._resetDoubleClickTimer.bind(this),500)}bmask=this.touchButton;// If bmask is set
}else if(e.which){/* everything except IE */bmask=1<<e.button}else{/* IE including 9 */bmask=(e.button&1)+// Left
(e.button&2)*2+// Right
(e.button&4)/2;// Middle
}Log.Debug('onmousebutton '+(down?'down':'up')+', x: '+pos.x+', y: '+pos.y+', bmask: '+bmask);this.onmousebutton(pos.x,pos.y,down,bmask);(0,_events.stopEvent)(e)},_handleMouseDown:function _handleMouseDown(e){// Touch events have implicit capture
if(e.type==='mousedown'){(0,_events.setCapture)(this._target)}this._handleMouseButton(e,1)},_handleMouseUp:function _handleMouseUp(e){this._handleMouseButton(e,0)},// Mouse wheel events are sent in steps over VNC. This means that the VNC
// protocol can't handle a wheel event with specific distance or speed.
// Therefor, if we get a lot of small mouse wheel events we combine them.
_generateWheelStepX:function _generateWheelStepX(){if(this._accumulatedWheelDeltaX<0){this.onmousebutton(this._pos.x,this._pos.y,1,1<<5);this.onmousebutton(this._pos.x,this._pos.y,0,1<<5)}else if(this._accumulatedWheelDeltaX>0){this.onmousebutton(this._pos.x,this._pos.y,1,1<<6);this.onmousebutton(this._pos.x,this._pos.y,0,1<<6)}this._accumulatedWheelDeltaX=0},_generateWheelStepY:function _generateWheelStepY(){if(this._accumulatedWheelDeltaY<0){this.onmousebutton(this._pos.x,this._pos.y,1,1<<3);this.onmousebutton(this._pos.x,this._pos.y,0,1<<3)}else if(this._accumulatedWheelDeltaY>0){this.onmousebutton(this._pos.x,this._pos.y,1,1<<4);this.onmousebutton(this._pos.x,this._pos.y,0,1<<4)}this._accumulatedWheelDeltaY=0},_resetWheelStepTimers:function _resetWheelStepTimers(){window.clearTimeout(this._wheelStepXTimer);window.clearTimeout(this._wheelStepYTimer);this._wheelStepXTimer=null;this._wheelStepYTimer=null},_handleMouseWheel:function _handleMouseWheel(e){this._resetWheelStepTimers();this._updateMousePosition(e);var dX=e.deltaX;var dY=e.deltaY;// Pixel units unless it's non-zero.
// Note that if deltamode is line or page won't matter since we aren't
// sending the mouse wheel delta to the server anyway.
// The difference between pixel and line can be important however since
// we have a threshold that can be smaller than the line height.
if(e.deltaMode!==0){dX*=WHEEL_LINE_HEIGHT;dY*=WHEEL_LINE_HEIGHT}this._accumulatedWheelDeltaX+=dX;this._accumulatedWheelDeltaY+=dY;// Generate a mouse wheel step event when the accumulated delta
// for one of the axes is large enough.
// Small delta events that do not pass the threshold get sent
// after a timeout.
if(Math.abs(this._accumulatedWheelDeltaX)>WHEEL_STEP){this._generateWheelStepX()}else{this._wheelStepXTimer=window.setTimeout(this._generateWheelStepX.bind(this),WHEEL_STEP_TIMEOUT)}if(Math.abs(this._accumulatedWheelDeltaY)>WHEEL_STEP){this._generateWheelStepY()}else{this._wheelStepYTimer=window.setTimeout(this._generateWheelStepY.bind(this),WHEEL_STEP_TIMEOUT)}(0,_events.stopEvent)(e)},_handleMouseMove:function _handleMouseMove(e){this._updateMousePosition(e);this.onmousemove(this._pos.x,this._pos.y);(0,_events.stopEvent)(e)},_handleMouseDisable:function _handleMouseDisable(e){/*
         * Stop propagation if inside canvas area
         * Note: This is only needed for the 'click' event as it fails
         *       to fire properly for the target element so we have
         *       to listen on the document element instead.
         */if(e.target==this._target){(0,_events.stopEvent)(e)}},// Update coordinates relative to target
_updateMousePosition:function _updateMousePosition(e){e=(0,_events.getPointerEvent)(e);var bounds=this._target.getBoundingClientRect();var x,y;// Clip to target bounds
if(e.clientX<bounds.left){x=0}else if(e.clientX>=bounds.right){x=bounds.width-1}else{x=e.clientX-bounds.left}if(e.clientY<bounds.top){y=0}else if(e.clientY>=bounds.bottom){y=bounds.height-1}else{y=e.clientY-bounds.top}this._pos={x:x,y:y}},// ===== PUBLIC METHODS =====
grab:function grab(){var c=this._target;if(_browser.isTouchDevice){c.addEventListener('touchstart',this._eventHandlers.mousedown);c.addEventListener('touchend',this._eventHandlers.mouseup);c.addEventListener('touchmove',this._eventHandlers.mousemove)}c.addEventListener('mousedown',this._eventHandlers.mousedown);c.addEventListener('mouseup',this._eventHandlers.mouseup);c.addEventListener('mousemove',this._eventHandlers.mousemove);c.addEventListener('wheel',this._eventHandlers.mousewheel);/* Prevent middle-click pasting (see above for why we bind to document) */document.addEventListener('click',this._eventHandlers.mousedisable);/* preventDefault() on mousedown doesn't stop this event for some
           reason so we have to explicitly block it */c.addEventListener('contextmenu',this._eventHandlers.mousedisable)},ungrab:function ungrab(){var c=this._target;this._resetWheelStepTimers();if(_browser.isTouchDevice){c.removeEventListener('touchstart',this._eventHandlers.mousedown);c.removeEventListener('touchend',this._eventHandlers.mouseup);c.removeEventListener('touchmove',this._eventHandlers.mousemove)}c.removeEventListener('mousedown',this._eventHandlers.mousedown);c.removeEventListener('mouseup',this._eventHandlers.mouseup);c.removeEventListener('mousemove',this._eventHandlers.mousemove);c.removeEventListener('wheel',this._eventHandlers.mousewheel);document.removeEventListener('click',this._eventHandlers.mousedisable);c.removeEventListener('contextmenu',this._eventHandlers.mousedisable)}};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.getKeycode=getKeycode;exports.getKey=getKey;exports.getKeysym=getKeysym;var _keysym=require('./keysym.js');var _keysym2=_interopRequireDefault(_keysym);var _keysymdef=require('./keysymdef.js');var _keysymdef2=_interopRequireDefault(_keysymdef);var _vkeys=require('./vkeys.js');var _vkeys2=_interopRequireDefault(_vkeys);var _fixedkeys=require('./fixedkeys.js');var _fixedkeys2=_interopRequireDefault(_fixedkeys);var _domkeytable=require('./domkeytable.js');var _domkeytable2=_interopRequireDefault(_domkeytable);var _browser=require('../util/browser.js');var browser=_interopRequireWildcard(_browser);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}// Get 'KeyboardEvent.code', handling legacy browsers
function getKeycode(evt){// Are we getting proper key identifiers?
// (unfortunately Firefox and Chrome are crappy here and gives
// us an empty string on some platforms, rather than leaving it
// undefined)
if(evt.code){// Mozilla isn't fully in sync with the spec yet
switch(evt.code){case'OSLeft':return'MetaLeft';case'OSRight':return'MetaRight';}return evt.code}// The de-facto standard is to use Windows Virtual-Key codes
// in the 'keyCode' field for non-printable characters. However
// Webkit sets it to the same as charCode in 'keypress' events.
if(evt.type!=='keypress'&&evt.keyCode in _vkeys2.default){var code=_vkeys2.default[evt.keyCode];// macOS has messed up this code for some reason
if(browser.isMac()&&code==='ContextMenu'){code='MetaRight'}// The keyCode doesn't distinguish between left and right
// for the standard modifiers
if(evt.location===2){switch(code){case'ShiftLeft':return'ShiftRight';case'ControlLeft':return'ControlRight';case'AltLeft':return'AltRight';}}// Nor a bunch of the numpad keys
if(evt.location===3){switch(code){case'Delete':return'NumpadDecimal';case'Insert':return'Numpad0';case'End':return'Numpad1';case'ArrowDown':return'Numpad2';case'PageDown':return'Numpad3';case'ArrowLeft':return'Numpad4';case'ArrowRight':return'Numpad6';case'Home':return'Numpad7';case'ArrowUp':return'Numpad8';case'PageUp':return'Numpad9';case'Enter':return'NumpadEnter';}}return code}return'Unidentified'}// Get 'KeyboardEvent.key', handling legacy browsers
function getKey(evt){// Are we getting a proper key value?
if(evt.key!==undefined){// IE and Edge use some ancient version of the spec
// https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8860571/
switch(evt.key){case'Spacebar':return' ';case'Esc':return'Escape';case'Scroll':return'ScrollLock';case'Win':return'Meta';case'Apps':return'ContextMenu';case'Up':return'ArrowUp';case'Left':return'ArrowLeft';case'Right':return'ArrowRight';case'Down':return'ArrowDown';case'Del':return'Delete';case'Divide':return'/';case'Multiply':return'*';case'Subtract':return'-';case'Add':return'+';case'Decimal':return evt.char;}// Mozilla isn't fully in sync with the spec yet
switch(evt.key){case'OS':return'Meta';}// iOS leaks some OS names
switch(evt.key){case'UIKeyInputUpArrow':return'ArrowUp';case'UIKeyInputDownArrow':return'ArrowDown';case'UIKeyInputLeftArrow':return'ArrowLeft';case'UIKeyInputRightArrow':return'ArrowRight';case'UIKeyInputEscape':return'Escape';}// IE and Edge have broken handling of AltGraph so we cannot
// trust them for printable characters
if(evt.key.length!==1||!browser.isIE()&&!browser.isEdge()){return evt.key}}// Try to deduce it based on the physical key
var code=getKeycode(evt);if(code in _fixedkeys2.default){return _fixedkeys2.default[code]}// If that failed, then see if we have a printable character
if(evt.charCode){return String.fromCharCode(evt.charCode)}// At this point we have nothing left to go on
return'Unidentified'}// Get the most reliable keysym value we can get from a key event
function getKeysym(evt){var key=getKey(evt);if(key==='Unidentified'){return null}// First look up special keys
if(key in _domkeytable2.default){var location=evt.location;// Safari screws up location for the right cmd key
if(key==='Meta'&&location===0){location=2}if(location===undefined||location>3){location=0}return _domkeytable2.default[key][location]}// Now we need to look at the Unicode symbol instead
var codepoint;// Special key? (FIXME: Should have been caught earlier)
if(key.length!==1){return null}codepoint=key.charCodeAt();if(codepoint){return _keysymdef2.default.lookup(codepoint)}return null}'use strict';Object.defineProperty(exports,'__esModule',{value:true});/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2017 Pierre Ossman for Cendio AB
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 *//*
 * Mapping between Microsoft® Windows® Virtual-Key codes and
 * HTML key codes.
 */exports.default={8:'Backspace',9:'Tab',10:'NumpadClear',13:'Enter',16:'ShiftLeft',17:'ControlLeft',18:'AltLeft',19:'Pause',20:'CapsLock',21:'Lang1',25:'Lang2',27:'Escape',28:'Convert',29:'NonConvert',32:'Space',33:'PageUp',34:'PageDown',35:'End',36:'Home',37:'ArrowLeft',38:'ArrowUp',39:'ArrowRight',40:'ArrowDown',41:'Select',44:'PrintScreen',45:'Insert',46:'Delete',47:'Help',48:'Digit0',49:'Digit1',50:'Digit2',51:'Digit3',52:'Digit4',53:'Digit5',54:'Digit6',55:'Digit7',56:'Digit8',57:'Digit9',91:'MetaLeft',92:'MetaRight',93:'ContextMenu',95:'Sleep',96:'Numpad0',97:'Numpad1',98:'Numpad2',99:'Numpad3',100:'Numpad4',101:'Numpad5',102:'Numpad6',103:'Numpad7',104:'Numpad8',105:'Numpad9',106:'NumpadMultiply',107:'NumpadAdd',108:'NumpadDecimal',109:'NumpadSubtract',110:'NumpadDecimal',// Duplicate, because buggy on Windows
111:'NumpadDivide',112:'F1',113:'F2',114:'F3',115:'F4',116:'F5',117:'F6',118:'F7',119:'F8',120:'F9',121:'F10',122:'F11',123:'F12',124:'F13',125:'F14',126:'F15',127:'F16',128:'F17',129:'F18',130:'F19',131:'F20',132:'F21',133:'F22',134:'F23',135:'F24',144:'NumLock',145:'ScrollLock',166:'BrowserBack',167:'BrowserForward',168:'BrowserRefresh',169:'BrowserStop',170:'BrowserSearch',171:'BrowserFavorites',172:'BrowserHome',173:'AudioVolumeMute',174:'AudioVolumeDown',175:'AudioVolumeUp',176:'MediaTrackNext',177:'MediaTrackPrevious',178:'MediaStop',179:'MediaPlayPause',180:'LaunchMail',181:'MediaSelect',182:'LaunchApp1',183:'LaunchApp2',225:'AltRight'// Only when it is AltGraph
};'use strict';Object.defineProperty(exports,'__esModule',{value:true});/*
 * This file is auto-generated from keymaps.csv on 2017-05-31 16:20
 * Database checksum sha256(92fd165507f2a3b8c5b3fa56e425d45788dbcb98cf067a307527d91ce22cab94)
 * To re-generate, run:
 *   keymap-gen --lang=js code-map keymaps.csv html atset1
*/exports.default={'Again':57349,/* html:Again (Again) -> linux:129 (KEY_AGAIN) -> atset1:57349 */'AltLeft':56,/* html:AltLeft (AltLeft) -> linux:56 (KEY_LEFTALT) -> atset1:56 */'AltRight':57400,/* html:AltRight (AltRight) -> linux:100 (KEY_RIGHTALT) -> atset1:57400 */'ArrowDown':57424,/* html:ArrowDown (ArrowDown) -> linux:108 (KEY_DOWN) -> atset1:57424 */'ArrowLeft':57419,/* html:ArrowLeft (ArrowLeft) -> linux:105 (KEY_LEFT) -> atset1:57419 */'ArrowRight':57421,/* html:ArrowRight (ArrowRight) -> linux:106 (KEY_RIGHT) -> atset1:57421 */'ArrowUp':57416,/* html:ArrowUp (ArrowUp) -> linux:103 (KEY_UP) -> atset1:57416 */'AudioVolumeDown':57390,/* html:AudioVolumeDown (AudioVolumeDown) -> linux:114 (KEY_VOLUMEDOWN) -> atset1:57390 */'AudioVolumeMute':57376,/* html:AudioVolumeMute (AudioVolumeMute) -> linux:113 (KEY_MUTE) -> atset1:57376 */'AudioVolumeUp':57392,/* html:AudioVolumeUp (AudioVolumeUp) -> linux:115 (KEY_VOLUMEUP) -> atset1:57392 */'Backquote':41,/* html:Backquote (Backquote) -> linux:41 (KEY_GRAVE) -> atset1:41 */'Backslash':43,/* html:Backslash (Backslash) -> linux:43 (KEY_BACKSLASH) -> atset1:43 */'Backspace':14,/* html:Backspace (Backspace) -> linux:14 (KEY_BACKSPACE) -> atset1:14 */'BracketLeft':26,/* html:BracketLeft (BracketLeft) -> linux:26 (KEY_LEFTBRACE) -> atset1:26 */'BracketRight':27,/* html:BracketRight (BracketRight) -> linux:27 (KEY_RIGHTBRACE) -> atset1:27 */'BrowserBack':57450,/* html:BrowserBack (BrowserBack) -> linux:158 (KEY_BACK) -> atset1:57450 */'BrowserFavorites':57446,/* html:BrowserFavorites (BrowserFavorites) -> linux:156 (KEY_BOOKMARKS) -> atset1:57446 */'BrowserForward':57449,/* html:BrowserForward (BrowserForward) -> linux:159 (KEY_FORWARD) -> atset1:57449 */'BrowserHome':57394,/* html:BrowserHome (BrowserHome) -> linux:172 (KEY_HOMEPAGE) -> atset1:57394 */'BrowserRefresh':57447,/* html:BrowserRefresh (BrowserRefresh) -> linux:173 (KEY_REFRESH) -> atset1:57447 */'BrowserSearch':57445,/* html:BrowserSearch (BrowserSearch) -> linux:217 (KEY_SEARCH) -> atset1:57445 */'BrowserStop':57448,/* html:BrowserStop (BrowserStop) -> linux:128 (KEY_STOP) -> atset1:57448 */'CapsLock':58,/* html:CapsLock (CapsLock) -> linux:58 (KEY_CAPSLOCK) -> atset1:58 */'Comma':51,/* html:Comma (Comma) -> linux:51 (KEY_COMMA) -> atset1:51 */'ContextMenu':57437,/* html:ContextMenu (ContextMenu) -> linux:127 (KEY_COMPOSE) -> atset1:57437 */'ControlLeft':29,/* html:ControlLeft (ControlLeft) -> linux:29 (KEY_LEFTCTRL) -> atset1:29 */'ControlRight':57373,/* html:ControlRight (ControlRight) -> linux:97 (KEY_RIGHTCTRL) -> atset1:57373 */'Convert':121,/* html:Convert (Convert) -> linux:92 (KEY_HENKAN) -> atset1:121 */'Copy':57464,/* html:Copy (Copy) -> linux:133 (KEY_COPY) -> atset1:57464 */'Cut':57404,/* html:Cut (Cut) -> linux:137 (KEY_CUT) -> atset1:57404 */'Delete':57427,/* html:Delete (Delete) -> linux:111 (KEY_DELETE) -> atset1:57427 */'Digit0':11,/* html:Digit0 (Digit0) -> linux:11 (KEY_0) -> atset1:11 */'Digit1':2,/* html:Digit1 (Digit1) -> linux:2 (KEY_1) -> atset1:2 */'Digit2':3,/* html:Digit2 (Digit2) -> linux:3 (KEY_2) -> atset1:3 */'Digit3':4,/* html:Digit3 (Digit3) -> linux:4 (KEY_3) -> atset1:4 */'Digit4':5,/* html:Digit4 (Digit4) -> linux:5 (KEY_4) -> atset1:5 */'Digit5':6,/* html:Digit5 (Digit5) -> linux:6 (KEY_5) -> atset1:6 */'Digit6':7,/* html:Digit6 (Digit6) -> linux:7 (KEY_6) -> atset1:7 */'Digit7':8,/* html:Digit7 (Digit7) -> linux:8 (KEY_7) -> atset1:8 */'Digit8':9,/* html:Digit8 (Digit8) -> linux:9 (KEY_8) -> atset1:9 */'Digit9':10,/* html:Digit9 (Digit9) -> linux:10 (KEY_9) -> atset1:10 */'Eject':57469,/* html:Eject (Eject) -> linux:162 (KEY_EJECTCLOSECD) -> atset1:57469 */'End':57423,/* html:End (End) -> linux:107 (KEY_END) -> atset1:57423 */'Enter':28,/* html:Enter (Enter) -> linux:28 (KEY_ENTER) -> atset1:28 */'Equal':13,/* html:Equal (Equal) -> linux:13 (KEY_EQUAL) -> atset1:13 */'Escape':1,/* html:Escape (Escape) -> linux:1 (KEY_ESC) -> atset1:1 */'F1':59,/* html:F1 (F1) -> linux:59 (KEY_F1) -> atset1:59 */'F10':68,/* html:F10 (F10) -> linux:68 (KEY_F10) -> atset1:68 */'F11':87,/* html:F11 (F11) -> linux:87 (KEY_F11) -> atset1:87 */'F12':88,/* html:F12 (F12) -> linux:88 (KEY_F12) -> atset1:88 */'F13':93,/* html:F13 (F13) -> linux:183 (KEY_F13) -> atset1:93 */'F14':94,/* html:F14 (F14) -> linux:184 (KEY_F14) -> atset1:94 */'F15':95,/* html:F15 (F15) -> linux:185 (KEY_F15) -> atset1:95 */'F16':85,/* html:F16 (F16) -> linux:186 (KEY_F16) -> atset1:85 */'F17':57347,/* html:F17 (F17) -> linux:187 (KEY_F17) -> atset1:57347 */'F18':57463,/* html:F18 (F18) -> linux:188 (KEY_F18) -> atset1:57463 */'F19':57348,/* html:F19 (F19) -> linux:189 (KEY_F19) -> atset1:57348 */'F2':60,/* html:F2 (F2) -> linux:60 (KEY_F2) -> atset1:60 */'F20':90,/* html:F20 (F20) -> linux:190 (KEY_F20) -> atset1:90 */'F21':116,/* html:F21 (F21) -> linux:191 (KEY_F21) -> atset1:116 */'F22':57465,/* html:F22 (F22) -> linux:192 (KEY_F22) -> atset1:57465 */'F23':109,/* html:F23 (F23) -> linux:193 (KEY_F23) -> atset1:109 */'F24':111,/* html:F24 (F24) -> linux:194 (KEY_F24) -> atset1:111 */'F3':61,/* html:F3 (F3) -> linux:61 (KEY_F3) -> atset1:61 */'F4':62,/* html:F4 (F4) -> linux:62 (KEY_F4) -> atset1:62 */'F5':63,/* html:F5 (F5) -> linux:63 (KEY_F5) -> atset1:63 */'F6':64,/* html:F6 (F6) -> linux:64 (KEY_F6) -> atset1:64 */'F7':65,/* html:F7 (F7) -> linux:65 (KEY_F7) -> atset1:65 */'F8':66,/* html:F8 (F8) -> linux:66 (KEY_F8) -> atset1:66 */'F9':67,/* html:F9 (F9) -> linux:67 (KEY_F9) -> atset1:67 */'Find':57409,/* html:Find (Find) -> linux:136 (KEY_FIND) -> atset1:57409 */'Help':57461,/* html:Help (Help) -> linux:138 (KEY_HELP) -> atset1:57461 */'Hiragana':119,/* html:Hiragana (Lang4) -> linux:91 (KEY_HIRAGANA) -> atset1:119 */'Home':57415,/* html:Home (Home) -> linux:102 (KEY_HOME) -> atset1:57415 */'Insert':57426,/* html:Insert (Insert) -> linux:110 (KEY_INSERT) -> atset1:57426 */'IntlBackslash':86,/* html:IntlBackslash (IntlBackslash) -> linux:86 (KEY_102ND) -> atset1:86 */'IntlRo':115,/* html:IntlRo (IntlRo) -> linux:89 (KEY_RO) -> atset1:115 */'IntlYen':125,/* html:IntlYen (IntlYen) -> linux:124 (KEY_YEN) -> atset1:125 */'KanaMode':112,/* html:KanaMode (KanaMode) -> linux:93 (KEY_KATAKANAHIRAGANA) -> atset1:112 */'Katakana':120,/* html:Katakana (Lang3) -> linux:90 (KEY_KATAKANA) -> atset1:120 */'KeyA':30,/* html:KeyA (KeyA) -> linux:30 (KEY_A) -> atset1:30 */'KeyB':48,/* html:KeyB (KeyB) -> linux:48 (KEY_B) -> atset1:48 */'KeyC':46,/* html:KeyC (KeyC) -> linux:46 (KEY_C) -> atset1:46 */'KeyD':32,/* html:KeyD (KeyD) -> linux:32 (KEY_D) -> atset1:32 */'KeyE':18,/* html:KeyE (KeyE) -> linux:18 (KEY_E) -> atset1:18 */'KeyF':33,/* html:KeyF (KeyF) -> linux:33 (KEY_F) -> atset1:33 */'KeyG':34,/* html:KeyG (KeyG) -> linux:34 (KEY_G) -> atset1:34 */'KeyH':35,/* html:KeyH (KeyH) -> linux:35 (KEY_H) -> atset1:35 */'KeyI':23,/* html:KeyI (KeyI) -> linux:23 (KEY_I) -> atset1:23 */'KeyJ':36,/* html:KeyJ (KeyJ) -> linux:36 (KEY_J) -> atset1:36 */'KeyK':37,/* html:KeyK (KeyK) -> linux:37 (KEY_K) -> atset1:37 */'KeyL':38,/* html:KeyL (KeyL) -> linux:38 (KEY_L) -> atset1:38 */'KeyM':50,/* html:KeyM (KeyM) -> linux:50 (KEY_M) -> atset1:50 */'KeyN':49,/* html:KeyN (KeyN) -> linux:49 (KEY_N) -> atset1:49 */'KeyO':24,/* html:KeyO (KeyO) -> linux:24 (KEY_O) -> atset1:24 */'KeyP':25,/* html:KeyP (KeyP) -> linux:25 (KEY_P) -> atset1:25 */'KeyQ':16,/* html:KeyQ (KeyQ) -> linux:16 (KEY_Q) -> atset1:16 */'KeyR':19,/* html:KeyR (KeyR) -> linux:19 (KEY_R) -> atset1:19 */'KeyS':31,/* html:KeyS (KeyS) -> linux:31 (KEY_S) -> atset1:31 */'KeyT':20,/* html:KeyT (KeyT) -> linux:20 (KEY_T) -> atset1:20 */'KeyU':22,/* html:KeyU (KeyU) -> linux:22 (KEY_U) -> atset1:22 */'KeyV':47,/* html:KeyV (KeyV) -> linux:47 (KEY_V) -> atset1:47 */'KeyW':17,/* html:KeyW (KeyW) -> linux:17 (KEY_W) -> atset1:17 */'KeyX':45,/* html:KeyX (KeyX) -> linux:45 (KEY_X) -> atset1:45 */'KeyY':21,/* html:KeyY (KeyY) -> linux:21 (KEY_Y) -> atset1:21 */'KeyZ':44,/* html:KeyZ (KeyZ) -> linux:44 (KEY_Z) -> atset1:44 */'Lang3':120,/* html:Lang3 (Lang3) -> linux:90 (KEY_KATAKANA) -> atset1:120 */'Lang4':119,/* html:Lang4 (Lang4) -> linux:91 (KEY_HIRAGANA) -> atset1:119 */'Lang5':118,/* html:Lang5 (Lang5) -> linux:85 (KEY_ZENKAKUHANKAKU) -> atset1:118 */'LaunchApp1':57451,/* html:LaunchApp1 (LaunchApp1) -> linux:157 (KEY_COMPUTER) -> atset1:57451 */'LaunchApp2':57377,/* html:LaunchApp2 (LaunchApp2) -> linux:140 (KEY_CALC) -> atset1:57377 */'LaunchMail':57452,/* html:LaunchMail (LaunchMail) -> linux:155 (KEY_MAIL) -> atset1:57452 */'MediaPlayPause':57378,/* html:MediaPlayPause (MediaPlayPause) -> linux:164 (KEY_PLAYPAUSE) -> atset1:57378 */'MediaSelect':57453,/* html:MediaSelect (MediaSelect) -> linux:226 (KEY_MEDIA) -> atset1:57453 */'MediaStop':57380,/* html:MediaStop (MediaStop) -> linux:166 (KEY_STOPCD) -> atset1:57380 */'MediaTrackNext':57369,/* html:MediaTrackNext (MediaTrackNext) -> linux:163 (KEY_NEXTSONG) -> atset1:57369 */'MediaTrackPrevious':57360,/* html:MediaTrackPrevious (MediaTrackPrevious) -> linux:165 (KEY_PREVIOUSSONG) -> atset1:57360 */'MetaLeft':57435,/* html:MetaLeft (MetaLeft) -> linux:125 (KEY_LEFTMETA) -> atset1:57435 */'MetaRight':57436,/* html:MetaRight (MetaRight) -> linux:126 (KEY_RIGHTMETA) -> atset1:57436 */'Minus':12,/* html:Minus (Minus) -> linux:12 (KEY_MINUS) -> atset1:12 */'NonConvert':123,/* html:NonConvert (NonConvert) -> linux:94 (KEY_MUHENKAN) -> atset1:123 */'NumLock':69,/* html:NumLock (NumLock) -> linux:69 (KEY_NUMLOCK) -> atset1:69 */'Numpad0':82,/* html:Numpad0 (Numpad0) -> linux:82 (KEY_KP0) -> atset1:82 */'Numpad1':79,/* html:Numpad1 (Numpad1) -> linux:79 (KEY_KP1) -> atset1:79 */'Numpad2':80,/* html:Numpad2 (Numpad2) -> linux:80 (KEY_KP2) -> atset1:80 */'Numpad3':81,/* html:Numpad3 (Numpad3) -> linux:81 (KEY_KP3) -> atset1:81 */'Numpad4':75,/* html:Numpad4 (Numpad4) -> linux:75 (KEY_KP4) -> atset1:75 */'Numpad5':76,/* html:Numpad5 (Numpad5) -> linux:76 (KEY_KP5) -> atset1:76 */'Numpad6':77,/* html:Numpad6 (Numpad6) -> linux:77 (KEY_KP6) -> atset1:77 */'Numpad7':71,/* html:Numpad7 (Numpad7) -> linux:71 (KEY_KP7) -> atset1:71 */'Numpad8':72,/* html:Numpad8 (Numpad8) -> linux:72 (KEY_KP8) -> atset1:72 */'Numpad9':73,/* html:Numpad9 (Numpad9) -> linux:73 (KEY_KP9) -> atset1:73 */'NumpadAdd':78,/* html:NumpadAdd (NumpadAdd) -> linux:78 (KEY_KPPLUS) -> atset1:78 */'NumpadComma':126,/* html:NumpadComma (NumpadComma) -> linux:121 (KEY_KPCOMMA) -> atset1:126 */'NumpadDecimal':83,/* html:NumpadDecimal (NumpadDecimal) -> linux:83 (KEY_KPDOT) -> atset1:83 */'NumpadDivide':57397,/* html:NumpadDivide (NumpadDivide) -> linux:98 (KEY_KPSLASH) -> atset1:57397 */'NumpadEnter':57372,/* html:NumpadEnter (NumpadEnter) -> linux:96 (KEY_KPENTER) -> atset1:57372 */'NumpadEqual':89,/* html:NumpadEqual (NumpadEqual) -> linux:117 (KEY_KPEQUAL) -> atset1:89 */'NumpadMultiply':55,/* html:NumpadMultiply (NumpadMultiply) -> linux:55 (KEY_KPASTERISK) -> atset1:55 */'NumpadParenLeft':57462,/* html:NumpadParenLeft (NumpadParenLeft) -> linux:179 (KEY_KPLEFTPAREN) -> atset1:57462 */'NumpadParenRight':57467,/* html:NumpadParenRight (NumpadParenRight) -> linux:180 (KEY_KPRIGHTPAREN) -> atset1:57467 */'NumpadSubtract':74,/* html:NumpadSubtract (NumpadSubtract) -> linux:74 (KEY_KPMINUS) -> atset1:74 */'Open':100,/* html:Open (Open) -> linux:134 (KEY_OPEN) -> atset1:100 */'PageDown':57425,/* html:PageDown (PageDown) -> linux:109 (KEY_PAGEDOWN) -> atset1:57425 */'PageUp':57417,/* html:PageUp (PageUp) -> linux:104 (KEY_PAGEUP) -> atset1:57417 */'Paste':101,/* html:Paste (Paste) -> linux:135 (KEY_PASTE) -> atset1:101 */'Pause':57414,/* html:Pause (Pause) -> linux:119 (KEY_PAUSE) -> atset1:57414 */'Period':52,/* html:Period (Period) -> linux:52 (KEY_DOT) -> atset1:52 */'Power':57438,/* html:Power (Power) -> linux:116 (KEY_POWER) -> atset1:57438 */'PrintScreen':84,/* html:PrintScreen (PrintScreen) -> linux:99 (KEY_SYSRQ) -> atset1:84 */'Props':57350,/* html:Props (Props) -> linux:130 (KEY_PROPS) -> atset1:57350 */'Quote':40,/* html:Quote (Quote) -> linux:40 (KEY_APOSTROPHE) -> atset1:40 */'ScrollLock':70,/* html:ScrollLock (ScrollLock) -> linux:70 (KEY_SCROLLLOCK) -> atset1:70 */'Semicolon':39,/* html:Semicolon (Semicolon) -> linux:39 (KEY_SEMICOLON) -> atset1:39 */'ShiftLeft':42,/* html:ShiftLeft (ShiftLeft) -> linux:42 (KEY_LEFTSHIFT) -> atset1:42 */'ShiftRight':54,/* html:ShiftRight (ShiftRight) -> linux:54 (KEY_RIGHTSHIFT) -> atset1:54 */'Slash':53,/* html:Slash (Slash) -> linux:53 (KEY_SLASH) -> atset1:53 */'Sleep':57439,/* html:Sleep (Sleep) -> linux:142 (KEY_SLEEP) -> atset1:57439 */'Space':57,/* html:Space (Space) -> linux:57 (KEY_SPACE) -> atset1:57 */'Suspend':57381,/* html:Suspend (Suspend) -> linux:205 (KEY_SUSPEND) -> atset1:57381 */'Tab':15,/* html:Tab (Tab) -> linux:15 (KEY_TAB) -> atset1:15 */'Undo':57351,/* html:Undo (Undo) -> linux:131 (KEY_UNDO) -> atset1:57351 */'WakeUp':57443/* html:WakeUp (WakeUp) -> linux:143 (KEY_WAKEUP) -> atset1:57443 */};'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.isTouchDevice=undefined;exports.supportsCursorURIs=supportsCursorURIs;exports.isMac=isMac;exports.isIE=isIE;exports.isEdge=isEdge;exports.isWindows=isWindows;exports.isIOS=isIOS;var _logging=require('./logging.js');var Log=_interopRequireWildcard(_logging);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}// Touch detection
var isTouchDevice=exports.isTouchDevice='ontouchstart'in document.documentElement||// requried for Chrome debugger
document.ontouchstart!==undefined||// required for MS Surface
navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 */window.addEventListener('touchstart',function onFirstTouch(){exports.isTouchDevice=isTouchDevice=true;window.removeEventListener('touchstart',onFirstTouch,false)},false);var _cursor_uris_supported=null;function supportsCursorURIs(){if(_cursor_uris_supported===null){try{var target=document.createElement('canvas');target.style.cursor='url("data:image/x-icon;base64,AAACAAEACAgAAAIAAgA4AQAAFgAAACgAAAAIAAAAEAAAAAEAIAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAA==") 2 2, default';if(target.style.cursor){Log.Info('Data URI scheme cursor supported');_cursor_uris_supported=true}else{Log.Warn('Data URI scheme cursor not supported');_cursor_uris_supported=false}}catch(exc){Log.Error('Data URI scheme cursor test exception: '+exc);_cursor_uris_supported=false}}return _cursor_uris_supported};function isMac(){return navigator&&!!/mac/i.exec(navigator.platform)}function isIE(){return navigator&&!!/trident/i.exec(navigator.userAgent)}function isEdge(){return navigator&&!!/edge/i.exec(navigator.userAgent)}function isWindows(){return navigator&&!!/win/i.exec(navigator.platform)}function isIOS(){return navigator&&(!!/ipad/i.exec(navigator.platform)||!!/iphone/i.exec(navigator.platform)||!!/ipod/i.exec(navigator.platform))}'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.getPointerEvent=getPointerEvent;exports.stopEvent=stopEvent;exports.setCapture=setCapture;exports.releaseCapture=releaseCapture;/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 *//*
 * Cross-browser event and position routines
 */function getPointerEvent(e){return e.changedTouches?e.changedTouches[0]:e.touches?e.touches[0]:e};function stopEvent(e){e.stopPropagation();e.preventDefault()};// Emulate Element.setCapture() when not supported
var _captureRecursion=false;var _captureElem=null;function _captureProxy(e){// Recursion protection as we'll see our own event
if(_captureRecursion)return;// Clone the event as we cannot dispatch an already dispatched event
var newEv=new e.constructor(e.type,e);_captureRecursion=true;_captureElem.dispatchEvent(newEv);_captureRecursion=false;// Avoid double events
e.stopPropagation();// Respect the wishes of the redirected event handlers
if(newEv.defaultPrevented){e.preventDefault()}// Implicitly release the capture on button release
if(e.type==='mouseup'){releaseCapture()}};// Follow cursor style of target element
function _captureElemChanged(){var captureElem=document.getElementById('noVNC_mouse_capture_elem');captureElem.style.cursor=window.getComputedStyle(_captureElem).cursor};var _captureObserver=new MutationObserver(_captureElemChanged);var _captureIndex=0;function setCapture(elem){if(elem.setCapture){elem.setCapture();// IE releases capture on 'click' events which might not trigger
elem.addEventListener('mouseup',releaseCapture)}else{// Release any existing capture in case this method is
// called multiple times without coordination
releaseCapture();var captureElem=document.getElementById('noVNC_mouse_capture_elem');if(captureElem===null){captureElem=document.createElement('div');captureElem.id='noVNC_mouse_capture_elem';captureElem.style.position='fixed';captureElem.style.top='0px';captureElem.style.left='0px';captureElem.style.width='100%';captureElem.style.height='100%';captureElem.style.zIndex=10000;captureElem.style.display='none';document.body.appendChild(captureElem);// This is to make sure callers don't get confused by having
// our blocking element as the target
captureElem.addEventListener('contextmenu',_captureProxy);captureElem.addEventListener('mousemove',_captureProxy);captureElem.addEventListener('mouseup',_captureProxy)}_captureElem=elem;_captureIndex++;// Track cursor and get initial cursor
_captureObserver.observe(elem,{attributes:true});_captureElemChanged();captureElem.style.display='';// We listen to events on window in order to keep tracking if it
// happens to leave the viewport
window.addEventListener('mousemove',_captureProxy);window.addEventListener('mouseup',_captureProxy)}};function releaseCapture(){if(document.releaseCapture){document.releaseCapture()}else{if(!_captureElem){return}// There might be events already queued, so we need to wait for
// them to flush. E.g. contextmenu in Microsoft Edge
window.setTimeout(function(expected){// Only clear it if it's the expected grab (i.e. no one
// else has initiated a new grab)
if(_captureIndex===expected){_captureElem=null}},0,_captureIndex);_captureObserver.disconnect();var captureElem=document.getElementById('noVNC_mouse_capture_elem');captureElem.style.display='none';window.removeEventListener('mousemove',_captureProxy);window.removeEventListener('mouseup',_captureProxy)}};'use strict';Object.defineProperty(exports,'__esModule',{value:true});/*
 * noVNC: HTML5 VNC client
 * Copyright 2017 Pierre Ossman for Cendio AB
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 */var EventTargetMixin={_listeners:null,addEventListener:function addEventListener(type,callback){if(!this._listeners){this._listeners=new Map}if(!this._listeners.has(type)){this._listeners.set(type,new Set)}this._listeners.get(type).add(callback)},removeEventListener:function removeEventListener(type,callback){if(!this._listeners||!this._listeners.has(type)){return}this._listeners.get(type).delete(callback)},dispatchEvent:function dispatchEvent(event){if(!this._listeners||!this._listeners.has(event.type)){return true}this._listeners.get(event.type).forEach(function(callback){callback.call(this,event)},this);return!event.defaultPrevented}};exports.default=EventTargetMixin;'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.init_logging=init_logging;exports.get_logging=get_logging;/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 *//*
 * Logging/debug routines
 */var _log_level='warn';var Debug=function Debug(msg){};var Info=function Info(msg){};var Warn=function Warn(msg){};var Error=function Error(msg){};function init_logging(level){if(typeof level==='undefined'){level=_log_level}else{_log_level=level}exports.Debug=Debug=exports.Info=Info=exports.Warn=Warn=exports.Error=Error=function Error(msg){};if(typeof window.console!=='undefined'){switch(level){case'debug':exports.Debug=Debug=console.debug.bind(window.console);case'info':exports.Info=Info=console.info.bind(window.console);case'warn':exports.Warn=Warn=console.warn.bind(window.console);case'error':exports.Error=Error=console.error.bind(window.console);case'none':break;default:throw new Error('invalid logging type \''+level+'\'');}}};function get_logging(){return _log_level};exports.Debug=Debug;exports.Info=Info;exports.Warn=Warn;exports.Error=Error;// Initialize logging level
init_logging();'use strict';/*
 * noVNC: HTML5 VNC client
 * Copyright 2017 Pierre Ossman for noVNC
 * Licensed under MPL 2.0 or any later version (see LICENSE.txt)
 *//* Polyfills to provide new APIs in old browsers *//* Object.assign() (taken from MDN) */if(typeof Object.assign!='function'){// Must be writable: true, enumerable: false, configurable: true
Object.defineProperty(Object,'assign',{value:function assign(target,varArgs){// .length of function is 2
'use strict';if(target==null){// TypeError if undefined or null
throw new TypeError('Cannot convert undefined or null to object')}var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){// Skip over if undefined or null
for(var nextKey in nextSource){// Avoid bugs when hasOwnProperty is shadowed
if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey]}}}}return to},writable:true,configurable:true})}/* CustomEvent constructor (taken from MDN) */(function(){function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}CustomEvent.prototype=window.Event.prototype;if(typeof window.CustomEvent!=='function'){window.CustomEvent=CustomEvent}})();'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.decodeUTF8=decodeUTF8;/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 *//*
 * Decode from UTF-8
 */function decodeUTF8(utf8string){'use strict';return decodeURIComponent(escape(utf8string))};